%!PS-Adobe-2.0
%%Creator: dvips 5.58 Copyright 1986, 1994 Radical Eye Software
%%Title: manual.dvi
%%CreationDate: Wed May 24 18:22:51 2000
%%Pages: 43
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Bold Times-Italic Times-Roman Courier
%%+ Helvetica-Bold
%%EndComments
%DVIPSCommandLine: /vol/tex/texmf/bin/@sys/dvips558 -o manual.ps manual
%DVIPSParameters: dpi=300, comments removed
%DVIPSSource:  TeX output 2000.05.24:1819
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
 .1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginFont: Times-Bold
% @psencodingfile{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "14 April 1995",
%   filename = "8r.enc",
%   email = "kb@cs.umb.edu",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "xx",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% }
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def
%%EndFont
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale true def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 300 300
(/.../watson.ibm.com/fs/users/E/erik/opensrc/daisy/doc/manual.dvi)
@start /Fa 166[30 5[23 9[16 4[30 2[30 65[{TeXBase1Encoding ReEncodeFont}
5 41.666668 /Times-Bold rf /Fb 5 62 df<00018000000180000001800000018000
000180000001800000018000000180000001800000018000000180000001800000018000
000180000001800000018000FFFFFFFEFFFFFFFE00018000000180000001800000018000
000180000001800000018000000180000001800000018000000180000001800000018000
0001800000018000000180001F227D9C26>43 D<01F00007FC000E0E001C070038038038
03807803C07001C07001C07001C0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F0
01E0F001E0F001E0F001E0F001E0F001E0F001E07001C07001C07001C07803C038038038
03801C07000E0E0007FC0001F00013227EA018>48 D<018003800F80FF80F38003800380
038003800380038003800380038003800380038003800380038003800380038003800380
038003800380038003800380FFFEFFFE0F217CA018>I<03F0000FFC001C1F00300F8060
07806003C0C003C0F003E0F801E0F801E0F801E02003E00003E00003C00003C000078000
0780000F00001E00001C0000380000700000E00001C0000380000700600E00600C006018
00E03000C07FFFC0FFFFC0FFFFC013217EA018>I<FFFFFFFEFFFFFFFE00000000000000
00000000000000000000000000000000000000000000000000FFFFFFFEFFFFFFFE1F0C7D
9126>61 D E /Fc 1 49 df<07C01FF038383018701C600CE00EE00EE00EE00EE00EE00E
E00EE00EE00EE00EE00E600C701C301838381FF007C00F177F9512>48
D E /Fd 5 79 df<70F8F8F87005057C840E>58 D<0000001800000078000001E0000007
8000001E00000078000003E000000F8000003C000000F0000003C000000F0000003C0000
00F0000000F00000003C0000000F00000003C0000000F00000003C0000000F80000003E0
000000780000001E0000000780000001E000000078000000181D1C7C9926>60
D<C0000000F00000003C0000000F00000003C0000000F00000003E0000000F80000001E0
000000780000001E0000000780000001E00000007800000078000001E00000078000001E
00000078000001E000000F8000003E000000F0000003C000000F0000003C000000F00000
00C00000001D1C7C9926>62 D<00FFC00007FE00FFC00007FE000FC0000FC0000FC0001B
C0001BC0001F80001BC0003780001BC0003780001BC00067800033C000CF000033C000CF
000031E0018F000031E0018F000061E0031E000061E0061E000061E0061E000061E00C1E
0000C1E00C3C0000C1E0183C0000C1E0303C0000C0F0303C000180F06078000180F06078
000180F0C078000180F18078000300F180F0000300F300F0000300F300F0000300F600F0
000600FC01E00006007C01E00006007801E0001F007801E000FFE0703FFE00FFE0603FFE
002F227DA12F>77 D<00FF000FFE00FF800FFE000F8001E0000FC001C0001BC00180001B
C001800019E001800019E001800031E003000030F003000030F003000030F00300006078
06000060780600006078060000603C060000C03C0C0000C03E0C0000C01E0C0000C01E0C
0001801F180001800F180001800F18000180079800030007B000030007B000030003F000
030003F000060003E000060001E000060001E0001F0001E000FFE000C000FFE000C00027
227DA127>I E /Fe 134[21 1[30 21 21 12 16 14 1[21 21 21
32 12 2[12 21 21 14 18 21 18 1[18 12[25 37[10 14 42[23
2[{TeXBase1Encoding ReEncodeFont}24 41.666668 /Times-Roman
rf /Ff 205[15 15 49[{TeXBase1Encoding ReEncodeFont}2
29.166668 /Times-Roman rf /Fg 205[17 17 49[{
TeXBase1Encoding ReEncodeFont}2 33.333332 /Times-Roman
rf /Fh 133[21 23 23 32 23 25 14 23 16 1[25 25 25 37 12
23 1[12 25 25 14 23 25 23 25 23 9[39 28 30 25 28 2[28
3[25 2[12 1[32 25 28 30 30 9[23 23 23 23 23 23 23 23
23 23 1[12 1[12 2[14 14 36[25 25 2[{TeXBase1Encoding ReEncodeFont}53
41.666668 /Helvetica-Bold rf /Fi 131[25 2[25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
25 25 25 1[25 1[25 1[25 25 25 25 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 2[25
25 25 1[25 25 2[25 25 25 25 25 25 25 25 25 25 25 25 1[25
25 25 3[25 25 34[{TeXBase1Encoding ReEncodeFont}77 41.666668
/Courier rf /Fj 82[15 51[23 1[33 1[25 15 18 20 1[25 23
25 38 13 2[13 25 23 15 20 25 20 25 23 10[33 33 30 25
2[28 36 1[43 30 2[18 3[30 33 33 1[33 9[23 23 23 23 23
23 23 2[11 43[25 2[{TeXBase1Encoding ReEncodeFont}43
45.833332 /Times-Bold rf /Fk 131[30 1[30 30 30 30 30
30 30 30 30 30 30 30 30 30 30 30 1[30 30 30 30 30 30
30 30 30 1[30 5[30 30 30 30 30 30 30 30 30 30 30 30 30
30 30 1[30 30 30 30 30 30 30 30 30 1[30 30 30 30 1[30
30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 1[30 30
2[30 1[30 35[{TeXBase1Encoding ReEncodeFont}75 50.000000
/Courier rf /Fl 133[27 30 30 43 30 33 20 23 27 1[33 30
33 50 17 33 1[17 33 30 20 27 33 27 33 30 7[43 1[60 43
1[40 33 43 47 37 47 1[56 40 2[23 1[47 37 40 43 43 40
43 7[30 30 30 30 30 30 30 30 30 30 2[20 45[{
TeXBase1Encoding ReEncodeFont}54 59.999973 /Times-Bold
rf /Fm 2 16 df<00007FC000000001FFF00000000F803E0000001E000F000000780003
C00000E00000E00001C000007000038000003800070000001C000E0000000E000C000000
06001C00000007001800000003003800000003803000000001807000000001C060000000
00C06000000000C0E000000000E0C00000000060C00000000060C00000000060C0000000
0060C00000000060C00000000060C00000000060C00000000060C00000000060E0000000
00E06000000000C06000000000C07000000001C030000000018038000000038018000000
03001C00000007000C00000006000E0000000E00070000001C0003800000380001C00000
700000E00000E00000780003C000001E000F0000000F803E00000001FFF0000000007FC0
00002B2F7DA332>13 D<03F0000FFC001FFE003FFF007FFF807FFF80FFFFC0FFFFC0FFFF
C0FFFFC0FFFFC0FFFFC0FFFFC0FFFFC07FFF807FFF803FFF001FFE000FFC0003F0001214
7D9519>15 D E /Fn 104[50 25 1[22 22 24[22 25 25 36 25
25 14 19 17 25 25 25 25 39 14 25 14 14 25 25 17 22 25
22 25 22 3[17 1[17 1[36 36 47 36 36 30 28 33 36 28 36
36 44 30 36 19 17 36 36 28 30 36 33 33 36 1[22 4[14 25
25 25 25 25 25 25 25 25 25 14 12 17 12 2[17 17 17 27[17
7[28 28 2[{TeXBase1Encoding ReEncodeFont}79 50.000000
/Times-Roman rf /Fo 105[25 27[19 22 22 33 22 25 14 19
19 25 25 25 25 36 14 22 14 14 25 25 14 22 25 22 25 25
7[28 1[41 30 36 28 25 30 1[30 36 33 41 28 1[22 17 36
36 30 30 36 33 30 30 6[17 25 25 1[25 1[25 25 25 25 25
14 12 17 12 2[17 17 17 1[41 3[17 30[25 2[{TeXBase1Encoding ReEncodeFont}
68 50.000000 /Times-Italic rf /Fp 105[25 27[22 25 25
36 25 28 17 19 22 1[28 25 28 41 14 28 1[14 28 25 17 22
28 22 28 25 7[36 36 50 36 36 33 28 36 39 30 39 36 47
33 39 1[19 1[39 30 33 36 36 33 36 6[17 25 25 25 25 25
25 25 25 25 25 14 12 17 12 2[17 17 6[17 21[17 7[28 28
2[{TeXBase1Encoding ReEncodeFont}69 50.000000 /Times-Bold
rf /Fq 134[43 1[62 2[29 33 38 2[43 48 72 24 2[24 2[29
38 1[38 1[43 7[62 4[57 48 9[33 4[62 1[57 62 65[{
TeXBase1Encoding ReEncodeFont}21 86.416687 /Times-Bold
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 97 518 a Fq(D)m(AISY)22 b(Dynamic)f(Binary)h(T)-6
b(ranslation)22 b(Softwar)n(e)775 734 y Fp(Erik)12 b(R.)h(Altman)770
800 y(K)o(emal)f(Ebcio)1048 799 y(\013)1044 800 y(glu)604
867 y Fo(IBM)h(T)l(.J)o(.)h(W)-5 b(atson)13 b(Resear)n(c)o(h)h(Center)
817 933 y Fn(PO)e(Box)g(218)577 999 y(Y)-5 b(orkto)o(wn)10
b(Heights,)j(Ne)o(w)g(Y)-5 b(ork)11 b(10598)539 1473
y Fp(Licensed)h(Materials)g(-)g(Pr)o(operty)h(of)f(IBM)421
1537 y(c)407 1539 y Fm(\015)p Fp(Copyright)f(IBM)i(Corp.)i(2000)d(All)h
(Rights)e(Reserved)928 2787 y Fn(1)p eop
%%Page: 2 2
2 1 bop -91 50 a Fl(Contents)-91 174 y Fp(1)50 b(Intr)o(oduction)1690
b(4)-91 290 y(2)50 b(Sample)12 b(Session)g(with)g(D)n(AISY)1365
b(4)-16 356 y Fn(2.1)52 b(User)13 b(V)m(ie)o(w)23 b(.)j(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h
(.)f(.)70 b(4)-16 423 y(2.2)52 b(Internal)11 b(V)m(ie)o(w)38
b(.)25 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)70 b(7)-91 539 y Fp(3)50 b(VLIW)12
b(T)l(r)o(ee)i(Instructions)e(and)f(Generic)i(Machine)e(Model)802
b(12)-91 655 y(4)50 b(D)n(AISY)12 b(Scheduling)f(Algorithm)1302
b(16)-91 771 y(5)50 b(D)n(AISY)12 b(Optimizations)1469
b(19)-16 837 y Fn(5.1)52 b(Combining)47 b(.)25 b(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)45
b(19)-16 903 y(5.2)52 b(Copy)12 b(Propagation)22 b(.)j(.)g(.)h(.)f(.)g
(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)45
b(19)-16 969 y(5.3)52 b(Load-Store)12 b(Must)h(Aliases)35
b(.)25 b(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)45
b(20)-16 1035 y(5.4)52 b(Load-V)-6 b(erify)28 b(.)d(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)45
b(20)-16 1102 y(5.5)52 b(Dead)13 b(Code)f(Elimination)25
b(.)g(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)
45 b(21)-16 1168 y(5.6)52 b(Uni\002cation)47 b(.)25 b(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)45 b(21)-16 1234 y(5.7)52 b(Unrolling)39 b(.)26 b(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)
f(.)45 b(23)-91 1350 y Fp(6)50 b(D)n(AISY)12 b(Data)g(Structur)o(es)
1433 b(23)-91 1466 y(7)50 b(T)l(ranslation)11 b(Idiosyncrasies)1379
b(27)-16 1532 y Fn(7.1)52 b Fo(P)l(owerPC)14 b Fn(T)n(ranslation)f
(Idiosyncrasies)32 b(.)26 b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)45
b(27)-16 1599 y(7.2)52 b(Other)12 b(Idiosyncrasies)47
b(.)26 b(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h
(.)f(.)45 b(29)-91 1715 y Fp(8)50 b(Dumping)11 b(VLIW)i(Instructions)
1317 b(29)-91 1831 y(9)50 b(VLIW)12 b(Simulation)f(Code)1431
b(31)-91 1947 y(10)25 b(Deb)o(ugging)11 b(D)n(AISY)1543
b(35)-91 2063 y(11)25 b(P)o(ost-Pr)o(ocessing)13 b(of)f(D)n(AISY)g
(Output)1216 b(38)-91 2179 y(12)25 b(Ca)o(veats)1769
b(38)-91 2295 y(13)25 b(Building)11 b(the)h(D)n(AISY)g(Executables)1243
b(42)-91 2411 y(14)25 b(Quick)11 b(Start)g(Running)g(D)n(AISY)1324
b(42)928 2787 y Fn(2)p eop
%%Page: 3 3
3 2 bop -91 50 a Fl(List)14 b(of)h(Figur)o(es)-16 174
y Fn(1)89 b(\(1\))12 b(Usage)h(info)e(from)h(in)n(v)o(oking)f
Fk(daisy)h Fn(with)g(no)g(ar)o(guments.)28 b(.)e(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)70 b(5)-16 240
y(2)89 b(\(2\))12 b(Usage)h(info)e(from)h(in)n(v)o(oking)f
Fk(daisy)h Fn(with)g(no)g(ar)o(guments.)28 b(.)e(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)70 b(6)-16 307
y(3)89 b(Initialization,)12 b(con\002guration,)f(and)i(start)f(of)g
(translation)f(under)h Fk(daisy)p Fn(.)38 b(.)25 b(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)70 b(8)-16 373 y(4)89 b(Steady)12
b(state)h(of)f Fk(daisy)g Fn(mixing)f(e)o(x)o(ecution)i(and)f
(translation.)35 b(.)26 b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h
(.)f(.)g(.)h(.)f(.)70 b(8)-16 439 y(5)89 b(Sample)12
b(VLIW)g(T)n(ree)h(Instruction.)48 b(.)25 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)
f(.)g(.)h(.)f(.)45 b(12)-16 505 y(6)89 b(Sample)12 b(Predicated)g(Code)
g(Corresponding)g(to)g(VLIW)h(T)n(ree)f(Instruction.)20
b(.)25 b(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)45
b(15)-16 571 y(7)89 b(Example)13 b(of)f(con)n(v)o(ersion)g(from)f
Fo(P)l(owerPC)j Fn(code)f(to)f(VLIW)h(tree)f(instructions.)i(.)25
b(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)45 b(16)-16 638 y(8)89
b(Description)12 b(of)g(con)n(v)o(ersion)g(from)f Fo(P)l(owerPC)k
Fn(to)d(VLIW)-5 b(.)29 b(.)c(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)45 b(17)-16 704 y(9)89
b(Example)13 b(of)f(VLIW)g(dump)g(output)g(with)g Fk(-N)g
Fn(\003ag.)32 b(.)25 b(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)45 b(30)-16 770
y(10)64 b(Generation)12 b(of)g(Simulation)f(Code)i(for)e(a)i(VLIW)f(T)n
(ree)h(Instruction.)28 b(.)d(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)
g(.)h(.)f(.)45 b(32)-16 836 y(11)64 b(Usage)13 b(Information)d(for)i
Fk(dvstats)p Fn(.)40 b(.)25 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)
45 b(39)-16 902 y(12)64 b(Start)12 b(of)g Fk(ls.histo)f
Fn(\002le)20 b(.)25 b(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)
f(.)g(.)h(.)f(.)45 b(40)-16 969 y(13)64 b(Example)13
b(of)f Fk(daisy.stats)f Fn(\002le)h(produced)g(by)g Fk(daisy)p
Fn(.)48 b(.)25 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)
g(.)h(.)f(.)45 b(41)928 2787 y(3)p eop
%%Page: 4 4
4 3 bop -91 50 a Fl(1)59 b(Intr)o(oduction)-41 174 y
Fp(D)n(AISY)17 b Fn(\()p Fp(D)p Fn(ynamically)f Fp(A)p
Fn(rchitected)g Fp(I)p Fn(nstruction)h Fp(S)p Fn(et)f(from)g
Fp(Y)p Fn(orkto)o(wn\))f(translates)j(a)f(program)e(at)i(runtime)-91
240 y(from)10 b(one)h(instruction)g(set)h(to)f(another)f(in)i(a)f
(manner)g(transparent)g(to)g(the)g(user)m(.)16 b(In)11
b(other)f(words,)i(the)f(user)g(sees)i(only)-91 307 y(the)g(input)f
(instruction)h(set.)18 b(This)c(implementation)e(of)g
Fp(D)n(AISY)i Fn(uses)g Fo(P)l(owerPC)g Fn(as)g(the)f(input)g
(instruction)f(set)h(and)-91 373 y(a)g(ne)o(w)f(VLIW)h(architecture)f
(as)h(the)f(tar)o(get)h(instruction)e(set.)17 b(This)d(v)o(ersion)e
(also)h(works)f(on)h(a)f(page-by-page)g(basis,)-91 439
y(translating)f(all)g(code)h(it)f(can)h(\002nd)f(on)h(the)g(\002rst)f
(page)g(of)h(an)f(application)g(program,)g(then)h(simulating)f(this)h
(translated)-91 505 y(code)g(until)f(control)g(passed)i(to)f(a)g(ne)o
(w)g(page,)h(then)e(translating)h(the)g(second)g(page,)h(and)f(so)g
(on.)j(Thus,)f(if)d(some)h(code)-91 571 y(pages)h(are)f(ne)o(v)o(er)g
(e)o(x)o(ecuted,)h(the)o(y)g(are)f(ne)o(v)o(er)g(translated.)-91
638 y(Further)f(\(dated\))g(information)g(on)h Fp(D)n(AISY)h
Fn(can)g(also)f(be)h(found)e(at)i(the)f(D)n(AISY)g(website:)-41
704 y Fp(www)m(.r)o(esear)o(ch.ibm.com/daisy)-91 770
y Fn(and)g(the)h(IBM)f(VLIW)h(website:)-41 836 y Fp(www)m(.r)o(esear)o
(ch.ibm.com/vliw)-91 977 y Fl(2)59 b(Sample)15 b(Session)g(with)g(D)n
(AISY)-41 1101 y Fn(W)l(e)e(no)o(w)h(describe)f Fp(D)n(AISY)h
Fn(in)f(more)g(detail,)h(be)o(ginning)f(with)h(a)f(sample)h(session)h
(of)e(a)g(user)h(running)f Fp(D)n(AISY)p Fn(.)-91 1167
y(Section)f(2.2)g(then)h(gi)o(v)o(es)f(a)h(rough)e(o)o(v)o(ervie)o(w)i
(of)f(what)g Fp(D)n(AISY)g Fn(has)h(done)g(internally)m(.)-91
1287 y Fj(2.1)46 b(User)11 b(V)n(iew)-41 1407 y Fn(The)j
Fp(D)n(AISY)g Fn(e)o(x)o(ecutable)h(is)f(called)g Fk(daisy)p
Fn(.)20 b(A)14 b(summary)f(of)h Fk(daisy)f Fn(usage)i(and)e(its)i
(\003ags)f(can)g(be)g(obtained)-91 1474 y(by)e(typing)g
Fk(daisy)g Fn(with)g(no)g(ar)o(guments.)k(This)d(summary)e(is)i(also)g
(reproduced)e(in)i(Figures)e(1)i(and)f(2.)-41 1540 y(In)j(order)g(to)h
(use)g Fk(daisy)p Fn(,)h(the)f Fk(datasize)f Fn(limit)g(must)h(be)g(at)
g(least)h(256)e(Mbytes.)27 b(Under)16 b Fo(csh)g Fn(or)g
Fo(tcsh)p Fn(,)h(this)-91 1606 y(can)g(be)g(accomplished)g(via)g(the)g
(command)g Fk(limit)29 b(datasize)g(512000)g(kbytes)p
Fn(.)g(It)17 b(is)g(also)h(useful)f(to)-91 1672 y(ha)o(v)o(e)c(a)g(lar)
o(ge)f(amount)g(of)h(paging)f(space,)i(at)f(least)g(256)f(Mbytes,)i
(and)f(preferably)e(400)i(Mbytes.)k(The)c(amount)g(you)-91
1738 y(currently)f(ha)o(v)o(e)h(may)g(be)f(determined)h(by)f(typing)h
Fk(lsps)29 b(-a)p Fn(.)17 b(Contact)c(your)f(system)i(administrator)d
(if)i(you)f(need)-91 1805 y(to)g(increase)h(your)e(amount.)-41
1871 y(The)i(most)f(basic)h(in)n(v)o(ocation)f(of)g Fk(daisy)f
Fn(is)i(to)f(gi)o(v)o(e)h(it)f(the)g(name)h(of)f(the)g(e)o(x)o
(ecutable)h(which)f(is)h(to)f(be)h(translated)-91 1937
y(and)f(simulated.)k(F)o(or)c(e)o(xample,)h(to)f(translate)g
Fk(/bin/ls)p Fn(,)g(one)h(types)28 2057 y Fk(daisy)30
b(/bin/ls)-41 2177 y Fn(The)16 b(immediate)g(result)g(is)g(the)g(same)g
(as)h(that)f(from)f(in)n(v)o(oking)g Fk(/bin/ls)h Fn(directly)m(,)g
(i.e.)28 b(the)16 b(contents)g(of)f(the)-91 2244 y(current)d(directory)
f(are)i(displayed)g(on)f(the)h(screen,)h(albeit)e(more)g(slo)o(wly)m(.)
17 b(In)12 b(addition,)h Fk(daisy)f Fn(appends)h(a)g(v)o(ariety)-91
2310 y(of)i(statistics)g(about)g(its)h(translation)e(of)h
Fk(/bin/ls)f Fn(to)h(a)h(\002le)f(called)g Fk(daisy.stats)f
Fn(in)h(the)g(current)f(directory)m(.)-91 2376 y Fk(daisy)e
Fn(also)g(creates)h(3)f(additional)g(\002les)h(in)f(the)g(current)g
(directory:)-2 2496 y Fk(ls.vliw_perf_ins_cnts)-2 2562
y(ls.vliw_perf_ins_info)-2 2629 y(ls.vliw_spec_ins_info)928
2787 y Fn(4)p eop
%%Page: 5 5
5 4 bop -91 55 a Fi(Incorrect)24 b(#)h(of)f(Arguments:)-91
110 y(Correct)g(usage)g(is)-91 219 y(daisy)g([<flags>])g(<Executable>)g
([<Executable)g(Args>])-91 329 y(where)g(<Executable>)g(is)h(a)g(fully)
f(linked)g(and)h(executable)f(XCOFF)g(file,)h(and)-91
384 y(<Executable)f(Args>)g(are)h(the)f(normal)h(arguments,)f(if)g
(any,)h(to)g(<Executable>.)-91 438 y(The)f(<flags>)h(are)f(for)h
("daisy".)49 b(Currently)24 b(there)h(are:)-91 548 y(-A:)49
b(Dump)25 b(breakpoints)f(for)g(dbx)h(in)g(file)f("daisy.bk")-91
658 y(-B<info_dir>:)48 b(Directory)24 b(to)h(put)g(info)f(files)h(for)f
("dvstats")282 712 y(\(Give)h(full)f(path)h(if)g(<Executable>)e
(changes)i(curr)f(directory\))-91 822 y(-C:)49 b(Run)25
b(without)f(DAISY)h(translation.)-91 932 y(-E1:)f(Trace)h(all)f
(branches)124 b(in)25 b(xlated)74 b(pgm.)-91 986 y(-E2:)24
b(Trace)h(branch-and-links)e(in)i(xlated)74 b(pgm.)-91
1041 y(-E3:)24 b(Trace)h(cond)f(branches)99 b(in)25 b(xlated)74
b(pgm.)-91 1096 y(-E4:)24 b(Trace)h(all)f(branches)124
b(in)25 b(xlated)74 b(pgm)25 b(and)f(libs.)-91 1151 y(-E5:)g(Trace)h
(branch-and-links)e(in)i(xlated)74 b(pgm)25 b(and)f(libs.)-91
1205 y(-E6:)g(Trace)h(cond)f(branches)99 b(in)25 b(xlated)74
b(pgm)25 b(and)f(libs.)-91 1315 y(-F:)49 b(Unroll)25
b(loops)f(as)h(long)f(as)h(ILP)g(improves.)-91 1425 y(-G:)49
b(Perform)25 b(cache)f(simulation.)-91 1479 y(-Z:)49
b(Save)25 b(cache)f(trace)h(\(as)f(<Executable>.trace)g(in)g
(<Executable>)g(directory\).)-91 1589 y(-H<num1>:)g(If)h(DAISY)f
(compiler)g(invoked)g(<num1>)h(times,)f(clr)h(xlation)f(table.)-91
1644 y(-J<num2>:)g(If)h(DAISY)f(compiler)g(invoked)g(<num1>)h(+)g
(<num2>)158 1699 y(times,)f(finish)h(execution)f(in)g(native)h(mode.)
-91 1808 y(-I:)49 b(Do)25 b(NOT)g(dump)f(files)h(needed)f(by)h
("dvstats")-91 1863 y(-N:)49 b(Dump)25 b(VLIW)f(code)h(in)g
("daisy.vliw")-91 1973 y(-K:)49 b(Override)24 b(xlated)h(program's)f
(segv)g(handler)-91 2082 y(-L<num>:)g(Do)h(-M)f(action)h(if)f(hit)h
(<num>)g(dyn)f(crosspage)g(entry)h(pts)-91 2137 y(-M<num>:)f(If)h
(<num>)f(=)h(1)g(stop,)f(if)h(2)g(exec)f(native)h(code,)f(else)h(cont)
-91 2247 y(-P:)49 b(Support)25 b(Power)f(architecture)g(instead)g(of)h
(PowerPC)-91 2356 y(-Q<num>:)49 b(If)25 b(<num>==0,)f(use)g(real)h
(join)f(pts,)h(o.w.)f(cnt)h(only)g(when)f(pt)h(starts)158
2411 y(a)g(continuation.)48 b(W/no)25 b(-Q,)f(cnt)h(whenever)f(instruc)
g(encountered.)-91 2521 y(-R:)49 b(Use)25 b(LOAD)f(latency)h(with)f
(LOAD-VERIFY,)g(o.w.)h(available)f(immediately)-91 2630
y(-S:)49 b(Do)25 b(NOT)g(split)f(complex)g(record)h(ops:)f(op.)h(into)f
(op,cmpi)294 2792 y Fh(Figure)12 b(1.)f(\(1\))g(Usage)i(inf)o(o)e(fr)o
(om)h(in)n(v)o(oking)h Fk(daisy)e Fh(with)g(no)h(ar)o(guments.)928
2787 y Fn(5)p eop
%%Page: 6 6
6 5 bop -91 28 a Fi(Correct)24 b(daisy)g(usage)h(flags)f(\(cont\))-91
137 y(-T:)49 b(Save)25 b(xlation)f(to)h(disk)f(\(in)h(./save.daisy\))f
(for)g(possible)g(reuse\))-91 192 y(-U:)49 b(Retrieve)24
b(prev)h(xlation)f(from)h(disk)f(\(in)h(./save.daisy\))f(for)g(reuse\))
-91 301 y(-V<num>:)g(Running)g(AIX)h(version)f(<num>)h(\(Default=414\))
-91 411 y(-W:)49 b(Dump)25 b(to)g(stdout,)f(a)h(copy)f(of)h(stats)f
(appended)h(to)f("daisy.stats")-91 521 y(-X<num>:)49
b(Must)24 b(have)h(done)f("dvstats")h(on)f(previous)g(run)-41
575 y(<num>)g(=)h(0,1:)49 b(Use)25 b(prof-dir-feedback)e(w/cnts.)-41
630 y(<num>)h(=)h(2,3:)49 b(Use)25 b(prof-dir-feedback)e(w/prob.)-41
685 y(<num>)h(=)h(0,2:)49 b(Generate)24 b(code)h(for)g(0-count)f
(targets)g(only)h(if)f(executed.)-41 740 y(<num>)g(=)h(1,3:)49
b(Always)25 b(generate)f(code)g(for)h(0-count)f(targets.)-91
849 y(-Y:)g(STB)h(r3,X)g(==>)f(STB)75 b(r3,x)248 b(|)25
b(STH)g(r3,X)f(==>)h(STH)74 b(r3,x)8 904 y(LBZ)25 b(r4,X)g(==>)f(RLINM)
h(r4,r3,0,24,31)e(|)i(LHZ)g(r4,X)f(==>)h(RLINM)f(r4,r3,0,16,31)8
959 y(No)h(LD-VER)f(needed,)h(but)f(copy-prop)g(info)h(for)g(r3)f(not)h
(go)g(to)f(r4)-91 1069 y(Summary)g(statistics)g(are)h(displayed)f(to)g
("stdout")h(and)f(are)-91 1123 y(appended)g(to)h(the)f(file)h
("daisy.stats".)48 b(Cache)25 b(simulation)-91 1178 y(results)f(are)h
(placed)f(in)h(the)f(file)h("cache.out",)f(while)g(the)-91
1233 y(cache)g(configuration)g(is)h(read)f(from)h(the)f(file)h
("cache.config")-91 1288 y(in)g(the)f(current)g(directory)g(or)h(from)g
(the)f(directory)g(specified)g(by)-91 1343 y(the)g(CACHE_CONFIG)g
(environment)g(variable.)-91 1452 y(Additional)g(configuration)f
(parameters)h(are)h(read)g(from)f(the)-91 1507 y(file)g
("daisy.config",)g(if)h(it)f(exists.)49 b(For)25 b(example)f
("num_alus")-91 1562 y(specifies)g(the)g(number)h(of)g(ALUS.)49
b(The)25 b(format)f(of)h("daisy.config")-91 1617 y(is)g(one)f(quantity)
g(\(e.g.)h("num_alus"\))f(per)g(line)h(followed)f(by)-91
1671 y(whitespace)g(and)g(the)h(numerical)f(value,)g(e.g.)h(16.)50
b(Blank)24 b(lines)-91 1726 y(are)g(ignored)h(and)f(#)h(is)g(a)g
(comment)f(prefix)g(for)h(the)g(line.)49 b(If)-91 1781
y("daisy.config")23 b(exists)i(in)f(the)h(current)f(directory,)g(it)h
(is)g(used,)-91 1836 y(otherwise)f(if)h("daisy.config")e(exists)i(in)f
(the)h(directory)f(specified)-91 1891 y(by)h(the)f(environment)g
(variable)g(DAISY_CONFIG,)g(it)h(is)f(used.)50 b(Defaults)-91
1945 y(are)24 b(used)h(and)g(a)f(warning)h(issued)f(if)h(neither)f(is)h
(present.)-91 2055 y(The)f(-L)h(and)g(-M)f(can)h(be)g(very)f(useful)h
(as)f(debugging)h(aids.)-91 2110 y("daisy")f(can)h(be)f(run)h(several)f
(times)h(with)f(the)h(target)f(program)-91 2165 y(using)g(binary)h
(search)f(to)h(assign)f(values)g(to)h(-L<num>.)49 b(For)25
b(example)f(use)-91 2219 y(-L1000)g(-M2)h(to)f(see)h(if)g(the)f(DAISY)h
(translated)f(program)g(crashes)g(in)h(the)g(first)-91
2274 y(1000)f(page)h(crossings.)49 b(If)24 b(it)h(does,)g(then)f(try)h
(-L500)f(-M2)h(in)g(binary)f(search)-91 2329 y(fashion.)49
b(Continue)24 b(this)h(until)f(the)h(precise)f(page)g(causing)h(the)f
(crash)h(is)-91 2384 y(located.)49 b(Assume)24 b(the)h(last)f(value)h
(for)f(which)h(the)g(program)f(runs)g(correctly)-91 2438
y(is)h(-L319.)49 b(Then)24 b(do)h(an)g(additional)f(run)g(with)h(-L319)
f(-M1)h(to)g(determine)f(the)-91 2493 y(PowerPC)g(address)g(of)h(the)g
(page)f(entry)h(causing)f(the)h(problem.)-91 2603 y(NOTE:)49
b(The)25 b(-H)f(and)h(-J)g(flags)f(used)h(to)g(be)f(used)h(for)f
(similar)h(purposes,)f(but)83 2658 y(use)h(of)f(-L)h(and)g(-M)g(is)f
(much)h(preferred.)294 2819 y Fh(Figure)12 b(2.)f(\(2\))g(Usage)i(inf)o
(o)e(fr)o(om)h(in)n(v)o(oking)h Fk(daisy)e Fh(with)g(no)h(ar)o
(guments.)928 2787 y Fn(6)p eop
%%Page: 7 7
7 6 bop -41 50 a Fn(These)17 b(binary)f(\002les)g(are)h(used)f(to)h
(create)f(a)h(myriad)e(of)h(statistics)h(using)g(a)f(post-pass)h(tool)f
(called)h Fk(dvstats)p Fn(.)-91 116 y Fk(dvstats)11 b
Fn(takes)g(as)h(ar)o(guments)g(the)f(base)h(name)g(of)f(the)h
(translated)f(program,)g(as)h(well)g(as)g(the)g(directory)e(in)i(which)
-91 182 y(the)g(3)g(\002les)h(abo)o(v)o(e)g(may)f(be)h(found.)i(F)o(or)
d(e)o(xample,)-2 302 y Fk(dvstats)30 b(ls)f(.)-91 423
y Fn(The)20 b(\002nal)f(\223.)m(\224)37 b(speci\002es)21
b(that)e(dvstats)h(should)g(look)f(in)g(the)h(current)f(directory)f
(for)h(the)g(3)h(\002les)g(listed)f(abo)o(v)o(e.)-91
489 y(Running)13 b Fk(dvstats)g Fn(produces)h(se)o(v)o(eral)g(more)f
(\002les,)i(all)e(with)h(the)f(pre\002x)g Fk(ls.)p Fn(.)20
b(Probably)13 b(the)g(most)h(interesting)-91 555 y(is)j
Fk(ls.histo)e Fn(which)i(has)g(the)f(in\002nite)g(cache)h(ILP)g
(attained)f(by)h(the)f(translated)g(code.)29 b(In\002nite)16
b(cache)h(ILP)f(is)-91 621 y(measured)c(simply)g(as)g(the)h(ratio)e(of)
h Fo(P)l(owerPC)i Fn(instructions)d(used)i(to)f(e)o(x)o(ecute)h(the)f
(original)f(program)g(\()p Fk(/bin/ls)p Fn(\))-91 687
y(to)17 b(the)g(number)f(of)g(VLIW)i(instructions)e(used)h(to)g(e)o(x)o
(ecute)h(the)f(original)f(program.)29 b(The)17 b Fk(ls.histo)f
Fn(\002le)h(also)-91 754 y(reports)f(ho)o(w)h(man)o(y)g(and)g(what)g
(type)f(of)h(operations)g(were)f(packed)h(into)g(each)g(VLIW)g
(instruction.)29 b(Other)16 b(\002les)-91 820 y(report)f(opcode)h
(frequencies)f(and)h(critical)g(paths)g(through)f(the)h(code,)h(along)f
(with)f(the)h(ILP)g(attained)g(on)g(each)g(of)-91 886
y(those)c(paths.)k(These)e(matters)e(are)g(discussed)i(in)e(more)g
(detail)g(in)g(Section)g(11.)-41 952 y(One)g(other)f(\002le)h(is)h(of)e
(signi\002cant)h(interest)g(here.)k(If)11 b(the)h Fk(-N)g
Fn(\003ag)g(is)h(gi)o(v)o(en)e(with)h Fk(daisy)p Fn(,)g(a)h(dump)e(of)h
(the)g(VLIW)-91 1018 y(code)k(is)g(produced)g(in)g(a)g(\002le)g(called)
g Fk(daisy.vliw)p Fn(.)26 b(This)17 b(\002le)f(can)g(be)h(more)e(than)h
(a)g(me)o(gabyte)g(in)g(size,)i(e)o(v)o(en)-91 1085 y(for)11
b(a)h(program)f(like)h Fk(/bin/ls)f Fn(because)i(shared)f(library)f
(code)h(\(e.g.)k Fp(printf)11 b Fn(and)h Fp(malloc)p
Fn(\))g(is)g(translated)g(too,)g(and)-91 1151 y(because)f(there)f(is)h
(a)f(signi\002cant)g(e)o(xplosion)h(in)f(code)h(size)g(\226)f
(typically)g(a)h(factor)e(of)h(4,)h(b)o(ut)f(v)o(arying)g(widely)m(.)k
(Note)d(too)-91 1217 y(that)i(an)o(y)g(pre)o(vious)g
Fk(daisy.vliw)f Fn(\002le)g(in)h(the)g(current)g(directory)f(is)h
(destroyed)f(when)h(the)h Fk(-N)e Fn(\003ag)h(is)h(speci\002ed.)-91
1283 y(Section)e(8)g(gi)o(v)o(es)h(a)f(description)g(of)g(the)g(syntax)
h(of)f(the)g(VLIW)h(instructions)f(in)g Fk(daisy.vliw)-91
1403 y Fj(2.2)46 b(Inter)o(nal)12 b(V)n(iew)-41 1524
y Fn(Figures)d(3)i(and)f(4)g(depict)g(high)g(le)o(v)o(el)h(call-graphs)
e(of)h(what)g Fk(daisy)g Fn(does)h(internally)e(as)i(it)f(translates)h
Fk(/bin/ls)p Fn(.)-91 1590 y(Figure)j(3)g(depicts)h(ho)o(w)f
Fk(daisy)g Fn(initializes)h(and)f(con\002gures)g(itself,)i(then)e(be)o
(gins)h(translating.)22 b(Figure)14 b(4)g(depicts)-91
1656 y Fk(daisy)k Fn(in)h(the)f(steady-state)h(when)g(it)g(is)g(mixing)
f(translation)g(and)h(e)o(x)o(ecution)g(of)f Fk(/bin/ls)p
Fn(.)34 b(Note)19 b(that)f(the)-91 1722 y(shaded)c(portion)e(of)h
(Figures)g(3)g(and)h(4)f(is)h(common)e(and)i(corresponds)f(to)g(the)h
(actual)f(work)f(of)h(translation.)18 b(Belo)o(w)-91
1789 y(is)12 b(a)h(fuller)e(description)h(of)g(the)g(internal)g
(processing)h(depicted)f(in)g(Figures)g(3)g(and)h(4.)-19
1909 y Fm(\017)25 b Fn(The)13 b Fp(main\(\))f Fn(function)g(is)i(in)f
Fk(main.c)f Fn(\(Actually)g Fp(main2\(\))g Fn(is)h(in)g
Fk(main.c)p Fn(.)k Fp(main\(\))12 b Fn(is)i(in)e Fk(r13)p
1777 1909 15 2 v 18 w(base.s)31 1975 y Fn(so)f(as)h(to)g(properly)e
(setup)i(the)f(stack)h(for)e(the)i(translated)f(program,)g(e.g.)16
b Fk(/bin/ls)p Fn(.)f(The)c(v)o(alue)h(of)f(the)g(stack)31
2041 y(to)h(use)h(for)e(the)i(translated)f(program)f(is)i(the)f
Fk(sp)p 874 2041 V 18 w(val)g Fn(parameter)f(passed)j(to)e
Fp(main2\(\))f Fn(by)i Fp(main\(\))p Fn(.\))-19 2149
y Fm(\017)25 b Fp(main2\(\))p Fn(,)12 b(\002rst)g(checks)h(for)e(an)o
(y)i(\003ags)f(such)h(as)g Fk(-N)f Fn(via)h(a)f(call)h(to)f
Fp(handle)p 1342 2149 V 17 w(\003ags\(\))f Fn(in)h Fk(flags.c)p
Fn(.)-19 2257 y Fm(\017)25 b Fp(main2\(\))13 b Fn(then)g(opens)h(the)g
(\002le)g(to)f(be)h(translated)g(\(e.g)g Fk(/bin/ls)p
Fn(\))e(and)i(reads)g(the)g(header)g(in)f(order)g(to)h(\002nd)31
2323 y(the)f(number)g(of)h(instructions)f(in)h(the)f(te)o(xt)h
(section.)20 b(\(This)14 b(is)g(mainly)g(used)g(for)f(informational)f
(purposes)i(to)31 2389 y(kno)o(w)e(what)g(fraction)f(of)h(the)h(e)o(x)o
(ecution)f(time)g(was)h(spent)f(in)g(shared)h(libraries.\))-19
2497 y Fm(\017)25 b Fp(main2\(\))19 b Fn(then)g(loads)h(the)g(tar)o
(get)f(program)g(into)g(memory)g(via)h(a)g(call)g(to)g
Fp(load)p 1501 2497 V 17 w(pr)o(og)p 1617 2497 V 18 w(to)p
1677 2497 V 17 w(exec\(\))p Fn(,)i(which)31 2563 y(in)d(turn)f(in)n(v)o
(okes)h(the)g(AIX)g(function)g Fp(load\(\))p Fn(,)h(which)f(reads)g
(the)g(tar)o(get)g(XCOFF)g(\002le)g(and)g(performs)f(all)31
2629 y(necessary)13 b(relocation.)928 2787 y(7)p eop
%%Page: 8 8
8 7 bop 113 1112 a @beginspecial 0 @llx 0 @lly 400 @urx
234 @ury 4000 @rwi @setspecial
%%BeginDocument: fig/daisy_cg1.eps
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {} def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-215.0 514.0 translate
1 -1 scale

/clp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/l {lineto} bind def
/m {moveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
 0.06000 0.06000 sc
7.500 slw
% Polyline
n 3705 6300 m 3600 6300 3600 8445 105 arcto 4 {pop} repeat 3600 8550 8895 8550 105 arcto 4 {pop} repeat 9000 8550 9000 6405 105 arcto 4 {pop} repeat 9000 6300 3705 6300 105 arcto 4 {pop} repeat clp gs col7 0.75 shd ef gr  gs col-1 s gr 
% Polyline
n 3600 4950 m 4125 4950 l  gs col-1 s gr 
n 4005.00 4920.00 m 4125.00 4950.00 l 4005.00 4980.00 l  4005.50 4950.50 l 4005.00 4920.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 3600 5175 m 4125 5175 l  gs col-1 s gr 
n 4005.00 5145.00 m 4125.00 5175.00 l 4005.00 5205.00 l  4005.50 5175.50 l 4005.00 5145.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 3600 5625 m 4125 5625 l  gs col-1 s gr 
n 4005.00 5595.00 m 4125.00 5625.00 l 4005.00 5655.00 l  4005.50 5625.50 l 4005.00 5595.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 4200 5400 m 4725 5400 l  gs col-1 s gr 
n 4605.00 5370.00 m 4725.00 5400.00 l 4605.00 5430.00 l  4605.50 5400.50 l 4605.00 5370.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
/Times-Bold findfont 165.00 scalefont setfont
4201 6001 m
gs 1 -1 sc (setup_regs\(\)) col-1 show gr
% Polyline
n 3676 6376 m 4201 6376 l  gs col-1 s gr 
n 4081.00 6346.00 m 4201.00 6376.00 l 4081.00 6406.00 l  4081.50 6376.50 l 4081.00 6346.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 4276 6601 m 4801 6601 l  gs col-1 s gr 
n 4681.00 6571.00 m 4801.00 6601.00 l 4681.00 6631.00 l  4681.50 6601.50 l 4681.00 6571.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 4276 6826 m 4801 6826 l  gs col-1 s gr 
n 4681.00 6796.00 m 4801.00 6826.00 l 4681.00 6856.00 l  4681.50 6826.50 l 4681.00 6796.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 4276 7051 m 4801 7051 l  gs col-1 s gr 
n 4681.00 7021.00 m 4801.00 7051.00 l 4681.00 7081.00 l  4681.50 7051.50 l 4681.00 7021.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 4876 7501 m 5401 7501 l  gs col-1 s gr 
n 5281.00 7471.00 m 5401.00 7501.00 l 5281.00 7531.00 l  5281.50 7501.50 l 5281.00 7471.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 4876 7726 m 5401 7726 l  gs col-1 s gr 
n 5281.00 7696.00 m 5401.00 7726.00 l 5281.00 7756.00 l  5281.50 7726.50 l 5281.00 7696.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 4276 7951 m 4801 7951 l  gs col-1 s gr 
n 4681.00 7921.00 m 4801.00 7951.00 l 4681.00 7981.00 l  4681.50 7951.50 l 4681.00 7921.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 4276 8176 m 4801 8176 l  gs col-1 s gr 
n 4681.00 8146.00 m 4801.00 8176.00 l 4681.00 8206.00 l  4681.50 8176.50 l 4681.00 8146.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 4276 8401 m 4801 8401 l  gs col-1 s gr 
n 4681.00 8371.00 m 4801.00 8401.00 l 4681.00 8431.00 l  4681.50 8401.50 l 4681.00 8371.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 4276 7276 m 4801 7276 l  gs col-1 s gr 
n 4681.00 7246.00 m 4801.00 7276.00 l 4681.00 7306.00 l  4681.50 7276.50 l 4681.00 7246.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
/Times-Bold findfont 165.00 scalefont setfont
4200 5025 m
gs 1 -1 sc (handle_flags\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4200 5250 m
gs 1 -1 sc (load_prog_to_exec\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4800 5475 m
gs 1 -1 sc (load\(\)) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 8475 m
gs 1 -1 sc (main.c/hash.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 8250 m
gs 1 -1 sc (main.c/simul.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 8025 m
gs 1 -1 sc (vliw_dump.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 7800 m
gs 1 -1 sc (vliw.c) col-1 show gr
% Polyline
n 3601 5926 m 4126 5926 l  gs col-1 s gr 
n 4006.00 5896.00 m 4126.00 5926.00 l 4006.00 5956.00 l  4006.50 5926.50 l 4006.00 5896.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 7575 m
gs 1 -1 sc (vliw.c) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4875 7350 m
gs 1 -1 sc (xlate_opcode_p2v\(\)) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 7350 m
gs 1 -1 sc (main.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 7125 m
gs 1 -1 sc (dis.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 6900 m
gs 1 -1 sc (dis.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 6675 m
gs 1 -1 sc (contin.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 6450 m
gs 1 -1 sc (main.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 6225 m
gs 1 -1 sc (main.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 6000 m
gs 1 -1 sc (main.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 5475 m
gs 1 -1 sc (shared lib) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 5025 m
gs 1 -1 sc (flags.c) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
3600 4800 m
gs 1 -1 sc (main2 \(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4200 5700 m
gs 1 -1 sc (init_everything\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4875 6675 m
gs 1 -1 sc (get_highest_prio_cont\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
5475 7575 m
gs 1 -1 sc (get_earliest_time\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4876 8476 m
gs 1 -1 sc (add_page_hash_entries\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4276 6451 m
gs 1 -1 sc (xlate_entry\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4876 6901 m
gs 1 -1 sc (get_opcode\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
5476 7801 m
gs 1 -1 sc (insert_op\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4876 8026 m
gs 1 -1 sc (do_vliw_dump\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4876 7126 m
gs 1 -1 sc (set_operands\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4876 8251 m
gs 1 -1 sc (vliw_to_ppc_simcode\(\)) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 4800 m
gs 1 -1 sc (main.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 5250 m
gs 1 -1 sc (main.c) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
7650 5700 m
gs 1 -1 sc (dis.c) col-1 show gr
$F2psEnd
restore
%%EndDocument
 @endspecial 197 1273 a Fh(Figure)13 b(3.)e(Initialization,)e
(con\002guration,)k(and)f(star)q(t)g(of)f(translation)h(under)h
Fk(daisy)p Fh(.)280 2355 y @beginspecial 0 @llx 0 @lly
320 @urx 182 @ury 3200 @rwi @setspecial
%%BeginDocument: fig/daisy_cg2.eps
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {} def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-242.0 598.0 translate
1 -1 scale

/clp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/l {lineto} bind def
/m {moveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
 0.06000 0.06000 sc
/Helvetica-Narrow-Oblique findfont 165.00 scalefont setfont
8551 8335 m
gs 1 -1 sc (Done only) col-1 show gr
/Helvetica-Narrow-Oblique findfont 165.00 scalefont setfont
8551 8569 m
gs 1 -1 sc (if not have) col-1 show gr
/Helvetica-Narrow-Oblique findfont 165.00 scalefont setfont
8551 8101 m
gs 1 -1 sc (Optional:) col-1 show gr
/Helvetica-Narrow-Oblique findfont 165.00 scalefont setfont
8551 8803 m
gs 1 -1 sc (translation) col-1 show gr
7.500 slw
% Polyline
n 4155 7800 m 4050 7800 4050 9270 105 arcto 4 {pop} repeat 4050 9375 8295 9375 105 arcto 4 {pop} repeat 8400 9375 8400 7905 105 arcto 4 {pop} repeat 8400 7800 4155 7800 105 arcto 4 {pop} repeat clp gs col7 0.75 shd ef gr  gs col-1 s gr 
/Helvetica-Narrow-Oblique findfont 165.00 scalefont setfont
8551 9037 m
gs 1 -1 sc (of desired) col-1 show gr
/Helvetica-Narrow-Oblique findfont 165.00 scalefont setfont
8551 9226 m
gs 1 -1 sc (address.) col-1 show gr
/Times-BoldItalic findfont 165.00 scalefont setfont
4200 7500 m
gs 1 -1 sc (Done with current translated group.) col-1 show gr
/Times-BoldItalic findfont 165.00 scalefont setfont
4200 8025 m
gs 1 -1 sc (Otherwise jump to address of xlate_entry_raw\(\).) col-1 show gr
/Times-BoldItalic findfont 165.00 scalefont setfont
4200 7725 m
gs 1 -1 sc (Jump to address of successor translated group, if it exists.) col-1 show gr
/Helvetica-Bold findfont 210.00 scalefont setfont
4200 7200 m
gs 1 -1 sc (EXECUTION OF TRANSLATED PROGRAM) col-1 show gr
/Times-BoldItalic findfont 165.00 scalefont setfont
4200 9300 m
gs 1 -1 sc (Jump to address of  group jus translated by xlate_entry\(\).) col-1 show gr
/Helvetica-Bold findfont 210.00 scalefont setfont
4200 9900 m
gs 1 -1 sc (EXECUTION OF TRANSLATED PROGRAM) col-1 show gr
% Polyline
n 4202 8927 m 4727 8927 l  gs col-1 s gr 
n 4607.00 8897.00 m 4727.00 8927.00 l 4607.00 8957.00 l  4607.50 8927.50 l 4607.00 8897.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
/Times-Bold findfont 165.00 scalefont setfont
4801 8776 m
gs 1 -1 sc (. . .\(\)) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
6301 8551 m
gs 1 -1 sc (main.c) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4802 8327 m
gs 1 -1 sc (xlate_entry_raw\(\)) col-1 show gr
/Times-Bold findfont 165.00 scalefont setfont
4802 9002 m
gs 1 -1 sc (xlate_entry_raw) col-1 show gr
% Polyline
n 4202 8252 m 4727 8252 l  gs col-1 s gr 
n 4607.00 8222.00 m 4727.00 8252.00 l 4607.00 8282.00 l  4607.50 8252.50 l 4607.00 8222.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
6301 9001 m
gs 1 -1 sc (r13_base.s) col-1 show gr
/Courier-BoldOblique findfont 165.00 scalefont setfont
6300 8325 m
gs 1 -1 sc (r13_base.s) col-1 show gr
% Polyline
n 4201 8701 m 4726 8701 l  gs col-1 s gr 
n 4606.00 8671.00 m 4726.00 8701.00 l 4606.00 8731.00 l  4606.50 8701.50 l 4606.00 8671.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
% Polyline
n 4201 8476 m 4726 8476 l  gs col-1 s gr 
n 4606.00 8446.00 m 4726.00 8476.00 l 4606.00 8506.00 l  4606.50 8476.50 l 4606.00 8446.00 l clp gs col7 1.00 shd ef gr gs col-1 s gr
/Times-Bold findfont 165.00 scalefont setfont
4802 8552 m
gs 1 -1 sc (xlate_entry\(\)) col-1 show gr
$F2psEnd
restore
%%EndDocument
 @endspecial 285 2517 a(Figure)f(4.)f(Stead)o(y)h(state)g(of)g
Fk(daisy)f Fh(mixing)g(e)o(xecution)h(and)h(translation.)928
2787 y Fn(8)p eop
%%Page: 9 9
9 8 bop -19 50 a Fm(\017)25 b Fp(main2\(\))10 b Fn(then)g(does)i(a)f(v)
o(ariety)f(of)g(initializations)h(via)f(the)h(call)g(to)g
Fk(init)p 1322 50 15 2 v 17 w(everything\(\))p Fn(.)j(One)d(of)g(these)
31 116 y(initializations)g(is)i(to)e(call)i Fk(vliw)p
618 116 V 17 w(init\(\))f Fn(in)g Fk(vliw.c)p Fn(.)j
Fk(vliw)p 1205 116 V 17 w(init\(\))d Fn(in)g(turn)f(reads)h(additional)
g(con-)31 182 y(\002guration)d(information)f(such)j(as)f(the)g(number)g
(of)g(re)o(gisters)g(and)g(function)f(units)h(via)g(a)h(call)f(to)g
Fp(r)o(ead)p 1796 182 V 18 w(con\002g\(\))31 248 y Fn(in)h
Fk(rd)p 144 248 V 18 w(config.c)p Fn(,)h(which)f(in)h(turn)f(reads)h
(this)g(information)e(from)g(the)i(\002le)g Fk(daisy.config)p
Fn(.)i(If)d(the)h(en-)31 315 y(vironment)17 b(v)o(ariable,)j
Fo(D)n(AISY)p 583 315 V 18 w(CONFIG)e Fn(is)h(set,)i
Fp(r)o(ead)p 1040 315 V 18 w(con\002g\(\))c Fn(assumes)i(it)g
(speci\002es)g(the)f(directory)g(in)31 381 y(which)c(to)h(look)f(for)g
Fk(daisy.config)p Fn(.)22 b(If)14 b Fo(D)n(AISY)p 976
381 V 18 w(CONFIG)h Fn(is)g(not)f(set,)j(then)d Fp(r)o(ead)p
1600 381 V 18 w(con\002g\(\))f Fn(looks)i(for)31 447
y Fk(daisy.config)c Fn(in)h(the)h(current)f(directory)m(.)j(If)c
Fk(daisy.config)h Fn(does)h(not)f(e)o(xist,)h Fp(r)o(ead)p
1700 447 V 18 w(con\002g\(\))e Fn(pro-)31 513 y(vides)h(a)h(default)e
(con\002guration.)-19 621 y Fm(\017)25 b Fn(Note)15 b(that)g
Fp(D)n(AISY)h Fn(has)g(its)g(o)o(wn)f(v)o(ersion)g(of)g
Fp(malloc\(\))p Fn(.)25 b(If)15 b Fp(D)n(AISY)h Fn(in)n(v)o(okes)f
Fp(malloc\(\))p Fn(,)h(it)f(perturbs)g(ho)o(w)31 687
y(the)d(translated)g(program)f(runs.)-19 795 y Fm(\017)25
b Fp(main2\(\))16 b Fn(then)h(does)g(v)o(arious)f(initializations)h
(dealing)f(with)h(pro\002le-directed)e(feedback)i(and)g(tracing)f(the)
31 861 y(branches)c(in)g(the)h(original)e Fo(P)l(owerPC)j
Fn(program)e(\(e.g.)k Fk(/bin/ls)p Fn(\).)-19 969 y Fm(\017)25
b Fn(Ne)o(xt)13 b Fp(main2\(\))f Fn(makes)h(sure)g(that)g(the)g(VLIW)g
(re)o(gisters)g(match)g(the)g Fo(P)l(owerPC)i Fn(re)o(gisters)e(at)g
(the)g(start)g(of)f(the)31 1035 y(program,)f(e.g.)16
b(VLIW)11 b Fk(r3)h Fn(and)f Fo(P)l(owerPC)j Fk(r3)d
Fn(both)g(contain)h Fp(argc)p Fn(.)j(The)d(call)f(to)h
Fp(setup)p 1600 1035 V 17 w(r)o(egs\(\))g Fn(which)f(does)31
1101 y(this,)k(also)f(sets)h(up)f(se)o(v)o(eral)g(other)g(v)o(alues)g
(for)f(use)i(during)e(simulation.)21 b(Section)13 b(8)h(discusses)i
(this)e(in)g(more)31 1168 y(detail.)-19 1275 y Fm(\017)25
b Fn(In)19 b(order)g(to)h(run)g(correctly)m(,)h(the)f(translator)f(and)
h(the)g(translated/simulated)f(program)g(must)h(use)g(dif)o(fer)o(-)31
1341 y(ent)d(stack)h(pointers.)31 b(Thus)19 b Fp(main2\(\))d
Fn(sets)j(up)e(the)h(simulator)f(\(and)g(hence)h(the)f(translated)h
(program)e(\(e.g)31 1408 y Fk(/bin/ls)p Fn(\)\))d(to)i(use)g(the)g
(translator')m(s)f(stack)h(pointer)g(\()p Fk(sp)p 1089
1408 V 17 w(val)p Fn(\).)22 b(When)15 b(the)g(translator)f(is)h(re-in)n
(v)o(oked)f(to)31 1474 y(translate)e(subsequent)h(pages)g(it)f(will)g
(use)h(its)g(o)o(wn)f(stack)h(pointer)f(pointing)g(to)g(a)h(statically)
f(allocated)g(stack.)31 1540 y(This)g(is)f(done)g(because)h(we)g(kno)o
(w)f(that)g(the)g(translator)g(can)g(make)g(do)g(with)g(a)g(small)h
(\002x)o(ed)f(stack)h(size,)g(b)o(ut)f(we)31 1606 y(do)h(not)g(kno)o(w)
g(if)g(this)g(is)h(true)f(of)g(the)g(translated)g(program.)-19
1714 y Fm(\017)25 b Fp(main2\(\))9 b Fn(then)h(sets)h(up)f(a)g(couple)g
(of)g(additional)g(v)o(alues)g(for)f(use)i(by)f(the)g(simulator)f(in)h
Fp(r13)p 1619 1714 V 18 w(ar)o(ea)h Fn(and)f(in)n(v)o(okes)31
1780 y Fp(xlate)p 137 1780 V 17 w(entry\(\))p Fn(.)-19
1888 y Fm(\017)25 b Fn(As)14 b(depicted)g(in)g(Figure)g(4,)h
Fp(xlate)p 639 1888 V 17 w(entry\(\))e Fn(is)i(the)f(main)g(entry)f
(point)h(of)g(the)g(translator)n(,)g(and)h(takes)f(one)g(ar)o(-)31
1954 y(gument,)j(the)f(address)h(from)e(which)h(it)g(is)h(to)f
(translate.)27 b(Subsequently)16 b(when)g(a)g(page)h(needs)g
(translation,)31 2020 y(the)d(simulator)f(branches)h(to)f
Fp(xlate)p 657 2020 V 18 w(entry)p 789 2020 V 17 w(raw\(\))p
Fn(,)h(in)g Fk(r13)p 1092 2020 V 17 w(base.s)p Fn(.)20
b Fp(xlate)p 1424 2020 V 17 w(entry)p 1555 2020 V 18
w(raw\(\))13 b Fn(\(1\))g(sa)o(v)o(es)i(re)o(g-)31 2087
y(isters)e(li)o(v)o(e)f(during)g(the)h(e)o(x)o(ecution)g(of)f
(simulated)h(VLIW)g(code,)g(\(2\))f(sets)i(up)f(re)o(gisters)f(and)h
(the)g(stack)g(frame)31 2153 y(for)h(use)i(by)f(normal)f(C)i(code)f
(such)h(as)g(the)f Fp(xlate)p 911 2153 V 17 w(entry\(\))f
Fn(function,)i(and)f(\(3\))f(calls)i Fp(xlate)p 1655
2153 V 17 w(entry\(\))p Fn(.)23 b(When)31 2219 y Fp(xlate)p
137 2219 V 17 w(entry\(\))16 b Fn(returns,)h(it)g(passes)h(in)f(re)o
(gister)f Fk(r3)h Fn(the)g(address)g(of)g(the)f(simulation)h(code)g
(for)f(the)g(VLIW)31 2285 y(code)e(just)g(generated.)21
b Fp(xlate)p 558 2285 V 17 w(entry)p 689 2285 V 18 w(raw\(\))13
b Fn(then)h(restore)g(re)o(gisters)g(used)g(during)g(e)o(x)o(euction)g
(of)g(simulated)31 2351 y(VLIW)e(code)h(and)f(then)g(branches)h(to)f
(the)g(address)h(passed)g(in)g(re)o(gister)f Fk(r3)p
Fn(.)-19 2459 y Fm(\017)25 b Fp(xlate)p 137 2459 V 17
w(entry\(\))14 b Fn(does)h(some)g(initialization)f(of)h(its)g(o)o(wn,)g
(then)g(enters)g(a)g(doubly)g(nested)g Fk(while)g Fn(loop.)23
b(The)31 2525 y(outer)16 b Fk(while)g Fn(loop)g(checks)i(via)e(a)h
(call)g(to)g Fp(get)p 902 2525 V 17 w(highest)p 1072
2525 V 17 w(prio)p 1178 2525 V 18 w(cont\(\))e Fn(in)i
Fk(contin.c)p Fn(,)g(if)f(there)h(are)f(an)o(y)31 2592
y(open)f(paths)g(on)g(the)g(page)g(that)g(remain)g(to)g(be)g
(translated.)24 b(Initially)14 b(there)g(is)i(one)f(such)g(open)g(path)
g(\227)g(the)31 2658 y(entry)i(point)g(to)h(the)f(page.)32
b(T)n(ranslation)18 b(on)g(a)g(path)f(stops)h(whene)o(v)o(er)g(a)g
(branch)f(is)h(encountered.)31 b(If)17 b(the)928 2787
y(9)p eop
%%Page: 10 10
10 9 bop 31 50 a Fn(branch)13 b(is)g(conditional,)h(two)e(ne)o(w)i
(path)f(continuations)g(\227)g(the)g(tar)o(get)g(and)h(the)f
(fall-through)e(\227)i(are)g(added)31 116 y(to)g(the)h(open)g(path)f
(list)h(\(assuming)f(that)h(both)f(are)h(on)g(the)f(current)g(page\).)
20 b(Additions)13 b(to)h(the)f(open)h(path)f(list)31
182 y(are)f(made)g(via)g(calls)h(to)f Fp(add)p 536 182
15 2 v 17 w(to)p 595 182 V 17 w(xlate)p 715 182 V 18
w(list\(\))p Fn(.)i(Unconditional)e(branches)g(of)g(course)g(place)g
(only)g(their)g(tar)o(get)31 248 y(in)g(the)g(path)g(list)327
230 y Fg(1)346 248 y Fn(.)-19 356 y Fm(\017)25 b Fn(Once)17
b(a)f(path)h(continuation)f(is)h(found,)g(se)o(v)o(eral)g(checks)g(are)
g(made)f(as)i(to)e(whether)g Fo(P)l(owerPC)j Fn(operations)31
422 y(from)12 b(this)g(path)h(should)g(be)g(scheduled)g(into)g(earlier)
f(VLIW)h(instructions)f(\227)h(thus)g(increasing)f(parallelism,)31
489 y(or)f(if)g(a)h(ne)o(w)f(scheduling)h(re)o(gion)f(should)h(be)o
(gin)f(at)h(the)f(current)g(operation)g(\227)h(thus)f(decreasing)h
(code)g(e)o(xplo-)31 555 y(sion.)-19 663 y Fm(\017)25
b Fn(In)12 b(either)g(case,)i(scheduling)e(of)h Fo(P)l(owerPC)h
Fn(operations)e(from)g(the)g(current)g(path)g(is)h(done)g(in)f(the)h
(inner)f Fp(while)31 729 y(\(TR)o(UE\))f Fn(loop.)-19
836 y Fm(\017)25 b Fn(A)12 b(call)h(to)f Fp(get)p 282
836 V 17 w(opcode\(\))f Fn(partially)h(parses)h(the)f
Fo(P)l(owerPC)i Fn(operation.)-19 944 y Fm(\017)25 b
Fn(Then)10 b(se)o(v)o(eral)f(special)h(types)g(of)f Fo(P)l(owerPC)i
Fn(operation)e(are)g(checked)h(for)e(\227)i Fo(ille)n(gal)e(ops,)j
(load/stor)n(e)f(multiple)31 1010 y(ops,)j Fn(and)f Fo(load/stor)n(e)h
(update)f(ops.)-19 1118 y Fm(\017)25 b Fn(Scheduling)18
b(on)g(this)h(path)f(stops)i(if)e(there)g(is)h(an)g Fo(ille)n(gal)f
(op.)34 b Fn(If)18 b(e)o(x)o(ecution)h(comes)g(here,)i(something)d(is)
31 1184 y(probably)e(wrong)g(with)h(the)g(original)f(program.)29
b(If)17 b(this)g(path)g(is)g(actually)g(e)o(x)o(ecuted,)i(the)e
(simulator)g(will)31 1251 y(print)11 b(a)i(message)g(that)f(an)h
Fo(ille)n(gal)f(op)g Fn(was)g(encountered)g(and)g(terminate)g(the)g
(run.)-19 1358 y Fm(\017)25 b Fo(Load/stor)n(e)18 b(multiple)f
Fn(and)h Fo(load/stor)n(e)g(update)g Fn(operations)g(are)g(split)f
(into)h(simpler)f(primiti)o(v)o(es)h(and)g(then)31 1424
y(scheduled)13 b(like)g(an)o(y)h(other)f(operation.)18
b(There)c(is)g(one)f(ca)o(v)o(eat)h(to)f(this.)19 b Fk(lwsx)p
Fn(,)14 b Fk(stwsx)p Fn(,)g(\(and)f Fk(lscbx)p Fn(\))f(are)31
1491 y(not)g(split.)18 b(Instead)12 b Fp(D)n(AISY)i Fn(acts)f(as)g(if)g
(these)g(were)g(VLIW)g(primiti)o(v)o(e)e(operations.)17
b Fo(This)c(should)g(c)o(hange)g(at)31 1557 y(some)g(point!)-19
1665 y Fm(\017)25 b Fn(F)o(or)13 b(other)g Fo(P)l(owerPC)j
Fn(operations,)e(parsing)f(is)h(completed)f(by)h(a)g(call)g(to)f
Fp(set)p 1394 1665 V 18 w(operands\(\))p Fn(.)19 b(Another)13
b(ille)o(gal)31 1731 y(check)g(must)h(be)f(made)h(here)f(because)h
(some)g(operands)f(of)g Fk(mtspr)g Fn(and)g Fk(mfspr)g
Fn(are)h(ille)o(gal,)f(while)h(others)31 1797 y(are)e(not.)-19
1905 y Fm(\017)25 b Fn(Le)o(gal)13 b(opcodes)f(are)h(sent)f(to)g(the)h
(routine)e Fp(xlate)p 881 1905 V 18 w(opcode)p 1049 1905
V 17 w(p2v\(\))p Fn(.)-19 2012 y Fm(\017)25 b Fp(xlate)p
137 2012 V 17 w(opcode)p 304 2012 V 17 w(p2v\(\))12 b
Fn(di)o(vides)g(instructions)g(into)g Fo(br)o(anc)o(hes)h
Fn(and)g Fo(ALU)f(ops)p Fn(.)-19 2120 y Fm(\017)25 b
Fn(A)16 b(v)o(ariety)f(of)g(optimizations)g(can)h(be)g(done)g(with)g
(ALU)g(and)g(memory)f(operations.)26 b(These)17 b(include)e
Fo(copy)31 2186 y(pr)n(opagation,)10 b(combining,)h(load-motion)f
(above)g(stor)n(es,)k(load-stor)n(e)d(alias)g(analysis,)h
Fn(and)f Fo(dead-code)g(elim-)31 2253 y(ination.)k Fn(All)d(of)g(these)
h(are)f(checked)g(by)g Fp(xlate)p 861 2253 V 18 w(opcode)p
1029 2253 V 17 w(p2v\(\))p Fn(.)-19 2360 y Fm(\017)25
b Fn(Additional)16 b(splitting)h(of)g(comple)o(x)h(ALU)f(ops)h(into)f
(simpler)g(ones)h(is)g(done)f(in)g Fp(xlate)p 1594 2360
V 18 w(opcode)p 1762 2360 V 17 w(p2v\(\))p Fn(.)30 b(In)31
2427 y(particular)12 b Fo(r)n(ecor)n(d)j Fn(form)e(ops)g(\(e.g.)20
b Fk(and.)p Fn(\))e(that)c(set)g Fp(CR0)f Fn(are)h(split)f(\(e.g.)20
b(to)13 b Fk(and)h Fn(follo)o(wed)e(by)i Fk(cmpli)p Fn(\).)31
2493 y(Like)o(wise)e Fk(rlwimi)g Fn(is)h(split)f(and)g(the)h(indi)o
(vidual)e(pieces)i(scheduled.)p -91 2538 825 2 v -33
2568 a Ff(1)-16 2583 y Fi(Branch-and-link)8 b Fe(instructions)h(can)i
(optionally)c(place)k(the)f(fall-through)e(path)i(in)f(the)h(list)f(as)
i(well.)915 2787 y Fn(10)p eop
%%Page: 11 11
11 10 bop -19 50 a Fm(\017)25 b Fn(If)12 b(none)h(of)g(the)g
(optimizations)g(or)g(splittings)g(apply)g(\227)g(the)g(most)g(common)g
(case)h(\227)f Fp(xlate)p 1679 50 15 2 v 17 w(opcode)p
1846 50 V 18 w(p2v\(\))31 116 y Fn(calculates)d(the)g(earliest)f(time)h
(at)f(which)h(the)g(op)f(may)h(be)g(scheduled)g(due)f(to)h(data)g
(dependences.)15 b(This)10 b(is)g(done)31 182 y(via)j(a)h(call)f(to)g
Fp(get)p 345 182 V 18 w(earliest)p 518 182 V 18 w(time\(\))p
Fn(,)g(which)g(is)h(in)f Fk(vliw.c)p Fn(.)18 b Fp(xlate)p
1236 182 V 17 w(opcode)p 1403 182 V 18 w(p2v\(\))12 b
Fn(then)h(calls)h Fp(insert)p 1871 182 V 18 w(op\(\))31
248 y Fn(to)j(schedule)h(the)f(operation)g(at)h(or)f(after)g(this)g
(earliest)h(time,)h(as)f(function)e(unit)i(and)f(re)o(gister)g(a)o(v)o
(ailability)31 315 y(allo)o(w)m(.)e(Exactly)d(ho)o(w)g
Fk(insert)p 609 315 V 18 w(op)g Fn(does)h(scheduling)f(is)h(discussed)g
(in)f(Section)g(4.)-19 422 y Fm(\017)25 b Fn(Branch)16
b(operations)g(are)g(split)g(into)g(se)o(v)o(eral)g(dif)o(ferent)f
(types,)j(the)e(main)g(being)g Fo(dir)n(ect)h(onpage)e(br)o(anc)o(hes)p
Fn(,)31 489 y Fo(dir)n(ect)d(of)o(fpage)e(br)o(anc)o(hes)p
Fn(,)k(and)e Fo(indir)n(ect)f(br)o(anc)o(hes)i Fn(through)e(the)h
Fk(Counter)f Fn(or)g Fk(LinkReg)p Fn(.)k Fk(RFI)d Fn(\226)f(return)31
555 y(from)f(interrupt,)g Fk(SC)h Fn(\(or)g Fk(SVC)p
Fn(\),)g(and)g Fk(traps)g Fn(are)g(also)g(handled,)h(although)f
Fk(SC)g Fn(and)g Fk(traps)f Fn(are)i(infrequent)31 621
y(in)g(user)g(code)h(and)f Fk(RFI)g Fn(is)h(non-e)o(xistent.)-19
729 y Fm(\017)25 b Fn(Returning)13 b(up)g(the)h(call)g(chain)f(to)h
Fp(xlate)p 748 729 V 17 w(entry\(\))p Fn(,)f(once)h(all)g(operations)f
(on)h(all)f(open)h(paths)g(are)g(scheduled,)31 795 y(the)e(outer)g
Fk(while)g Fn(loop)g(e)o(xits.)-19 903 y Fm(\017)25 b
Fp(xlate)p 137 903 V 17 w(entry\(\))16 b Fn(then)h(checks)g(if)g(the)g
(user)g(wants)f(a)h(dump)g(of)g(the)f(VLIW)i(code.)29
b(The)18 b Fk(-N)f Fn(\003ag)f(discussed)31 969 y(abo)o(v)o(e)d(in)f
(Section)g(2.1)g(corresponds)h(to)f(the)g Fp(do)p 882
969 V 18 w(vliw)p 989 969 V 17 w(dump)g Fn(v)o(ariable.)-19
1077 y Fm(\017)25 b Fn(In)15 b(order)h(to)g(generate)g(statistics)g(at)
h(the)f(end)g(of)g(a)g(program)f(run,)i Fp(D)n(AISY)f
Fn(must)g(kno)o(w)g(when)g(a)h(program)31 1143 y(ends.)j(Programs)12
b(usually)i(end)f(via)h(a)g(kernel)e(service)i(call)g(to)f(location)g
Fp(0x3600)g Fn(\(or)g Fp(0x37D0)g Fn(in)h(AIX)f(4.3\).)31
1209 y(The)h(v)o(alue)f(in)g(re)o(gister)g Fk(r2)g Fn(determines)g(the)
g(service)h(requested.)k(Thus)c(when)g(the)f Fp(D)n(AISY)h
Fn(simulator)e(sees)31 1275 y(that)i(it)g(is)g(e)o(x)o(ecuting)g(the)g
(translation)g(of)g(location)f(0x3600,)i(it)f(checks)h(if)e
Fk(r2)h Fn(contains)g(the)p 1690 1275 V 32 w Fp(exit\(\))f
Fn(service)31 1341 y(v)o(alue.)19 b(If)13 b(so,)h(it)g(writes)f(its)h
(statistics)g(to)g(disk,)g(as)g(described)g(abo)o(v)o(e)g(in)f(Section)
h(2.1,)g(and)g(then)f(terminates.)31 1408 y(The)g(call)f(to)g
Fp(dump)p 384 1408 V 18 w(exit)p 480 1408 V 17 w(chk\(\))f
Fn(sets)i(up)g(the)f(simulator)g(to)g(perform)f(this)h(check.)-19
1515 y Fm(\017)25 b Fn(The)17 b Fp(D)n(AISY)h Fn(simulator)e(is)i
(actually)f(a)g(translation)g(of)g(the)g(VLIW)g(code)g(back)h(to)f
Fo(P)l(owerPC)i Fn(operations)31 1582 y(which)f(then)h(run)f(nati)o(v)o
(ely)h(on)f(the)h Fo(P)l(owerPC)i Fn(machine.)34 b(This)20
b(is)f(detailed)g(in)f(Section)g(9.)35 b(The)20 b(call)f(to)31
1648 y Fp(vliw)p 123 1648 V 17 w(to)p 182 1648 V 18 w(ppc)p
278 1648 V 17 w(simcode\(\))c Fn(performs)f(this)h(translation.)24
b(The)16 b(simulation)f(code)g(not)g(only)g(models)g(the)g(e)o(x)o(e-)
31 1714 y(cution)c(of)h(VLIW)g(instructions,)g(b)o(ut)f(also)i(keeps)f
(count)f(of)h(ho)o(w)f(man)o(y)h(instructions)g(e)o(x)o(ecute,)h(and)f
(can)g(also)31 1780 y(call)g(a)h(cache)g(simulator)m(.)-19
1888 y Fm(\017)25 b Fn(W)l(e)14 b(want)g(subsequent)h(branches)g(to)f
(the)h(entry)f(point)g(of)g(this)g(page)h(to)f(go)h(to)f(the)h
(translation)f(we)g(just)h(cre-)31 1954 y(ated,)h(not)f(to)g(the)h
(translator)m(.)24 b(In)15 b(order)f(to)h(do)g(this)h
Fp(D)n(AISY)f Fn(maintains)g(a)h(hash)g(table)f(mapping)g
Fo(P)l(owerPC)31 2020 y Fn(instruction)10 b(address)h(to)f(their)g
(corresponding)g(VLIW)h(translation.)j(The)e(call)e(to)h
Fp(add)p 1545 2020 V 17 w(page)p 1662 2020 V 18 w(hash)p
1780 2020 V 17 w(entries\(\))31 2087 y Fn(creates)j(this)g(mapping.)19
b(Note)13 b(that)h(not)f(only)g(the)h(entry)f(point)g(of)h(the)f(page)h
(goes)g(into)f(this)h(hash)g(table,)h(b)o(ut)31 2153
y(an)o(y)d(other)g(points)g(at)h(which)f(a)h(ne)o(w)f(scheduling)g(re)o
(gion)g(is)h(be)o(gun,)g(as)g(was)f(described)g(abo)o(v)o(e.)-19
2260 y Fm(\017)25 b Fn(After)13 b(this,)h Fp(xlate)p
354 2260 V 18 w(entry\(\))e Fn(returns)h(to)h(the)g Fp(main2\(\))e
Fn(function.)20 b Fp(main2\(\))12 b Fn(kno)o(ws)i(that)g(simulated)f
(code)h(for)31 2327 y(the)i(\002rst)g(group)g(\226)g(the)h(entry)e
(point)h(of)g(a)h(program)e(is)i(always)f(at)g(the)h(start)f(of)g
Fp(xlate)p 1573 2327 V 17 w(mem)i Fn(\226)e(the)h(start)f(of)31
2393 y(translation)11 b(memory)m(,)g(and)g(sets)i(up)e(an)h(AIX-style)e
(function)h(pointer)g(so)h(that)f(an)h(indirect)e(branch)i(can)f(made)
31 2459 y(to)h(this)g(\002rst)g(translation.)-19 2567
y Fm(\017)25 b Fp(main2\(\))11 b Fn(then)h(branches)h(to)f(this)h
(address)f(to)h(be)o(gin)f(e)o(x)o(ecuting)h(the)f(translated)g
(program)f(\(e.g)i Fk(/bin/ls)p Fn(\).)915 2787 y(11)p
eop
%%Page: 12 12
12 11 bop 442 517 a @beginspecial 0 @llx 0 @lly 242 @urx
124 @ury 2420 @rwi @setspecial
%%BeginDocument: fig/tree_ins.eps
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {} def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-149.0 330.0 translate
1 -1 scale

/clp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/l {lineto} bind def
/m {moveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
 0.06000 0.06000 sc
15.000 slw
% Polyline
n 4200 4350 m 3600 4800 l  gs col-1 s gr 
% Polyline
n 4200 4350 m 4800 4800 l  gs col-1 s gr 
% Polyline
n 4800 4800 m 4200 5250 l  gs col-1 s gr 
% Polyline
n 4800 4800 m 5400 5250 l  gs col-1 s gr 
7.500 slw
% Polyline
n 4050 3825 m 4350 3825 l  gs col-1 s gr 
% Polyline
n 4050 4050 m 4350 4050 l  gs col-1 s gr 
% Polyline
n 4350 5025 m 4650 5025 l  gs col-1 s gr 
% Polyline
n 4950 5025 m 5250 5025 l  gs col-1 s gr 
% Polyline
n 3750 4575 m 4050 4575 l  gs col-1 s gr 
% Polyline
n 4350 4575 m 4650 4575 l  gs col-1 s gr 
15.000 slw
% Polyline
n 4200 3600 m 4200 4350 l  gs col-1 s gr 
/Courier-Bold findfont 150.00 scalefont setfont
4500 4125 m
gs 1 -1 sc (cmp CR0,r4,r5) col-1 show gr
/Courier-Bold findfont 150.00 scalefont setfont
5400 5475 m
gs 1 -1 sc (b V9) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
/Courier-Bold findfont 150.00 scalefont setfont
4500 3900 m
gs 1 -1 sc (add r3,r4,r5) col-1 show gr
/Courier-Bold findfont 150.00 scalefont setfont
4275 4350 m
gs 1 -1 sc (bc CR0.eq) col-1 show gr
/Courier-Bold findfont 150.00 scalefont setfont
4875 4800 m
gs 1 -1 sc (bc CR1.lt) col-1 show gr
/Courier-Bold findfont 150.00 scalefont setfont
4200 5475 m
gs 1 -1 sc (b V7) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
/Courier-Bold findfont 150.00 scalefont setfont
3525 4950 m
gs 1 -1 sc (b V2) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
/Courier-Bold findfont 150.00 scalefont setfont
4200 5100 m
gs 1 -1 sc (nor r3,r8,r7) dup stringwidth pop neg 0 rmoveto  col-1 show gr
/Courier-Bold findfont 150.00 scalefont setfont
5400 5100 m
gs 1 -1 sc (xor r5,r6,r9) col-1 show gr
/Courier-Bold findfont 150.00 scalefont setfont
3600 4650 m
gs 1 -1 sc (and r6,r5,r4) dup stringwidth pop neg 0 rmoveto  col-1 show gr
/Courier-Bold findfont 150.00 scalefont setfont
4800 4650 m
gs 1 -1 sc (or r6,r5,r4) col-1 show gr
/Courier-Bold findfont 150.00 scalefont setfont
4200 3525 m
gs 1 -1 sc (V1:) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
$F2psEnd
restore
%%EndDocument
 @endspecial 550 678 a Fh(Figure)12 b(5.)f(Sample)g(VLIW)h(T)m(ree)g
(Instruction.)-19 820 y Fm(\017)25 b Fn(When)13 b(the)f(translated)h
(program)f(comes)h(to)f(a)h(ne)o(w)g(page)g(or)f(performs)g(an)h
(indirect)f(jump,)h(it)g(will)f(re-in)n(v)o(oke)31 886
y Fp(xlate)p 137 886 15 2 v 17 w(entry\(\))f Fn(to)h(do)h(the)f(same)h
(tasks)g(we)f(just)h(outlined)e(for)h(the)g(\002rst)g(page.)-19
994 y Fm(\017)25 b Fn(Subsequent)12 b(in)n(v)o(ocations)g(of)g
Fp(xlate)p 672 994 V 17 w(entry\(\))f Fn(actually)i(occur)f(indirectly)
m(,)f(as)i(can)g(be)f(seen)h(in)f(Figure)g(4.)k(The)31
1060 y(simulation)c(code)g(branches)h(to)f Fp(xlate)p
707 1060 V 17 w(entry)p 838 1060 V 17 w(raw\(\))g Fn(which)g(is)h(in)f
Fk(r13)p 1305 1060 V 18 w(base.s)p Fn(.)-19 1168 y Fm(\017)25
b Fp(xlate)p 137 1168 V 17 w(entry)p 268 1168 V 17 w(raw\(\))15
b Fn(sa)o(v)o(es)h Fo(P)l(owerPC)h Fn(re)o(gisters)f(that)f(may)g(be)g
(li)o(v)o(e)g(\(e.g.)25 b Fk(r1-r12)p Fn(,)15 b Fk(fp0-fp3)p
Fn(,)h(and)f(the)31 1234 y Fk(XER)p Fn(\).)d(It)f(then)h(sets)h(up)f
(the)h(T)o(OC)g(\(re)o(gister)e Fk(r2)p Fn(,)i(which)f(is)g(used)h(as)f
(a)h Fo(T)-5 b(able)12 b(Of)g(Contents)g Fn(in)g(AIX)g(to)g(access)31
1300 y(global)g(v)o(ariables\))g(and)h(stack)g(pointer)f(\()p
Fk(r1)p Fn(\))g(for)f(the)i(translator)m(.)k(It)12 b(also)h(copies)g
(parameters)f(passed)i(by)e(the)31 1367 y(simulator)e(to)h(standard)g
(AIX)f(parameter)h(re)o(gisters.)k(F)o(or)c(e)o(xample)g(the)g(address)
g(to)g(translate)g(is)h(copied)e(from)31 1433 y Fk(r27)h
Fn(to)h Fk(r3)p Fn(.)j(Upon)c(return)g(to)h Fp(xlate)p
680 1433 V 17 w(entry)p 811 1433 V 17 w(raw\(\))p Fn(,)g(control)f(is)h
(returned)e(to)i(the)f(simulated)h(VLIW)f(code,)i(as)31
1499 y(described)f(abo)o(v)o(e.)-19 1607 y Fm(\017)25
b Fn(This)15 b(process)g(continues)f(until)g(the)h(simulation)f(code)g
(detects)h(the)g(translated)f(program)g(is)g(e)o(xiting,)i(as)f(de-)31
1673 y(scribed)d(abo)o(v)o(e.)-91 1813 y Fl(3)59 b(VLIW)15
b(T)l(r)o(ee)e(Instructions)i(and)h(Generic)c(Machine)i(Model)-41
1938 y Fp(D)n(AISY)9 b Fn(currently)g(tar)o(gets)g(a)h(VLIW)f(machine)g
(whose)h(instructions)f(are)g(trees,)i(a)e(format)g(de)o(v)o(eloped)g
(by)g(Ebcioglu)g([1])-91 2004 y(and)16 b(his)g(collaborators)f(o)o(v)o
(er)h(the)g(years.)27 b(A)16 b(sample)h(tree)e(is)i(sho)o(wn)f(in)f
(Figure)h(5.)26 b(There)17 b(are)e(se)o(v)o(eral)i(points)f(to)-91
2070 y(note:)-19 2190 y Fm(\017)25 b Fn(The)19 b(tree)f(instruction)g
(splits)h(at)g(conditional)f(branch)g(instructions.)35
b(The)19 b(left)f(path)g(corresponds)h(to)f(the)31 2256
y(branch)12 b(condition)h(being)g(false,)g(while)g(the)g(right)f(path)h
(corresponds)g(to)g(the)g(branch)f(condition)h(being)f(true.)31
2323 y(In)g(Figure)g(5)h(there)g(are)g(two)f(conditional)g(branches.)17
b(The)d(edge)f(terminating)f(at)g Fk(b)30 b(V2)13 b Fn(corresponds)g
(to)f(the)31 2389 y(false)h(path)g(of)g Fk(bc)29 b(CR0.eq)p
Fn(.)18 b(The)c(true)f(path)g(of)g Fk(bc)30 b(CR0.eq)12
b Fn(splits)i(at)f(the)g(branch)g Fk(bc)30 b(CR1.lt)13
b Fn(with)31 2455 y(the)f(path)g(ending)g(at)g Fk(b)30
b(V7)12 b Fn(corresponding)f(to)h(the)g(false)g(path)g(of)g
Fk(bc)29 b(CR1.lt)12 b Fn(and)g(the)g(path)g(ending)g(at)g
Fk(b)31 2521 y(V9)g Fn(corresponding)f(to)i(the)f(true)g(path.)915
2787 y(12)p eop
%%Page: 13 13
13 12 bop -19 50 a Fm(\017)25 b Fn(The)16 b(branch)f(conditions)h(are)f
(e)o(v)o(aluated)h(prior)e(to)i(e)o(x)o(ecuting)g(the)g(tree.)25
b(F)o(or)15 b(e)o(xample,)j(the)d Fk(bc)30 b(CR0.eq)31
116 y Fn(uses)13 b(the)e(v)o(alue)h(of)g Fk(CR0.eq)f
Fn(that)h(e)o(xisted)g(upon)g(entry)f(at)h(the)g(label)g
Fk(V1)p Fn(,)g(not)g(the)g(v)o(alue)f(computed)h(by)g
Fk(cmp)31 182 y(CR0,r4,r5)p Fn(.)-19 290 y Fm(\017)25
b Fn(W)n(ith)9 b(one)g(e)o(xception,)i(all)e(input)g(v)o(alues)g
(\(like)g Fk(CR0.eq)f Fn(in)i Fk(bc)29 b(CR0.eq)9 b Fn(or)g
Fk(r4)g Fn(and)h Fk(r5)f Fn(in)g Fk(add)30 b(r3,r4,r5)p
Fn(\))31 356 y(are)15 b(e)o(v)o(aluated)f(prior)g(to)h(the)g(e)o(x)o
(ecution)g(of)f(the)h(VLIW)g(instruction.)23 b(This)16
b(is)f(termed)f Fo(par)o(allel)h(semantics)p Fn(,)31
422 y(i.e.)22 b(all)14 b(the)h(inputs)f(are)g(read)g(in)g(parallel)g
(at)h(the)f(start)g(of)g(the)g(VLIW)h(instruction,)f(and)h(all)f(the)g
(outputs)g(are)31 489 y(written)d(in)i(parallel)e(at)i(the)f(end)g(of)g
(the)h(VLIW)f(instruction.)-19 596 y Fm(\017)25 b Fo(Aside:)h
Fn(P)o(arallel)17 b(semantics)i(are)e(not)h(essential)g(to)g(VLIW)f
(tree)h(instructions.)31 b(Sequential)17 b(semantics)i(in)31
663 y(which)e(each)g(operation)f(e)o(x)o(ecutes)i(and)f(writes)g(its)g
(results)g(before)f(the)h(ne)o(xt)g(e)o(x)o(ecutes)h(are)f(also)h
(possible.)31 729 y(Ho)o(we)o(v)o(er)e(sequential)g(semantics)h
(restrict)f(ho)o(w)g(VLIW)h(instructions)f(may)h(be)f(formed.)27
b(F)o(or)16 b(e)o(xample,)j(it)31 795 y(would)d(not)h(be)h(le)o(gal)f
(to)g(write)g Fk(CR0)g Fn(via)g(the)g Fk(cmp)g Fn(and)h(read)f(it)g
(via)g Fk(bc)30 b(CR0.eq)16 b Fn(in)h(the)h(same)f(VLIW)-5
b(,)31 861 y(as)15 b(occurs)g(in)g(Figure)f(5.)23 b(Sequential)14
b(semantics)h(do)g(ha)o(v)o(e)g(an)g(adv)o(antage.)23
b(The)o(y)16 b(allo)o(w)e(lar)o(ge)h(VLIW)g(tree)31 927
y(instructions)j(to)h(be)f(easily)h(split)g(into)f(smaller)h(trees)g
(in)f(hardware)g(if)g(the)h(machine)f(on)h(which)g(the)o(y)f(are)31
994 y(running)11 b(does)i(not)f(ha)o(v)o(e)h(suf)o(\002cient)e
(function)h(units.)-19 1101 y Fm(\017)25 b Fn(The)19
b(one)f(e)o(xception)h(to)f(parallel)g(semantics)h(in)f
Fp(D)n(AISY)h Fn(is)g(memory)f(references.)34 b(Since)18
b(the)g(compiler)31 1168 y(cannot)c(always)g(kno)o(w)g(if)g(a)h(store)f
(and)h(load)f(are)g(independent,)i(it)e(must)g(ha)o(v)o(e)h(some)g(way)
f(of)g(guaranteeing)31 1234 y(that)h(the)h(load)g(recei)o(v)o(es)g(the)
g(correct)g(v)o(alue,)h(and)f(that)f(memory)h(is)g(updated)g(correctly)
f(and)h(in)f(the)h(proper)31 1300 y(order)m(.)32 b(One)18
b(way)g(to)g(do)g(this)g(would)g(be)g(\(1\))f(to)h(allo)o(w)g(at)g
(most)g(one)g(store)g(per)g(VLIW)g(instruction)f(and)31
1366 y(\(2\))f(to)g(allo)o(w)g(no)h(loads)g(\223after\224)f(an)o(y)h
(store)f(in)h(a)g(VLIW)g(instruction.)27 b(Unfortunately)m(,)17
b(these)g(restrictions)31 1432 y(signi\002cantly)e(reduce)g(the)h
(amount)f(of)g(instruction)g(le)o(v)o(el)g(parallelism)g(achie)o(v)o
(able.)25 b(Thus)17 b Fp(D)n(AISY)f Fn(lea)o(v)o(es)31
1499 y(it)f(to)f(the)h(hardware)f(to)h(insure)g(that)g(stores)g(are)g
(properly)f(sequenced)h(to)g(memory)f(and)h(that)g(loads)g(recei)o(v)o
(e)31 1565 y(the)j(proper)f(v)o(alue,)j(e)o(v)o(en)e(if)g(it)g(is)g
(from)f(a)i(store)f(in)g(the)g(same)g(VLIW)h(instruction.)32
b(The)18 b(hardware)g(may)31 1631 y(introduce)10 b(stalls)h(if)f(there)
g(is)h(too)g(much)f(such)h(aliasing,)h(so)f(it)f(is)h(still)g(useful)f
(for)g(the)g(compiler)g(to)h(do)f(as)i(much)31 1697 y(disambiguation)19
b(as)h(possible.)38 b(\(Other)19 b(optimizations)g(are)g(also)h
(possible)g(from)f(such)h(disambiguation)31 1763 y(work.\))-19
1871 y Fm(\017)25 b Fn(Since)12 b(the)h(tree)f(in)g(Figure)g(5)g(has)h
(two)f(conditional)g(branches,)h(there)f(are)h(three)f(e)o(xits,)i
Fk(b)29 b(V2)p Fn(,)13 b Fk(b)30 b(V7)p Fn(,)13 b(and)f
Fk(b)31 1937 y(V9)p Fn(.)j(In)d(general,)h(there)f(is)h(one)f(more)g(e)
o(xit)g(than)g(there)g(are)h(conditional)e(branches.)-19
2045 y Fm(\017)25 b Fn(ALU)13 b(and)f(memory)g(operations)g(are)g
(associated)h(with)f(edges)h(of)f(the)g(tree.)k(In)c(Figure)g(5,)h
(there)f(are)g(5)g(edges.)31 2111 y(Whether)f(ALU/memory)g(operations)h
(on)f(each)i(edge)e(actually)h(e)o(x)o(ecute)h(depends)f(on)f(the)h(e)o
(v)o(aluation)f(of)g(the)31 2177 y(conditional)h(branches.)18
b(If)13 b(an)g(operation)f(is)h(on)g(an)h(edge)f(that)g(matches)g
(conditional)g(branch)f(conditions,)i(it)31 2244 y(is)f(e)o(x)o
(ecuted,)h(otherwise)e(not.)17 b(F)o(or)c(e)o(xample,)g(the)g
Fk(and)29 b(r6,r5,r4)12 b Fn(on)h(the)g(edge)g(from)f
Fk(bc)29 b(CR0.eq)13 b Fn(to)31 2310 y Fk(b)30 b(V2)12
b Fn(is)g(e)o(x)o(ecuted)h(only)f(if)g Fk(CR0.eq)g Fn(is)h(not)f(set.)
-19 2418 y Fm(\017)25 b Fn(In)14 b(this)h(way)m(,)h(the)f(conditional)f
(branches)h(in)g(a)g(VLIW)g(instruction)f(act)h(not)g(so)h(much)e(as)i
(branches,)g(b)o(ut)f(as)31 2484 y(masks)e(indicating)f(which)g(set)h
(of)f(instructions)g(in)g(the)g(VLIW)h(tree)f(are)g(to)g(e)o(x)o
(ecute.)17 b(Since)12 b(the)h(branch)f(con-)31 2550 y(ditions)g(are)h
(e)o(v)o(aluated)g(at)g(the)g(start)g(of)f(the)h(VLIW)g(instruction,)g
(the)g(set)h(of)e(ALU)i(and)f(memory)f(operations)31
2616 y(to)g(be)g(e)o(x)o(ecuted)h(can)g(be)f(determined)g(at)g(the)h
(start)f(of)g(the)g(instruction)g(as)h(well.)915 2787
y(13)p eop
%%Page: 14 14
14 13 bop -19 50 a Fm(\017)25 b Fn(As)18 b(a)f(practical)h(matter)n(,)g
(each)g(VLIW)g(tree)f(instruction)g(e)o(x)o(ecutes)i(in)e(one)h(c)o
(ycle,)h(which)f(does)g(not)f(lea)o(v)o(e)31 116 y(suf)o(\002cient)d
(time)h(\227)g(at)g(least)g(at)g(the)g(frequencies)g(we)g(wish)g(to)g
(achie)o(v)o(e)g(\227)g(to)g(e)o(v)o(aluate)g(which)g(operations)31
182 y(should)k(e)o(x)o(ecute,)j(and)e(then)f(e)o(x)o(ecute)h(them.)36
b(Thus)20 b(all)f(operations)g(in)g(an)o(y)h(likely)e(implementation)g
(are)31 248 y(e)o(x)o(ecuted)g(and)f(the)g(mask)h(determined)e(by)h
(the)h(conditional)e(branches)i(is)f(used)h(to)f(enable)g(write-back)g
(of)31 315 y(those)12 b(results)h(which)f(actually)g(should)h(ha)o(v)o
(e)f(e)o(x)o(ecuted.)-19 416 y Fm(\017)25 b Fn(As)13
b(can)h(be)f(seen)h(in)f(Figure)g(5,)h(each)f(VLIW)h(instruction)e(e)o
(xplicitly)h(identi\002es)g(its)g(successor)h(instructions,)31
483 y(i.e.)h(VLIW)c Fk(V2)p Fn(,)g Fk(V7)p Fn(,)g(or)f
Fk(V9)p Fn(.)15 b(Thus)c(VLIW)g(instructions)f(branch)g(on)g(e)o(v)o
(ery)h(c)o(ycle.)k(There)c(are)f(two)g(problems)31 549
y(with)i(such)h(branching:)89 657 y Fp(\226)24 b Fn(Encoding)15
b(3)g(\(or)f(4\))h(completely)f(independent)h(tar)o(gets)f(in)h(a)g
(VLIW)g(instruction)g(is)g(wasteful)f(of)h(en-)138 723
y(coding)d(space.)89 804 y Fp(\226)24 b Fn(Fetching)15
b(ne)o(w)g(instructions)f(from)g(a)i(ne)o(w)f(and)g(arbitrary)f
(location)g(e)o(v)o(ery)h(c)o(ycle)h(is)f(dif)o(\002cult,)g(all)g(the)
138 870 y(more)d(so)h(if)e(the)i(conditional)e(branch)h(conditions)g
(must)g(be)h(computed)f(to)g(determine)g(the)g(ne)o(xt)g(VLIW)138
937 y(instruction)g(to)g(fetch.)31 1045 y(T)l(o)17 b(o)o(v)o(ercome)g
(these)h(dif)o(\002culties,)f(the)g(e)o(v)o(entual)g
Fp(D)n(AISY)h Fn(architecture)e(will)g(almost)h(certainly)g(place)g
(re-)31 1111 y(strictions,)c(on)h(the)f(set)h(of)e(successor)j(VLIW)e
(instructions)g(to)g(the)g(current)g(VLIW)g(instruction.)18
b(One)13 b(likely)31 1177 y(restriction)k(is)i(that)f(all)g(successor)i
(instructions)e(lie)g(in)g(the)g(same)h(Icache)g(line.)33
b(If)18 b(this)g(is)h(the)f(case,)j(the)31 1243 y(fetch)11
b(unit)g(can)h(be)o(gin)g(fetching)e(this)i(cache)g(line)f(immediately)
g(without)g(waiting)g(to)g(see)h(ho)o(w)g(the)f(condition)31
1310 y(codes)h(e)o(v)o(aluate.)j(Then)e(at)f(the)f(end)h(of)g(the)f(c)o
(ycle,)i(when)f(the)g(condition)f(codes)h(ha)o(v)o(e)h(been)f(e)o(v)o
(aluated,)g(it)f(can)31 1376 y(pick)i(the)h(proper)e(successor)j
(instruction)d(out)i(of)f(the)g(cache)h(line.)19 b Fo(The)14
b Fp(D)n(AISY)f Fo(tr)o(anslation)h(softwar)n(e)g(cur)o(-)31
1442 y(r)n(ently)h(does)f(not)h(take)f(into)g(account)g(suc)o(h)h(r)n
(estrictions.)23 b Fn(This)15 b(shortcoming)f(needs)h(to)f(be)h(\002x)o
(ed,)g(possibly)31 1508 y(through)f(a)h(\223\002nal-pass\224)g
(assembler)h(which)f(or)o(ganizes)g(the)g(VLIW)g(instructions)f(\227)h
(duplicating)g(them)g(in)31 1574 y(some)d(cases)i(\227)e(in)g(order)g
(to)g(meet)g(the)h(cache)g(line)f(restriction.)-19 1676
y Fm(\017)25 b Fn(Note)13 b(that)g(re)o(gister)f Fk(r3)h
Fn(is)g(written)g(twice)g(if)f(the)h(path)g(from)f Fk(V1)h
Fn(to)g Fk(b)30 b(V7)13 b Fn(is)g(follo)o(wed.)k(In)12
b(such)i(cases,)g(the)31 1742 y(operation)f(nearer)h(the)g(VLIW)g(e)o
(xit)g(takes)g(precedence.)22 b(Thus,)15 b(if)f(the)g
Fk(V1)g Fn(to)g Fk(b)30 b(V7)14 b Fn(path)g(is)g(follo)o(wed,)g(the)31
1809 y Fk(nor)29 b(r3,r8,r7)12 b Fn(result)g(takes)g(precedence)h(o)o
(v)o(er)f(the)h Fk(add)29 b(r3,r4,r5)12 b Fn(result.)-41
1905 y(Note)21 b(that)g(VLIW)g(tree)h(instructions)e(are)i(quite)f
(similar)g(to)g(predicated)g(e)o(x)o(ecution,)j(with)d(the)g
(conditional)-91 1971 y(branches)c(in)g(the)h(VLIW)f(tree)g
(instruction)g(acting)g(as)h(predicates.)31 b(F)o(or)17
b(e)o(xample,)i(Figure)d(6)i(sho)o(ws)f(equi)o(v)o(alent)-91
2037 y(predicated)12 b(code)g(for)g(the)g(VLIW)h(tree)f(instruction)f
(in)h(Figure)g(5.)k(T)l(wo)c(points)g(are)h(of)e(particular)h(note:)-19
2133 y Fm(\017)25 b Fn(Operations)16 b(may)g(ha)o(v)o(e)h(multiple)f
(predicates.)28 b(F)o(or)16 b(e)o(xample)g(the)g Fk(xor)h
Fn(operation)e(from)h(the)g(VLIW)h(tree)31 2200 y(instruction)11
b(in)h(Figure)g(5)g(has)h(two)f(predicates,)h Fk(<CR0.eq)29
b(TRUE,)g(CR1.lt)g(TRUE>)p Fn(,)13 b(in)f(Figure)f(6.)-19
2301 y Fm(\017)25 b Fn(Branches)18 b(to)h(the)f(ne)o(xt)g(VLIW)h(tree)f
(instruction)f(become)h(conditional)g(branches,)i(again)e(possibly)h
(with)31 2368 y(multiple)11 b(conditions,)i(for)e(e)o(xample,)i
Fk(bc)30 b(<CR0.eq)f(TRUE,)g(CR1.lt)h(TRUE>,V9)11 b Fn(in)h(Figure)g
(6.)-91 2464 y Fo(Another)g(possible)h(task)f(in)g(the)g
Fp(D)n(AISY)h Fo(compiler)f Fn(is)g(to)g(make)g(it)g(support)f(an)i
(architecture)e(with)h(e)o(xplicitly)f(predi-)-91 2530
y(cated)h(operations,)h(as)g(in)f(Figure)f(6.)-41 2596
y(There)k(is)h(of)e(course)i(more)f(to)g(the)g Fp(D)n(AISY)g
Fn(machine)g(model)g(than)g(simply)g(the)h(instruction)e(model.)24
b(Man)o(y)16 b(of)-91 2662 y(these)d(other)e(parameters,)i(ho)o(we)o(v)
o(er)f(are)g(more)g(easily)g(parameterized:)915 2787
y(14)p eop
%%Page: 15 15
15 14 bop 357 32 a Fk(add)89 b(r3,r5,r5,<TRUE>)357 98
y(cmp)g(CR0,r4,r5,<TRUE>)357 164 y(and)g(r6,r5,r4,<CR0.eq)29
b(FALSE>)357 230 y(or)119 b(r6,r5,r4,<CR0.eq)29 b(TRUE>)357
296 y(nor)89 b(r3,r8,r7,<CR0.eq)29 b(TRUE,)g(CR1.lt)g(FALSE>)357
363 y(xor)89 b(r5,r6,r9,<CR0.eq)29 b(TRUE,)g(CR1.lt)g(TRUE>)357
429 y(bc)119 b(<CR0.eq)30 b(FALSE>,V2)357 495 y(bc)119
b(<CR0.eq)30 b(TRUE,)f(CR1.lt)g(FALSE>,V7)357 561 y(bc)119
b(<CR0.eq)30 b(TRUE,)f(CR1.lt)g(TRUE>,V9)200 723 y Fh(Figure)13
b(6.)e(Sample)g(Predicated)h(Code)g(Corresponding)i(to)e(VLIW)f(T)m
(ree)h(Instruction.)-19 865 y Fm(\017)25 b Fn(The)14
b Fp(D)n(AISY)h Fn(compiler)e(currently)g(supports)h(machines)g(ha)o
(ving)g(from)f(64)h(to)g(256)g(general)g(purpose)g(re)o(gis-)31
931 y(ters,)j(64)e(to)h(256)f(\003oating)g(point)g(re)o(gisters,)i(and)
f(64)g(to)f(256)h(condition)f(re)o(gister)g(bits)h(\(or)f(equi)o(v)o
(alently)f(for)31 997 y Fo(P)l(owerPC)p Fn(,)j(16)d(to)g(64)h
Fo(4-bit)f Fn(condition)f(re)o(gister)i(\002elds\).)22
b(The)15 b(maximum)e(number)h(is)h(speci\002ed)g(in)f(the)h(\002le)31
1063 y Fk(max)p 124 1063 15 2 v 17 w(resrcs.h)f Fn(and)g(the)g(number)f
(used)h(during)g(translation)f(can)h(be)g(set)h(in)f(the)g
Fk(daisy.config)f Fn(\002le)31 1130 y(as)h(described)h(in)e(Section)h
(2.2.)22 b(\()p Fp(Caution:)16 b Fo(Ther)n(e)f(ar)n(e)g(curr)n(ently)g
(b)o(ugs)f(if)g(mor)n(e)h(than)e(64)h(of)g(any)g(one)h(kind)31
1196 y(of)d(r)n(e)n(gisters)h(ar)n(e)g(speci\002ed.)p
Fn(\))-19 1303 y Fm(\017)25 b Fn(The)16 b Fp(D)n(AISY)f
Fn(compiler)g(currently)f(supports)h(machines)h(ha)o(ving)f(up)g(to)g
(16)g(ALU)h(and/or)f(memory)f(opera-)31 1370 y(tions)e(plus)h(8)f
(conditional)g(branches)g(per)g(VLIW)h(tree)f(instruction.)j(\(Lar)o
(ger)d(numbers)g(should)g(be)h(possible,)31 1436 y(as)f(these)h(v)o
(alues)f(are)g(generally)g(parameterized)f(in)h(the)g(code,)h(ho)o(we)o
(v)o(er)f(there)f(seems)i(to)f(be)h(some)f(b)o(ug)g Fd(:)c(:)g(:)o
Fn(.\))31 1502 y(The)13 b(e)o(xact)f(numbers)g(for)g(a)h(particular)e
(run)h(are)g(also)h(set)g(in)f Fk(daisy.config)p Fn(.)-19
1610 y Fm(\017)25 b Fn(Function)16 b(units)h(can)h(be)f(clustered,)i
(so)f(that)f(results)g(computed)g(in)g(a)g(cluster)h(are)f(a)o(v)o
(ailable)g(as)g(inputs)h(in)31 1676 y(the)e(ne)o(xt)h(c)o(ycle)g
(within)e(that)i(cluster)n(,)h(b)o(ut)e(only)g(after)g(a)g(1)h(c)o
(ycle)g(delay)f(in)g(other)g(clusters.)29 b(The)17 b(e)o(v)o(entual)31
1742 y Fp(D)n(AISY)12 b Fn(architecture)g(will)g(likely)g(be)g
(clustered,)h(and)f(the)h(software)e(may)i(need)f(to)g(be)h(modi\002ed)
f(to)g(support)31 1808 y(the)k(precise)g(model)g(adopted.)27
b(Much)17 b(of)e(the)i(code)f(for)f(clustering)h(is)h(in)f
Fk(cluster.c)p Fn(.)26 b(The)17 b(clustering)31 1875
y(parameters)12 b(are)g(set)h(in)f Fk(daisy.config)f
Fn(and)h(may)h(be)f(changed)h(for)e(each)i(translation.)-19
1982 y Fm(\017)25 b Fn(This)15 b(v)o(ersion)g(of)f Fp(D)n(AISY)h
Fn(does)g(not)f(distinguish)g(between)h(ALU)g(types,)h(and)e(in)h
(particular)e(does)i(not)g(dis-)31 2049 y(tinguish)d(between)g(inte)o
(ger)g(and)h(\003oating)e(point)h(operations.)-19 2156
y Fm(\017)25 b Fn(Instruction)12 b(latencies)i(are)f(con\002gured)g(at)
g(compile)g(time,)h(not)f(e)o(x)o(ecution)h(time.)k(\(That)c(is)f(the)o
(y)h(are)f(con\002g-)31 2223 y(ured)d(when)h Fp(D)n(AISY)g
Fn(is)g(compiled,)g(not)g(when)f Fp(D)n(AISY)i Fn(is)f(run.\))j(Se)o(v)
o(eral)c(sets)i(of)e(latencies)h(ha)o(v)o(e)h(been)f(used,)31
2289 y(and)h(these)h(are)f(controlled)g(by)g Fk(#ifdef)g
Fn(statements)g(in)h(the)f(\002le)g Fk(latency.h)p Fn(.)-19
2396 y Fm(\017)25 b Fp(D)n(AISY)14 b Fn(can)f(model)g(up)h(to)f(3-le)o
(v)o(el)g(cache)h(and)g(TLB)g(hierarchies.)19 b(Specifying)13
b(the)g Fk(-G)g Fn(\003ag)h(with)f Fk(daisy)31 2463 y
Fn(enables)h(cache)g(simulation.)20 b(When)14 b(cache)h(simulation)e
(is)h(enabled,)h Fp(D)n(AISY)f Fn(reads)g(the)g(cache)h(con\002gura-)31
2529 y(tion)c(from)g(the)h(\002le)g Fk(cache.config)f
Fn(and)h(the)g(TLB)h(con\002guration)e(from)g(the)h(\002le)g
Fk(tlb.config)p Fn(.)i(Both)31 2595 y Fk(cache.config)8
b Fn(and)h Fk(tlb.config)g Fn(are)g(picked)g(up)g(from)f(the)i
(directory)e(speci\002ed)h(by)h Fk(DAISY)p 1825 2595
V 17 w(CONFIG)915 2787 y Fn(15)p eop
%%Page: 16 16
16 15 bop -55 990 a @beginspecial 0 @llx 0 @lly 618 @urx
589 @ury 1944 @rwi 2376 @rhi @setspecial
%%BeginDocument: fig/p2v-1.eps
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {} def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-67.0 659.0 translate
1 -1 scale

/clp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/l {lineto} bind def
/m {moveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
 0.06000 0.06000 sc
15.000 slw
% Polyline
n 7650 2025 m 7950 2025 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
8100 2100 m
gs 1 -1 sc (add    r1,r2,r3) col-1 show gr
% Polyline
n 7801 2926 m 7801 3526 l  gs col-1 s gr 
% Polyline
n 7651 3151 m 7951 3151 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
8101 3226 m
gs 1 -1 sc (add    r1,r2,r3) col-1 show gr
/Times-BoldItalic findfont 255.00 scalefont setfont
1200 1800 m
gs 1 -1 sc (1\)) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
2400 1800 m
gs 1 -1 sc (add    r1,r2,r3) col-1 show gr
% Ellipse
n 11089 5697 225 225 0 360 DrawEllipse gs col-1 s gr

/Times-BoldItalic findfont 360.00 scalefont setfont
11101 5851 m
gs 1 -1 sc (4) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
% Ellipse
n 11089 7947 225 225 0 360 DrawEllipse gs col-1 s gr

/Times-BoldItalic findfont 360.00 scalefont setfont
11101 8101 m
gs 1 -1 sc (5) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
% Polyline
n 5178 7953 m 5478 7953 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
5628 8028 m
gs 1 -1 sc (r4=r63) col-1 show gr
% Polyline
n 5179 10278 m 5479 10278 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
5629 10353 m
gs 1 -1 sc (r4=r63) col-1 show gr
% Polyline
n 5175 5625 m 5475 5625 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
5625 5700 m
gs 1 -1 sc (sli r12,r1,3) col-1 show gr
% Polyline
n 5176 7726 m 5476 7726 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
5626 7801 m
gs 1 -1 sc (sli r12,r1,3) col-1 show gr
% Polyline
n 5176 10051 m 5476 10051 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
5626 10126 m
gs 1 -1 sc (sli r12,r1,3) col-1 show gr
% Ellipse
n 11175 2250 225 225 0 360 DrawEllipse gs col-1 s gr

% Ellipse
n 11088 3296 225 225 0 360 DrawEllipse gs col-1 s gr

% Ellipse
n 11088 5096 225 225 0 360 DrawEllipse gs col-1 s gr

% Ellipse
n 11089 10572 225 225 0 360 DrawEllipse gs col-1 s gr

% Polyline
	[100.0] 0 setdash
n 6075 2700 m 10800 2700 l  gs col-1 s gr 	[] 0 setdash
% Polyline
n 7800 3525 m 7425 3750 l  gs col-1 s gr 
% Polyline
n 7800 3525 m 8175 3750 l  gs col-1 s gr 
% Polyline
	[100.0] 0 setdash
n 6075 3975 m 10800 3975 l  gs col-1 s gr 	[] 0 setdash
% Polyline
n 7801 4876 m 7426 5101 l  gs col-1 s gr 
% Polyline
n 7801 4876 m 8176 5101 l  gs col-1 s gr 
% Polyline
n 7802 4277 m 7802 4877 l  gs col-1 s gr 
% Polyline
n 7652 4502 m 7952 4502 l  gs col-1 s gr 
% Polyline
n 5326 5401 m 5326 6001 l  gs col-1 s gr 
% Polyline
n 5325 10575 m 5325 10650 l  4950 10950 l  gs col-1 s gr 
% Polyline
n 5325 10650 m 5700 10950 l  gs col-1 s gr 
% Polyline
n 6600 1425 m 8925 1425 l  gs col-1 s gr 
30.000 slw
% Polyline
n 10950 1950 m 10950 1950 l gs col-1 s gr
% Polyline
n 10950 2025 m 10425 2025 l  gs col-1 s gr 
n 10785.00 2115.00 m 10425.00 2025.00 l 10785.00 1935.00 l  10785.50 2025.50 l 10785.00 2115.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
% Polyline
n 10050 3525 m 9525 3525 l  gs col-1 s gr 
n 9885.00 3615.00 m 9525.00 3525.00 l 9885.00 3435.00 l  9885.50 3525.50 l 9885.00 3615.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
% Polyline
n 8625 5325 m 8100 5325 l  gs col-1 s gr 
n 8460.00 5415.00 m 8100.00 5325.00 l 8460.00 5235.00 l  8460.50 5325.50 l 8460.00 5415.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
% Polyline
n 8775 8175 m 8250 8175 l  gs col-1 s gr 
n 8610.00 8265.00 m 8250.00 8175.00 l 8610.00 8085.00 l  8610.50 8175.50 l 8610.00 8265.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
% Polyline
n 7725 10725 m 7200 10725 l  gs col-1 s gr 
n 7560.00 10815.00 m 7200.00 10725.00 l 7560.00 10635.00 l  7560.50 10725.50 l 7560.00 10815.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
15.000 slw
% Polyline
n 7500 4950 m 7800 4950 l  gs col-1 s gr 
30.000 slw
% Polyline
n 4725 4950 m 5325 4950 l  gs col-1 s gr 
n 4965.00 4860.00 m 5325.00 4950.00 l 4965.00 5040.00 l  4965.50 4950.50 l 4965.00 4860.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
15.000 slw
% Polyline
	[100.0] 0 setdash
n 4800 6150 m 10800 6150 l  gs col-1 s gr 	[] 0 setdash
% Polyline
n 7802 7127 m 7427 7352 l  gs col-1 s gr 
% Polyline
n 7802 7127 m 8177 7352 l  gs col-1 s gr 
% Polyline
n 7803 6528 m 7803 7128 l  gs col-1 s gr 
% Polyline
n 7653 6753 m 7953 6753 l  gs col-1 s gr 
% Polyline
n 5327 7652 m 5327 8252 l  gs col-1 s gr 
% Polyline
n 5175 8175 m 5475 8175 l  gs col-1 s gr 
% Polyline
n 7425 7275 m 7725 7275 l  gs col-1 s gr 
% Polyline
	[100.0] 0 setdash
n 4801 8475 m 10801 8475 l  gs col-1 s gr 	[] 0 setdash
% Polyline
n 7803 9452 m 7428 9677 l  gs col-1 s gr 
% Polyline
n 7803 9452 m 8178 9677 l  gs col-1 s gr 
% Polyline
n 7804 8853 m 7804 9453 l  gs col-1 s gr 
% Polyline
n 7654 9078 m 7954 9078 l  gs col-1 s gr 
% Polyline
n 7800 1800 m 7800 2400 l  gs col-1 s gr 
% Polyline
n 5328 9977 m 5328 10577 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
6750 7575 m
gs 1 -1 sc (b VLIW2) col-1 show gr
% Polyline
n 5176 10500 m 5476 10500 l  gs col-1 s gr 
% Polyline
n 7425 9600 m 7725 9600 l  gs col-1 s gr 
% Polyline
n 2400 1425 m 4800 1425 l  gs col-1 s gr 
% Polyline
n 5177 5852 m 5477 5852 l  gs col-1 s gr 
30.000 slw
% Polyline
n 7276 5851 m 6751 5851 l  gs col-1 s gr 
n 7111.00 5941.00 m 6751.00 5851.00 l 7111.00 5761.00 l  7111.50 5851.50 l 7111.00 5941.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
% Polyline
n 8025 5625 m 7500 5625 l  gs col-1 s gr 
n 7860.00 5715.00 m 7500.00 5625.00 l 7860.00 5535.00 l  7860.50 5625.50 l 7860.00 5715.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
/Courier-Bold findfont 255.00 scalefont setfont
8100 3600 m
gs 1 -1 sc (bc     L1) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6900 2925 m
gs 1 -1 sc (VLIW1:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6900 1800 m
gs 1 -1 sc (VLIW1:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8102 4577 m
gs 1 -1 sc (add    r1,r2,r3) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6750 5400 m
gs 1 -1 sc (b VLIW2) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
4725 5325 m
gs 1 -1 sc (VLIW2:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6900 4200 m
gs 1 -1 sc (VLIW1:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
5625 10800 m
gs 1 -1 sc (bc     L2) col-1 show gr
/Times-BoldItalic findfont 360.00 scalefont setfont
11175 2400 m
gs 1 -1 sc (1) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
/Times-BoldItalic findfont 360.00 scalefont setfont
11100 3450 m
gs 1 -1 sc (2) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
/Times-BoldItalic findfont 360.00 scalefont setfont
11100 5250 m
gs 1 -1 sc (3) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
/Times-Italic findfont 255.00 scalefont setfont
6600 1350 m
gs 1 -1 sc (Translated VLIW Code) col-1 show gr
/Times-BoldItalic findfont 255.00 scalefont setfont
1200 2100 m
gs 1 -1 sc (2\)) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8100 4950 m
gs 1 -1 sc (bc     L1) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
5400 5025 m
gs 1 -1 sc (xor r63,r5,r6) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8103 6828 m
gs 1 -1 sc (add    r1,r2,r3) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
4726 7576 m
gs 1 -1 sc (VLIW2:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6901 6451 m
gs 1 -1 sc (VLIW1:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
5400 7275 m
gs 1 -1 sc (xor r63,r5,r6) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8100 7200 m
gs 1 -1 sc (bc     L1) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8104 9153 m
gs 1 -1 sc (add    r1,r2,r3) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
4727 9901 m
gs 1 -1 sc (VLIW2:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6902 8776 m
gs 1 -1 sc (VLIW1:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
5400 9600 m
gs 1 -1 sc (xor r63,r5,r6) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8100 9525 m
gs 1 -1 sc (bc     L1) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
2400 2106 m
gs 1 -1 sc (bc     L1) col-1 show gr
/Times-Italic findfont 255.00 scalefont setfont
2400 1350 m
gs 1 -1 sc (Original PowerPC Code) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
2401 2401 m
gs 1 -1 sc (sli    r12,r1,3) col-1 show gr
/Times-BoldItalic findfont 255.00 scalefont setfont
1201 2401 m
gs 1 -1 sc (3\)) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
5627 5927 m
gs 1 -1 sc (r4=r63) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
2401 2713 m
gs 1 -1 sc (xor    r4,r5,r6) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
2401 3019 m
gs 1 -1 sc (and    r8,r4,r7) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
2401 3325 m
gs 1 -1 sc (bc     L2) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
2401 3631 m
gs 1 -1 sc (b      OFFPAGE) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
2401 3937 m
gs 1 -1 sc (sub    r9,r10,r11) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
2401 4243 m
gs 1 -1 sc (b      OFFPAGE) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
2401 4549 m
gs 1 -1 sc (cntlz  r11,r4) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
2401 4855 m
gs 1 -1 sc (b      OFFPAGE) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
1801 3901 m
gs 1 -1 sc (L1:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
1801 4576 m
gs 1 -1 sc (L2:) col-1 show gr
/Times-BoldItalic findfont 255.00 scalefont setfont
1201 2701 m
gs 1 -1 sc (4\)) col-1 show gr
/Times-BoldItalic findfont 255.00 scalefont setfont
1201 3001 m
gs 1 -1 sc (5\)) col-1 show gr
/Times-BoldItalic findfont 255.00 scalefont setfont
1201 3301 m
gs 1 -1 sc (6\)) col-1 show gr
/Times-BoldItalic findfont 255.00 scalefont setfont
1201 3601 m
gs 1 -1 sc (7\)) col-1 show gr
/Times-BoldItalic findfont 255.00 scalefont setfont
1201 3901 m
gs 1 -1 sc (8\)) col-1 show gr
/Times-BoldItalic findfont 255.00 scalefont setfont
1201 4201 m
gs 1 -1 sc (9\)) col-1 show gr
/Times-BoldItalic findfont 255.00 scalefont setfont
1126 4801 m
gs 1 -1 sc (11\)) col-1 show gr
/Times-BoldItalic findfont 255.00 scalefont setfont
1125 4500 m
gs 1 -1 sc (10\)) col-1 show gr
/Times-BoldItalic findfont 360.00 scalefont setfont
11101 10726 m
gs 1 -1 sc (6) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
5626 10575 m
gs 1 -1 sc (and r8,r63,r7) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
5625 8250 m
gs 1 -1 sc (and r8,r63,r7) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6750 9900 m
gs 1 -1 sc (b VLIW2) col-1 show gr
$F2psEnd
restore
%%EndDocument
 @endspecial 910 w @beginspecial 0 @llx 0 @lly 461 @urx
635 @ury 1944 @rwi 2376 @rhi @setspecial
%%BeginDocument: fig/p2v-2.eps
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {} def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-270.0 708.0 translate
1 -1 scale

/clp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/l {lineto} bind def
/m {moveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
 0.06000 0.06000 sc
/Courier-Bold findfont 255.00 scalefont setfont
6302 3751 m
gs 1 -1 sc (and r8,r63,r7) col-1 show gr
15.000 slw
% Polyline
n 5704 7053 m 6004 7053 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
6154 7128 m
gs 1 -1 sc (and r8,r63,r7) col-1 show gr
% Polyline
n 5781 10355 m 6081 10355 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
6231 10430 m
gs 1 -1 sc (and r8,r63,r7) col-1 show gr
% Polyline
n 5855 3454 m 6155 3454 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
6305 3529 m
gs 1 -1 sc (r4=r63) col-1 show gr
% Polyline
n 5707 6831 m 6007 6831 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
6157 6906 m
gs 1 -1 sc (r4=r63) col-1 show gr
% Polyline
n 5783 10132 m 6083 10132 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
6233 10207 m
gs 1 -1 sc (r4=r63) col-1 show gr
% Ellipse
n 8319 11552 225 225 0 360 DrawEllipse gs col-1 s gr

/Times-BoldItalic findfont 360.00 scalefont setfont
8331 11706 m
gs 1 -1 sc (11) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
% Ellipse
n 9081 10938 225 225 0 360 DrawEllipse gs col-1 s gr

/Times-BoldItalic findfont 360.00 scalefont setfont
9076 11101 m
gs 1 -1 sc (10) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
% Ellipse
n 10718 6527 225 225 0 360 DrawEllipse gs col-1 s gr

/Times-BoldItalic findfont 360.00 scalefont setfont
10730 6681 m
gs 1 -1 sc (9) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
% Ellipse
n 11693 6076 225 225 0 360 DrawEllipse gs col-1 s gr

/Times-BoldItalic findfont 360.00 scalefont setfont
11705 6230 m
gs 1 -1 sc (8) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
% Ellipse
n 11764 2997 225 225 0 360 DrawEllipse gs col-1 s gr

% Polyline
n 6600 1425 m 8925 1425 l  gs col-1 s gr 
% Polyline
n 5932 9906 m 5932 10506 l  gs col-1 s gr 
30.000 slw
% Polyline
n 7500 4200 m 6750 4200 l  gs col-1 s gr 
n 7110.00 4290.00 m 6750.00 4200.00 l 7110.00 4110.00 l  7110.50 4200.50 l 7110.00 4290.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
% Polyline
n 12150 5475 m 12150 5475 l gs col-1 s gr
% Polyline
n 12075 5475 m 12075 5475 l gs col-1 s gr
15.000 slw
% Polyline
n 6001 3751 m 6001 3826 l  5626 4126 l  gs col-1 s gr 
% Polyline
n 6001 3826 m 6376 4126 l  gs col-1 s gr 
% Polyline
n 8479 2628 m 8104 2853 l  gs col-1 s gr 
% Polyline
n 8479 2628 m 8854 2853 l  gs col-1 s gr 
% Polyline
n 8480 2029 m 8480 2629 l  gs col-1 s gr 
% Polyline
n 8330 2254 m 8630 2254 l  gs col-1 s gr 
% Polyline
n 6004 3153 m 6004 3753 l  gs col-1 s gr 
% Polyline
	[100.0] 0 setdash
n 5402 4425 m 11402 4425 l  gs col-1 s gr 	[] 0 setdash
% Polyline
n 8100 2700 m 8400 2700 l  gs col-1 s gr 
% Polyline
n 5853 7128 m 5853 7203 l  5478 7503 l  gs col-1 s gr 
% Polyline
n 5853 7203 m 6228 7503 l  gs col-1 s gr 
% Polyline
n 5856 6530 m 5856 7130 l  gs col-1 s gr 
% Polyline
	[100.0] 0 setdash
n 5254 7802 m 11254 7802 l  gs col-1 s gr 	[] 0 setdash
30.000 slw
% Polyline
n 11625 5700 m 11025 5700 l  gs col-1 s gr 
n 11385.00 5790.00 m 11025.00 5700.00 l 11385.00 5610.00 l  11385.50 5700.50 l 11385.00 5790.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
% Polyline
n 10426 9451 m 10426 9451 l gs col-1 s gr
15.000 slw
% Polyline
n 8407 8181 m 8407 8781 l  gs col-1 s gr 
% Polyline
n 8257 8406 m 8557 8406 l  gs col-1 s gr 
% Polyline
n 8026 9226 m 8326 9226 l  gs col-1 s gr 
% Polyline
n 8401 8776 m 8026 9376 l  gs col-1 s gr 
% Polyline
n 8401 8776 m 8776 9376 l  gs col-1 s gr 
% Polyline
n 8551 9226 m 8851 9226 l  gs col-1 s gr 
% Polyline
n 5925 10500 m 5325 11100 l  gs col-1 s gr 
% Polyline
n 5925 10500 m 6600 11100 l  gs col-1 s gr 
% Polyline
n 5852 3676 m 6152 3676 l  gs col-1 s gr 
% Polyline
n 6300 10950 m 6600 10950 l  gs col-1 s gr 
/Courier-Bold findfont 255.00 scalefont setfont
8550 6225 m
gs 1 -1 sc (b OFFPAGE) col-1 show gr
% Polyline
n 5850 3225 m 6150 3225 l  gs col-1 s gr 
% Polyline
n 5700 6600 m 6000 6600 l  gs col-1 s gr 
% Polyline
n 5775 9900 m 6075 9900 l  gs col-1 s gr 
30.000 slw
% Polyline
n 10350 6075 m 10350 6075 l gs col-1 s gr
15.000 slw
% Polyline
n 8331 4805 m 8331 5405 l  gs col-1 s gr 
% Polyline
n 8181 5030 m 8481 5030 l  gs col-1 s gr 
% Polyline
n 7950 5850 m 8250 5850 l  gs col-1 s gr 
% Polyline
n 8325 5400 m 7950 6000 l  gs col-1 s gr 
% Polyline
n 8325 5400 m 8700 6000 l  gs col-1 s gr 
% Polyline
n 8475 5850 m 8775 5850 l  gs col-1 s gr 
30.000 slw
% Polyline
n 9301 11625 m 8701 11625 l  gs col-1 s gr 
n 9061.00 11715.00 m 8701.00 11625.00 l 9061.00 11535.00 l  9061.50 11625.50 l 9061.00 11715.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
% Polyline
n 10125 10950 m 9525 10950 l  gs col-1 s gr 
n 9885.00 11040.00 m 9525.00 10950.00 l 9885.00 10860.00 l  9885.50 10950.50 l 9885.00 11040.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
% Polyline
n 10575 6150 m 10050 6150 l  gs col-1 s gr 
n 10410.00 6240.00 m 10050.00 6150.00 l 10410.00 6060.00 l  10410.50 6150.50 l 10410.00 6240.00 l clp gs 0.00 setgray ef gr gs col-1 s gr
/Times-Italic findfont 255.00 scalefont setfont
6600 1350 m
gs 1 -1 sc (Translated VLIW Code) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
5331 9830 m
gs 1 -1 sc (VLIW2:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
4500 11325 m
gs 1 -1 sc (b OFFPAGE) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8780 2329 m
gs 1 -1 sc (add    r1,r2,r3) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
5403 3077 m
gs 1 -1 sc (VLIW2:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
7578 1952 m
gs 1 -1 sc (VLIW1:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
4875 4350 m
gs 1 -1 sc (b OFFPAGE) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6075 2700 m
gs 1 -1 sc (xor r63,r5,r6) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8775 2700 m
gs 1 -1 sc (bc     L1) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
4727 7727 m
gs 1 -1 sc (b OFFPAGE) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
5255 6454 m
gs 1 -1 sc (VLIW2:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8707 8481 m
gs 1 -1 sc (add    r1,r2,r3) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
7505 8104 m
gs 1 -1 sc (VLIW1:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
7126 9601 m
gs 1 -1 sc (b VLIW2) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6226 9151 m
gs 1 -1 sc (xor r63,r5,r6) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8701 8776 m
gs 1 -1 sc (bc     L1) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
7425 3075 m
gs 1 -1 sc (b VLIW2) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6301 3976 m
gs 1 -1 sc (bc L2) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6153 7353 m
gs 1 -1 sc (bc L2) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6225 10725 m
gs 1 -1 sc (bc L2) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6300 3300 m
gs 1 -1 sc (sli r12,r1,3) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6150 6675 m
gs 1 -1 sc (sli r12,r1,3) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6225 9975 m
gs 1 -1 sc (sli r12,r1,3) col-1 show gr
/Times-BoldItalic findfont 360.00 scalefont setfont
11776 3151 m
gs 1 -1 sc (7) dup stringwidth pop 2 div neg 0 rmoveto  col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8631 5105 m
gs 1 -1 sc (add    r1,r2,r3) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
7429 4728 m
gs 1 -1 sc (VLIW1:) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
7050 6225 m
gs 1 -1 sc (b VLIW2) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6150 5775 m
gs 1 -1 sc (xor r63,r5,r6) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8625 5400 m
gs 1 -1 sc (bc     L1) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8700 5775 m
gs 1 -1 sc (sub r9,r10,r11) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8776 9151 m
gs 1 -1 sc (sub r9,r10,r11) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6750 11025 m
gs 1 -1 sc (cntlz r11,r63) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
6525 11400 m
gs 1 -1 sc (b OFFPAGE) col-1 show gr
/Courier-Bold findfont 255.00 scalefont setfont
8700 9675 m
gs 1 -1 sc (b OFFPAGE) col-1 show gr
$F2psEnd
restore
%%EndDocument
 @endspecial 158 1098 a Fh(Figure)13 b(7.)e(Example)g(of)h(con)n(ver)o
(sion)h(fr)o(om)f Fo(P)l(owerPC)i Fh(code)e(to)g(VLIW)f(tree)h
(instructions.)31 1240 y Fn(or)g(from)g(the)h(current)f(directory)m(,)g
(just)h(as)h(is)f(the)g(case)h(with)e Fk(daisy.config)p
Fn(.)17 b(The)c(cache)h(and)f(TLB)h(sim-)31 1306 y(ulation)19
b(functions)g(are)h(the)g(same)g(and)f(are)h(mostly)g(in)f(the)h
(\002le)f Fk(cache)p 1381 1306 15 2 v 18 w(simul.c)p
Fn(.)37 b(The)20 b(TLB')m(s)h(just)31 1372 y(look)16
b(like)h(an)g(independent)f(cache)i(hierarchy)e(with)h(4K)f(lines.)30
b(Cache)18 b(statistics)g(are)f(written)f(to)h(the)g(\002le)31
1438 y Fk(cache.out)p Fn(,)12 b(while)g(TLB)h(statistics)g(are)g
(written)e(to)h(the)h(\002le)f Fk(tlb.out)p Fn(.)-91
1578 y Fl(4)59 b(D)n(AISY)16 b(Scheduling)f(Algorithm)-41
1703 y Fn(The)d(scheduling)g(algorithm)f(is)h(at)g(the)g(heart)g(of)g
Fp(D)n(AISY)g Fn(translation)f(from)g Fo(P)l(owerPC)j
Fn(code)e(to)g(VLIW)g(code,)h(as)-91 1769 y(it)e(is)g(the)g(basic)h
(mechanism)f(for)f(e)o(xtracting)h(instruction)g(le)o(v)o(el)g
(parallelism)f(from)g Fo(P)l(owerPC)j Fn(code.)j(The)c(algorithm)-91
1835 y(is)i(illustrated)f(in)g(Figure)g(7.)20 b(A)14
b(detailed)g(description)f(of)g(why)g(each)i(scheduling)e(step)h(is)g
(performed)f(is)h(contained)-91 1901 y(in)e(Figure)g(8.)j(Ho)o(we)o(v)o
(er)n(,)e(there)f(are)g(three)g(major)g(points:)-19 2009
y Fm(\017)25 b Fn(Operations)14 b(1\22611)h(of)f(the)h(original)f
Fo(P)l(owerPC)i Fn(code)f(are)g(scheduled)g(in)g(sequence)g(into)g
(VLIW')m(s.)23 b(It)15 b(turns)31 2075 y(out)d(that)g(two)g(VLIW')m(s)g
(suf)o(\002ce)g(for)g(these)h(11)f(instructions.)-19
2183 y Fm(\017)25 b Fn(Operations)13 b(are)g(always)f(added)i(to)f(the)
g(end)g(of)g(the)g(last)h(VLIW)f(on)g(the)h(current)e(path.)18
b(If)13 b(input)g(data)g(for)f(an)31 2249 y(operation)g(are)h(a)o(v)o
(ailable)f(prior)g(to)g(the)h(end)g(of)g(the)f(last)h(VLIW)-5
b(,)14 b(then)f(the)g(operation)f(is)h(performed)e(as)j(early)31
2315 y(as)h(possible)g(with)g(the)g(result)f(placed)h(in)g(a)g(renamed)
g(re)o(gister)f(\(that)h(is)g(not)f(architected)h(in)g(the)g
Fo(P)l(owerPC)p Fn(\).)31 2382 y(The)e(renamed)g(re)o(gister)f(is)h
(then)g(copied)g(to)f(the)h(original)f Fo(P)l(owerPC)j
Fn(re)o(gister)d(at)h(the)g(end)g(of)f(the)h(last)g(VLIW)-5
b(.)31 2448 y(This)16 b(is)g(illustrated)g(by)f(the)h
Fk(xor)g Fn(instruction)f(in)h(step)g(4,)h(whose)f(result)g(is)g
(renamed)g(to)g Fk(r63)f Fn(in)h(VLIW1,)31 2514 y(then)c(copied)g(to)g
(the)g(original)g(destination)g Fk(r4)g Fn(in)g(VLIW2.)k(By)c(ha)o
(ving)g(the)g(result)g(a)o(v)o(ailable)g(early)g(in)g
Fk(r63)p Fn(,)31 2580 y(later)h(instructions)f(can)i(be)f(mo)o(v)o(ed)g
(up.)18 b(F)o(or)13 b(e)o(xample,)h(the)f Fk(cntlz)g
Fn(in)g(step)g(11)g(can)h(use)g(the)f(result)g(in)g Fk(r63)31
2647 y Fn(before)e(it)g(has)h(been)g(copied)f(to)g Fk(r4)p
Fn(.)16 b(\(Note)11 b(that)g(the)h(scheduler)f(assumes)i(the)e
(parallel)g(semantics)h(described)915 2787 y(16)p eop
%%Page: 17 17
17 16 bop 47 2400 a @beginspecial 57 @llx 57 @lly 581
@urx 756 @ury 5760 @rhi @setspecial
%%BeginDocument: texfig/p2v-txt.eps
%DVIPSCommandLine: /usr/local/bin/TeX/dvips519 -E -o p2v-txt.eps
%+ p2v-txt
%DVIPSSource:  TeX output 1996.07.30:1345
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR matrix currentmatrix dup dup 4 get round 4 exch put dup dup 5 get
round 5 exch put setmatrix}N /@landscape{/isls true N}B /@manualfeed{
statusdict /manualfeed true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0
0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn
begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N string /base X
array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N end dup{/foo
setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{/sf 1 N /fntrx
FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]N df-tail}B /E{
pop nn dup definefont setfont}B /ch-width{ch-data dup length 5 sub get}
B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128 ch-data dup
length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127 sub}B
/ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp
0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2
index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff
ch-yoff ch-height sub ch-xoff ch-width add ch-yoff setcachedevice
ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff .1 add]{
ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}if nn
/base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup length 1
sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{cc 1 add D
}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin 0 0
moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul add
.99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage
userdict /eop-hook known{eop-hook}if}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 -.1 TR 1 1 scale rulex ruley
false RMat{BDot}imagemask grestore}}{{gsave TR -.1 -.1 TR rulex ruley
scale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave
transform round exch round exch itransform moveto rulex 0 rlineto 0
ruley neg rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta
0 N /tail{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}
B /c{-4 M}B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{
3 M}B /k{4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p
-1 w}B /q{p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{
3 2 roll p a}B /bos{/SS save N}B /eos{SS restore}B end
TeXDict begin 40258437 52099154 1000 300 300
(/u/erik/papers/daisy/texfig/p2v-txt.dvi)
@start /Fa 31 122 df<1C3C3C3C3C0C1818383060C080060D7D840D>44
D<0000180000003800000038000000780000007C000000FC000000FC000001BC000001BC
0000033C0000063C0000063C00000C3C00000C3C0000183C0000183C0000303C0000303C
0000603C0000FFFC0000FFFC0001803C0001803C0003003E0003001E0006001E000E001E
007FC1FFC0FF81FFC01A1D7E9C1F>65 D<0003F020001FF860007C0CE000F007C001E003
C0038003C0070003C00F0001801E0001801E0001803C0001803C00030078000000780000
0078000000F0000000F0000000F0000000F0000000F0000C00F0000C00F0000C00F00018
007000180078003000380060001C00C0001F03800007FE000001F800001B1E7A9C1E>67
D<01FFFFF001FFFFF0003C01F0003C0060003C0060003C00600078006000781860007818
600078186000F0300000F0700000FFF00000FFF00001E0600001E0600001E0600001E060
C003C0C18003C0018003C0030003C003000780060007800E0007801C0007807C00FFFFFC
00FFFFF8001C1C7E9B1C>69 D<0003F020001FF860007C0CE000F007C001E003C0038003
C0070003C00F0001801E0001801E0001803C0001803C0003007800000078000000780000
00F0000000F0000000F003FFC0F003FF80F0003C00F0003C00F0003C00F0003C00700078
0078007800380078001C00F8001F03B00007FF100001F800001B1E7A9C20>71
D<01FFE7FF8001FFE7FF80003C00F000003C00F000003C00F000003C00F000007801E000
007801E000007801E000007801E00000F003C00000F003C00000FFFFC00000FFFFC00001
E007800001E007800001E007800001E007800003C00F000003C00F000003C00F000003C0
0F000007801E000007801E000007801E000007801E0000FFF3FFC000FFF3FFC000211C7E
9B1F>I<01FFE001FFE0003C00003C00003C00003C0000780000780000780000780000F0
0000F00000F00000F00001E00001E00001E00001E00003C00003C00003C00003C0000780
00078000078000078000FFF000FFF000131C7E9B10>I<01FFF001FFF0003C00003C0000
3C00003C0000780000780000780000780000F00000F00000F00000F00001E00001E00001
E00001E00603C00C03C00C03C01C03C0180780380780380780700781F0FFFFE0FFFFE017
1C7E9B1A>76 D<01FFFE0001FFFF80003C03C0003C01E0003C01E0003C01E0007801E000
7801E0007801E0007801C000F003C000F0038000F0070000F01E0001FFFC0001FFF00001
E0000001E0000003C0000003C0000003C0000003C0000007800000078000000780000007
800000FFF00000FFF000001B1C7E9B1C>80 D<01FFFC0001FFFF00003C0780003C03C000
3C03C0003C03C0007803C0007803C0007803C00078078000F0078000F00F0000F03E0000
FFF80001FFF00001E0780001E03C0001E03C0003C03C0003C03C0003C03C0003C03C0007
8078000780780007807860078078C0FFF038C0FFF03F8000000F001B1D7E9B1E>82
D<1FFFFFC01FFFFFC03C0F03C0300F0180700F0180600F0180601E0180C01E0180C01E01
80C01E0180003C0000003C0000003C0000003C0000007800000078000000780000007800
0000F0000000F0000000F0000000F0000001E0000001E0000001E0000001E000007FFF00
007FFF00001A1C799B1E>84 D<03CC07FC0E7C183C3838303870387038E070E070E070E0
71E0E3E0E3E1E363E67E7C3C3810127B9115>97 D<3F007F000F000E000E000E000E001C
001C001C001C0039C03FE03E7038307838703870387038E070E070E070E060E0E0E0C0E1
C063807F003C000D1D7B9C13>I<01F007F80E181C3C3878303070007000E000E000E000
E000E000E010E03870F03FC01F000E127B9113>I<001F80003F80000780000700000700
000700000700000E00000E00000E00000E0003DC0007FC000E7C00183C00383800303800
703800703800E07000E07000E07000E07100E0E300E0E300E1E30063E6007E7C003C3800
111D7B9C15>I<01E007F80E181C183818701870707FE0FF80E000E000E000E000E01060
3870F03FC01F000D127B9113>I<0003C00007E0000CF0001DE0001CC0001C0000380000
380000380000380000380003FF8007FF8000700000700000700000700000E00000E00000
E00000E00000E00001C00001C00001C00001C00001C00003800003800003800003800007
0000670000F60000FE0000FC00007800001425819C0D>I<00798000FF8001CF80030780
0707000607000E07000E07001C0E001C0E001C0E001C0E001C1C001C1C001C3C000C7C00
0FF80007B800003800003800007000607000F0E000F1E000FF80007F0000111A7E9113>
I<0FC0001FC00003C0000380000380000380000380000700000700000700000700000E78
000FFC000F8E000F0E001E0E001C0E001C0E001C0E00381C00381C00381C003838407038
C07038C0707180707180E03F00601E00121D7D9C15>I<00C001E001C001800000000000
000000000000000E003F0033806380C700C70007000E000E000E001C001C4038C038C038
C039803F001E000B1C7D9B0D>I<1F803F80078007000700070007000E000E000E000E00
1C001C001C001C0038003800380038007000700070007200E600E600E600E6007C003800
091D7C9C0B>108 D<1E1E003F7F0067E38063C380C78380C703800703800703800E0700
0E07000E07000E0E101C0E301C0E301C1C601C1C60380FC018078014127D9117>110
D<01E007F80E1C1C1C380C300E700E700EE01CE01CE01CE038E038E070E06071C03F801E
000F127B9115>I<0787000FDF8019F9C018E0C031E0E031C0E001C0E001C0E00381C003
81C00381C0038180070380070300078700078E000EFC000E70000E00000E00001C00001C
00001C00001C0000FF8000FF8000131A7F9115>I<1E3C3F7E67C36387C78FC70F070607
000E000E000E000E001C001C001C001C003800180010127D9112>114
D<01F007F80E180E3C1C781C301E001FC00FE007F000F020787070F070F070E0E07FC01F
000E127D9111>I<00C001C001C001C00380038003800380FFE0FFE0070007000E000E00
0E000E001C001C001C001C203860386038C038C01F800F000B1A7D990E>I<0F01801F83
80338380638380638700C387000707000707000E0E000E0E000E0E000E0E200C1C601C1C
600C1C600E3CC00FEF8003C70013127D9116>I<0F031F87338763836383C38307030703
0E060E060E060E040E0C1C0C0E180E3007E003C010127D9113>I<0F00C1801F81C38033
81C3806381C18063838180C383818007038180070381800E0703000E0703000E0703000E
0702000E0706000E0E06000E0F0C000E1F180007F3F80003E1E00019127D911C>I<0F01
801F8380338380638380638700C387000707000707000E0E000E0E000E0E000E0E000C1C
001C1C000C1C000E3C000FF80003F80000380000380030700078600078E00071C0003F80
001E0000111A7D9114>121 D E /Fb 2 63 df<0000038000000F0000003C000000F000
0003C000000F0000003C000000F0000003C000000F0000003C000000F0000000F0000000
3C0000000F00000003C0000000F00000003C0000000F00000003C0000000F00000003C00
00000F000000038019187D9520>60 D<E0000000780000001E0000000780000001E00000
00780000001E0000000780000001E0000000780000001E00000007800000078000001E00
000078000001E00000078000001E00000078000001E00000078000001E00000078000000
E000000019187D9520>62 D E /Fc 3 104 df<C00060E000E07001C03803801C07000E
0E00071C0003B80001F00000E00000E00001F00003B800071C000E0E001C070038038070
01C0E000E0C0006013147A9320>2 D<001F007F00F001E001C001C001C001C001C001C0
01C001C001C001C001C001C001C003800700FE00F800FE000700038001C001C001C001C0
01C001C001C001C001C001C001C001C001C001E000F0007F001F10297E9E15>102
D<F800FF000F8003C001C001C001C001C001C001C001C001C001C001C001C001C001C000
E000F0003F001F003F00F000E001C001C001C001C001C001C001C001C001C001C001C001
C001C003C00F80FF00F80010297E9E15>I E /Fd 41 123 df<00E001E007C007000F00
1E003C0038007800700070007000F000E000E000E000E000E000E000E000F00070007000
7000780038003C001E000F00070007C001E000E00B217A9C16>40
D<E000F0007C001C001E000F000780038003C001C001C001C001E000E000E000E000E000
E000E000E001E001C001C001C003C0038007800F001E001C007C00F000E0000B217C9C16
>I<387C7E7E3E0E1E3C7CF860070B798416>44 D<70F8F8F8700505788416>46
D<03E0000FF8001FFC001E3C00380E00780F00700700700700E00380E00380E00380E003
80E00380E00380E00380E00380F00780700700700700780F003C1E001E3C001FFC000FF8
0003E00011197E9816>48 D<01800380078007801F807F80FF8073800380038003800380
03800380038003800380038003800380038003807FF87FFC7FF80E197C9816>I<07E000
1FF8007FFE00783F00F00F00F00780F00380F00380000380000380000780000700000F00
001E00003C0000780000F00003E0000780000F00001E03803C03807FFF80FFFF807FFF80
11197E9816>I<07E0001FFC007FFE00781F00780F00780700000700000F00000F00003E
0007FC0007F80007FC00001E00000700000780000380000380F00380F00780F00700F81F
007FFE003FFC0007E00011197E9816>I<007C0000FC0000DC0001DC00039C00039C0007
1C000F1C000E1C001E1C003C1C00381C00781C00F01C00FFFFE0FFFFE0FFFFE0001C0000
1C00001C00001C00001C0001FFC001FFC001FFC013197F9816>I<3FFE003FFE003FFE00
3800003800003800003800003800003800003800003FF0003FFC003FFE003C0F00300700
000780000380600380F00380F00780F00F00F81F007FFE001FF80007E00011197E9816>
I<00F80003FE000FFF001F0F003E0F003C0F00780600700000F00000F7F800FFFE00FFFE
00F80F00F00780F00780E00380F00380F00380700380780780780F003C1F001FFE000FF8
0003E00011197E9816>I<E00000FFFF80FFFF80FFFF80E00F00E01E00003C0000380000
780000700000F00000E00001E00001C00003C00003800003800003800007800007000007
0000070000070000070000070000070000111A7E9916>I<07F0001FFC003FFE007C1F00
F00780E00380E00380E003807007007C1F001FFC0007F0001FFC003C1E00700700F00780
E00380E00380E00380F007807007007C1F003FFE001FFC0007F00011197E9816>I<03E0
000FF8003FFC007C1E00780F00F00700E00700E00780E00780E00380F00780F00780780F
803FFF803FFF800FF380000780000700300F00780E00781E00787C007FF8003FE0000F80
0011197E9816>I<00E00001F00001F00001B00001B00003B80003B80003B80003180007
1C00071C00071C00071C00071C000E0E000E0E000FFE000FFE001FFF001C07001C07001C
07007F1FC0FF1FE07F1FC013197F9816>65 D<7FFFC0FFFFC07FFFC01C01C01C01C01C01
C01C01C01C00001C00001C1C001C1C001FFC001FFC001FFC001C1C001C1C001C00001C00
E01C00E01C00E01C00E01C00E07FFFE0FFFFE07FFFE013197F9816>69
D<FFFFE0FFFFE0FFFFE01C00E01C00E01C00E01C00E01C00001C00001C1C001C1C001FFC
001FFC001FFC001C1C001C1C001C00001C00001C00001C00001C00001C0000FF8000FFC0
00FF800013197F9816>I<03E30007FF001FFF003E1F003C0F00780F00780700700700F0
0000E00000E00000E00000E00000E03F80E07FC0E03F80F00700700700780F00780F003C
0F003E1F001FFF0007FF0003E70012197E9816>I<FFFEFFFEFFFE038003800380038003
8003800380038003800380038003800380038003800380038003800380FFFEFFFEFFFE0F
197D9816>73 D<FFC000FFC000FFC0001C00001C00001C00001C00001C00001C00001C00
001C00001C00001C00001C00001C00001C00001C00001C00401C00E01C00E01C00E01C00
E0FFFFE0FFFFE0FFFFE013197F9816>76 D<1FFC003FFE007FFF00780F00F00780E00380
E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380E00380
E00380F00780F00780780F007FFF003FFE001FFC0011197E9816>79
D<7FF800FFFE007FFF001C0F801C03801C03C01C01C01C01C01C01C01C03C01C03801C0F
801FFF001FFE001FF8001C00001C00001C00001C00001C00001C00001C00007F0000FF80
007F000012197F9816>I<FE0FE0FF1FE0FE0FE03803801C07001C07001C07001C07000E
0E000E0E000E0E000E0E00060C00071C00071C00071C00071C0003180003B80003B80003
B80001B00001F00001F00000E00013197F9816>86 D<FC07E0FE0FE0FC07E07001C07001
C07001C030018038038038038038038038E38039F38039F38039B38019B30019B30019B3
0019B30019B30019B3001913001B1B000F1E000F1E000E0E0013197F9816>I<FFF0FFF0
FFF0E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000
E000E000E000E000E000E000E000E000E000FFF0FFF0FFF00C20789C16>91
D<FFF0FFF0FFF00070007000700070007000700070007000700070007000700070007000
7000700070007000700070007000700070007000700070FFF0FFF0FFF00C207F9C16>93
D<1FE0007FF8007FFC00783C00301E00000E00003E0007FE003FFE007FCE00F80E00E00E
00E00E00F01E00F83E007FFFE03FF7E00FC3E013127E9116>97 D<7E0000FE00007E0000
0E00000E00000E00000E00000E3E000EFF800FFFC00F83E00F01E00F00F00E00F00E0070
0E00700E00700E00700F00F00F00E00F81E00F83C00FFFC00EFF00067C001419809816>
I<03F80FFE1FFE3C1E780C7000F000E000E000E000E000F000700778073E0F1FFE0FFC03
F010127D9116>I<003F00007F00003F0000070000070000070000070003E7000FFF003F
FF003C1F00780F00700F00F00700E00700E00700E00700E00700F00F00F00F00781F007C
3F003FFFE01FF7F007C7E014197F9816>I<7E0000FE00007E00000E00000E00000E0000
0E00000E7C000FFF000FFF800F87800F03800F03800E03800E03800E03800E03800E0380
0E03800E03800E03800E03807FC7F0FFE7F87FC7F01519809816>104
D<018003C003C0018000000000000000007FC07FC07FC001C001C001C001C001C001C001
C001C001C001C001C001C07FFFFFFF7FFF101A7D9916>I<FFC000FFC000FFC00001C000
01C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C000
01C00001C00001C00001C00001C00001C000FFFF80FFFF80FFFF8011197E9816>108
D<7E7C00FFFF007FFF800F87800F03800F03800E03800E03800E03800E03800E03800E03
800E03800E03800E03807FC7F0FFE7F87FC7F01512809116>110
D<03E0000FF8001FFC003C1E00780F00700700E00380E00380E00380E00380E00380F007
80700700780F003C1E001FFC000FF80003E00011127E9116>I<FF0F80FF3FE0FFFFE007
F1E007E0C007C000078000078000070000070000070000070000070000070000070000FF
FC00FFFC00FFFC0013127F9116>114 D<0FEC3FFC7FFCF03CE01CE01CF0007F801FF007
FC003EE00EE00EF00EF81EFFFCFFF8C7E00F127D9116>I<030000070000070000070000
0700007FFF00FFFF00FFFF00070000070000070000070000070000070000070000070100
07038007038007078007878003FF0003FE0000F80011177F9616>I<7E1F80FE3F807E1F
800E03800E03800E03800E03800E03800E03800E03800E03800E03800E03800E07800F0F
800FFFF007FFF803F3F01512809116>I<7F1FC07F3FC07F1FC00F1C00073C0003B80003
F00001F00000E00001E00001F00003B800073C00071C000E0E007F1FC0FF3FE07F1FC013
127F9116>120 D<3FFFC07FFFC07FFFC0700780700F00701E00003C0000F80001F00003
E00007C0000F00001E01C03C01C07801C0FFFFC0FFFFC0FFFFC012127F9116>122
D E /Fe 55 122 df<003F0000FF8003C1C00703C00703C00E01800E00000E00000E0000
0E00000E0000FFFFC0FFFFC00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C0
0E01C00E01C00E01C00E01C00E01C00E01C07F87F87F87F8151D809C17>12
D<0F0000C01F8001C038E0038070780780607FFF00E037FE00E0300E00E0301C00E03018
00E0303800E0303000E03070006060E0007060C00038C1C0001F8380000F0303C0000707
E0000E0E30000C1C18001C18180038380C0030380C0070380C0060380C00E0380C01C038
0C0180380C0380181807001C1806000E300E0007E00C0003C01E217E9E23>37
D<00C00180030006000E000C001C0018003800300030007000700060006000E000E000E0
00E000E000E000E000E000E000E000E000E000600060007000700030003000380018001C
000C000E0006000300018000C00A2A7D9E10>40 D<C0006000300018001C000C000E0006
00070003000300038003800180018001C001C001C001C001C001C001C001C001C001C001
C001C0018001800380038003000300070006000E000C001C00180030006000C0000A2A7E
9E10>I<70F0F8F8781818183030706040050D7D840C>44 D<FFE0FFE0FFE00B0380890E>
I<70F8F8F87005057D840C>I<03C00FF01C38381C381C700E700E700EF00FF00FF00FF0
0FF00FF00FF00FF00FF00FF00FF00FF00FF00F700E700E700E381C381C1C380FF007E010
1D7E9B15>48 D<030007003F00FF00C70007000700070007000700070007000700070007
0007000700070007000700070007000700070007000700FFF8FFF80D1C7C9B15>I<07C0
1FF03878603C601EF01EF80FF80FF80F700F000F000E001E001C003C0078007000E001C0
038007000E030C03180330067FFEFFFEFFFE101C7E9B15>I<07E01FF03838301C781E78
1E781E381E001E003C0038007007E007E00038001C001E000E000F000F700FF80FF80FF8
0EF01E601C38381FF007C0101D7E9B15>I<001C00001C00003C00007C00007C0000DC00
01DC00019C00039C00071C00061C000E1C000C1C00181C00381C00301C00601C00E01C00
FFFFC0FFFFC0001C00001C00001C00001C00001C00001C0001FFC001FFC0121C7F9B15>
I<300C3FFC3FF83FE030003000300030003000300033E037F03C38381C301E300E000F00
0F000F000F700FF00FF00FE00E601E601C38781FF007C0101D7E9B15>I<00F003FC070C
0E0E1C1E381E380C780070007000F3F0F7F8FC1CF81EF80EF00EF00FF00FF00FF00FF00F
700F700F700E380E381C1C380FF003E0101D7E9B15>I<6000007FFF807FFF807FFF0060
0300C00600C00C00C00C0000180000300000300000600000600000C00000C00001C00001
C00003800003800003800003800007800007800007800007800007800007800007800003
0000111D7E9B15>I<03E00FF01C38381C300E700E700E700E780E781C3E1C3FB81FE007
F00FF81CFC387E701E700FE00FE007E007E007E007700E700C3C3C1FF007E0101D7E9B15
>I<03C00FF01C38381C781C700EF00EF00EF00FF00FF00FF00FF00F700F701F781F383F
1FEF0FCF000E000E000E301C781C7838703030F03FC00F80101D7E9B15>I<70F8F8F870
000000000000000070F8F8F87005127D910C>I<7FFFFFC0FFFFFFE00000000000000000
000000000000000000000000000000000000000000000000FFFFFFE07FFFFFC01B0C7E8F
20>61 D<00060000000F0000000F0000000F0000001F8000001F8000001F8000001F8000
0033C0000033C0000033C0000061E0000061E0000061E00000C0F00000C0F00000C0F000
018078000180780001FFF80003FFFC0003003C0003003C0006001E0006001E0006001E00
1F001F00FFC0FFF0FFC0FFF01C1D7F9C1F>65 D<FFFFC0FFFFF00F00F80F003C0F001C0F
001E0F001E0F001E0F001E0F001C0F003C0F00780FFFF00FFFE00F00F80F003C0F001E0F
001E0F000F0F000F0F000F0F000F0F000F0F001E0F003E0F007CFFFFF8FFFFC0181C7E9B
1D>I<FFF3FFC0FFF3FFC00F003C000F003C000F003C000F003C000F003C000F003C000F
003C000F003C000F003C000F003C000FFFFC000FFFFC000F003C000F003C000F003C000F
003C000F003C000F003C000F003C000F003C000F003C000F003C000F003C000F003C00FF
F3FFC0FFF3FFC01A1C7E9B1F>72 D<FFF0FFF00F000F000F000F000F000F000F000F000F
000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F00FFF0FFF00C
1C7F9B0F>I<FFF800FFF8000F00000F00000F00000F00000F00000F00000F00000F0000
0F00000F00000F00000F00000F00000F00000F00000F00180F00180F00180F00180F0038
0F00300F00700F00F00F01F0FFFFF0FFFFF0151C7E9B1A>76 D<FF00FFC0FF80FFC00F80
1E000FC00C000FC00C000DE00C000CF00C000CF00C000C780C000C780C000C3C0C000C1E
0C000C1E0C000C0F0C000C0F0C000C078C000C07CC000C03CC000C01EC000C01EC000C00
FC000C00FC000C007C000C003C000C003C001E001C00FFC01C00FFC00C001A1C7E9B1F>
78 D<003F800000FFE00003E0F80007803C000E000E001E000F003C0007803800038078
0003C0780003C0700001C0F00001E0F00001E0F00001E0F00001E0F00001E0F00001E0F0
0001E0F00001E0780003C0780003C0780003C03C0007803C0007801E000F000F001E0007
803C0003E0F80000FFE000003F80001B1E7E9C20>I<FFFF80FFFFE00F00F00F00380F00
3C0F001E0F001E0F001E0F001E0F001E0F001E0F003C0F00380F00F00FFFE00FFF800F00
000F00000F00000F00000F00000F00000F00000F00000F00000F0000FFF000FFF000171C
7E9B1C>I<07E0801FF9803C1F80700780700380E00380E00180E00180E00180F00000F0
00007C00007FC0003FF8001FFE0007FF0000FF80000F800003C00003C00001C0C001C0C0
01C0C001C0E00180E00380F00300FC0E00CFFC0083F800121E7E9C17>83
D<7FFFFFC07FFFFFC0780F03C0700F01C0600F00C0E00F00E0C00F0060C00F0060C00F00
60C00F0060000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F00
00000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F000003FFFC
0003FFFC001B1C7F9B1E>I<FFE01FF0FFE01FF00F0007800F0003000F00030007800600
0780060007C00E0003C00C0003C00C0003E01C0001E0180001E0180000F0300000F03000
00F03000007860000078600000786000003CC000003CC000003CC000001F8000001F8000
001F8000000F0000000F0000000F0000000600001C1D7F9B1F>86
D<FFE0FFE1FFFFE0FFE1FF1F001E007C0F001E00300F003F00300F003F00300F803F0070
07806780600780678060078067806003C0E780C003C0C3C0C003C0C3C0C001E0C3C18001
E181E18001E181E18001E181E18000F381F30000F300F30000F300F300007B00F600007E
007E00007E007E00007E007E00003C003C00003C003C00003C003C00001C003800001800
1800281D7F9B2B>I<0FE0001FF8003C3C003C1E00180E00000E00001E0007FE001FFE00
3E0E00780E00F00E00F00E60F00E60F01E60783E603FFFC01F878013127F9115>97
D<FC0000FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C7E
001DFF001F87801E01C01C01E01C00E01C00F01C00F01C00F01C00F01C00F01C00F01C00
E01C01E01E01C01F078019FF00187C00141D7F9C17>I<03F00FF81E3C383C78187000F0
00F000F000F000F000F000780078063C061E0C0FF803E00F127F9112>I<001F80001F80
00038000038000038000038000038000038000038000038000038003E3800FFB801E0F80
380780780380700380F00380F00380F00380F00380F00380F00380700380780380380780
1E1F800FFBF007E3F0141D7F9C17>I<03E00FF01C38381C781E700EFFFEFFFEF000F000
F000F000700078063C061E0C0FF803E00F127F9112>I<007801FC039E071E0E0C0E000E
000E000E000E000E00FFE0FFE00E000E000E000E000E000E000E000E000E000E000E000E
000E000E007FE07FE00F1D809C0D>I<00038007E7C00FFDC03C3DC0381C00781E00781E
00781E00781E00381C003C3C003FF00037E0007000007000003000003FFC001FFF003FFF
80700780E001C0E001C0E001C0E001C07003803C0F001FFE0007F800121C7F9215>I<FC
0000FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C7C001D
FF001F07001E03801E03801C03801C03801C03801C03801C03801C03801C03801C03801C
03801C03801C0380FF9FF0FF9FF0141D7F9C17>I<18003C007C003C0018000000000000
00000000000000FC00FC001C001C001C001C001C001C001C001C001C001C001C001C001C
001C00FF80FF80091D7F9C0C>I<01C003E003E003E001C0000000000000000000000000
0FE00FE000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E0
00E000E000E060E0F1C0F1C07F803E000B25839C0D>I<FC0000FC00001C00001C00001C
00001C00001C00001C00001C00001C00001C00001C7FC01C7FC01C3E001C18001C30001C
60001CC0001DE0001FE0001E70001C78001C38001C3C001C1C001C0E001C0F00FF9FE0FF
9FE0131D7F9C16>I<FC00FC001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C001C001C00FF80FF80091D7F9C0C
>I<FC7E07E000FDFF9FF8001F83B838001E01E01C001E01E01C001C01C01C001C01C01C
001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C00
1C01C01C001C01C01C00FF8FF8FF80FF8FF8FF8021127F9124>I<FC7C00FDFF001F0700
1E03801E03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380
1C0380FF9FF0FF9FF014127F9117>I<03F0000FFC001E1E00380700780780700380F003
C0F003C0F003C0F003C0F003C0F003C07003807807803807001E1E000FFC0003F0001212
7F9115>I<FC7E00FDFF001F87801E03C01C01E01C01E01C00F01C00F01C00F01C00F01C
00F01C00F01C01E01C01E01E03C01F07801DFF001C7C001C00001C00001C00001C00001C
00001C0000FF8000FF8000141A7F9117>I<FDE0FFF01F781E781E301C001C001C001C00
1C001C001C001C001C001C001C00FFC0FFC00D127F9110>114 D<1F903FF07070E030E0
30E030F8007F803FE00FF000F8C038C038E038E038F070DFE08FC00D127F9110>I<0C00
0C000C000C000C001C001C003C00FFE0FFE01C001C001C001C001C001C001C001C001C30
1C301C301C301C301E600FC007800C1A7F9910>I<FC1F80FC1F801C03801C03801C0380
1C03801C03801C03801C03801C03801C03801C03801C03801C03801C07800C0F800FFBF0
03E3F014127F9117>I<FF0FE0FF0FE01C07801C03000E06000E06000E0600070C00070C
00071C0003980003980003F80001F00001F00000E00000E00000E00013127F9116>I<FF
3FCFE0FF3FCFE01C0F07801C0F03001C1F03000E1B06000E1B86000E1B86000E318E0007
31CC000731CC000760CC0003E0F80003E0F80003E0F80001C0700001C0700001C070001B
127F911E>I<7F8FF07F8FF00F0780070600038E0001DC0001D80000F000007000007800
00F80001DC00038E00030E000607000F0380FF8FF8FF8FF81512809116>I<FF0FE0FF0F
E01C07801C03000E06000E06000E0600070C00070C00071C0003980003980003F80001F0
0001F00000E00000E00000E00000C00000C00000C000F18000F18000C700007E00003C00
00131A7F9116>I E end
TeXDict begin

1 0 bop -57 -134 2037 12 v -7 -90 a Fe(The)17 b(con)o(v)o(ersion)g(b)q
(egins)g(b)o(y)g(placing)f(an)g(empt)o(y)g(path)h(whose)g(con)o(tin)o
(uation)f(is)g(instruction)i(1)e(\()p Fd(add)21 b(r1,r2,r3)15
b Fe(as)i(the)-57 -45 y(sole)d(en)o(try)h(in)e(the)i
Fd(PathList)p Fe(.)i(I.e.)i Fd(PathList)12 b Fe(is)i(initially)d
Fc(f)p Fd([\(\),1,1.0])p Fc(g)p Fe(,)g(where)16 b(eac)o(h)e(triple)g
(in)g(the)h Fd(PathList)d Fe(is)i(of)f(the)-57 0 y(form:)19
b Fc(f)p Fb(<)p Fa(List)c(of)h(Instructions)h(in)f(Path)p
Fb(>)p Fa(,)g Fb(<)p Fa(Continuation)h(of)f(Path)p Fb(>)p
Fa(,)h Fb(<)p Fa(R)n(elative)f(Pr)n(ob)n(ability)f(of)h(R)n(e)n(aching)
h(the)f(End)h(of)-57 45 y(This)g(Path)h(Given)f(That)g(Contr)n(ol)g
(Has)g(A)o(rrive)n(d)f(at)i(the)f(Entry)g(Instruction)p
Fb(>)p Fc(g)p Fe(.)26 b(The)17 b Fa(curr)n(ent)g(p)n(ath)g
Fe(is)f(de\014ned)i(to)e(b)q(e)h(the)-57 90 y(highest)d(probabilit)o(y)
e(path)i(in)g(the)g Fd(PathList)p Fe(.)j(Sc)o(heduling)c(then)i(pro)q
(ceeds)h(as)e(follo)o(ws:)2 161 y(1.)22 b(An)d(empt)o(y)g(VLIW)g(\()p
Fd(VLIW1)p Fe(\))g(is)h(created)h(and)e(added)h(to)g(the)g(curren)o(t)h
(path,)g(and)e Fa(PowerPC)g Fe(instruction)h(1,)h Fd(add)57
205 y(r1,r2,r3)p Fe(,)11 b(is)i(inserted)i(in)e(it.)k(The)d(con)o(tin)o
(uation)e(of)h(the)h(curren)o(t)h(path)e(no)o(w)g(b)q(ecomes)g
(instruction)h(2.)k(So)13 b Fd(PathList)57 250 y Fe(is)g
Fc(f)p Fd([\(1\),2,1.0])p Fc(g)p Fe(.)2 314 y(2.)22 b
Fa(PowerPC)13 b Fe(instruction)i(2,)e Fd(bc)22 b(L1)14
b Fe(con)o(v)o(erts)h Fd(VLIW1)e Fe(from)g(a)h(segmen)o(t)g(to)g(a)g
(tree,)h(with)f(the)h(left)f(branc)o(h)g(represen)o(ting)57
359 y(the)19 b(fall-through)d(path)j(of)f Fd(bc)g Fe(and)g(righ)o(t)g
(branc)o(h)h(represen)o(ting)h(its)e(target,)i Fd(L1)e
Fe(\(instruction)h(8\).)31 b(Note)19 b(that)f(the)57
404 y(condition)12 b(for)h Fd(bc)g Fe(has)h(b)q(een)g(computed)f(prior)
g(to)g Fd(VLIW1)p Fe(,)f(and)h(hence)i(the)f Fd(bc)f
Fe(and)g Fd(add)g Fe(can)g(b)q(e)h(executed)i(in)d(parallel,)57
449 y(assuming)g(resource)18 b(constrain)o(ts)e(allo)o(w)d(it.)22
b(Since)16 b(instruction)g(2)f(is)g(a)g(branc)o(h,)g(the)h(curren)o(t)h
(path)e(is)g(remo)o(v)o(ed)g(from)57 494 y Fd(PathList)g
Fe(and)i(t)o(w)o(o)g(new)h(paths)f(are)h(created,)h(one)f(whose)f(con)o
(tin)o(uation)g(is)g(the)h(fall-through)d(instruction)j(3,)f(and)57
538 y(another)e(whose)h(con)o(tin)o(uation)e(is)g(the)i(target)f
Fd(L1)g Fe(\(instruction)g(8\).)21 b(Both)16 b(new)f(paths)g(are)h
(placed)f(in)g(the)g Fd(PathList)p Fe(,)57 583 y(making)c(it)j
Fc(f)p Fd([\(1,2\),3,0.7],)19 b([\(1,2\),8,0.3])p Fc(g)p
Fe(.)c(Assume)g(the)f(branc)o(h)h(of)e(instruction)i(2)f(is)g(guessed)h
(to)f(b)q(e)h(tak)o(en)57 628 y(30\045)e(of)g(the)h(time.)2
692 y(3.)22 b(Since)11 b(the)h(fall-through)d(path)j(is)f(calculated)g
(to)g(ha)o(v)o(e)g(a)f(higher)i(probabilit)o(y)d(it)i(b)q(ecomes)g(the)
h(curren)o(t)h(path.)k Fa(PowerPC)57 737 y Fe(instruction)f(3,)f
Fd(sli)22 b(r12,r1,3)14 b Fe(dep)q(ends)j(on)f(the)g(result)h(of)e
(instruction)h(1,)g Fd(add)21 b(r1,r2,r3)p Fe(.)h(Hence)c(it)d(m)o(ust)
g(go)g(to)57 782 y(a)f(new)i(VLIW.)e(Hence)j Fd(VLIW2)d
Fe(is)h(created)i(on)e(the)g(curren)o(t)i(path,)e(with)g(the)g
(fall-through)f(tip)h(of)f Fd(VLIW1)g Fe(p)q(oin)o(ting)g(to)57
827 y(it.)24 b(The)17 b(con)o(tin)o(uation)e(of)h(the)h(curren)o(t)h
(path)e(is)g(set)h(to)f(instruction)h(4.)25 b Fd(PathList)14
b Fe(b)q(ecomes)j Fc(f)p Fd([\(1,2,3\),4,0.7)o(],)57
871 y([\(1,2\),8,0.3])p Fc(g)p Fe(.)2 935 y(4.)22 b Fa(PowerPC)c
Fe(instruction)i(4,)g Fd(xor)h(r4,r5,r6)d Fe(do)q(es)i(not)g(dep)q(end)
g(on)g(an)o(y)f(result)h(y)o(et)g(pro)q(duced.)36 b(Hence)21
b(it)e(can)g(b)q(e)57 980 y(executed)j(in)e Fd(VLIW1)p
Fe(.)37 b(Ho)o(w)o(ev)o(er,)22 b(in)e(order)h(to)f(main)o(tain)e
(precise)k(exceptions,)h(w)o(e)d(rename)g(the)h(result)g(to)g(regis-)57
1025 y(ter)h Fd(r63)f Fe(\(whic)o(h)g(is)g(not)h(in)f(the)h
Fa(PowerPC)e Fe(arc)o(hitecture\))k(and)d(cop)o(y)g Fd(r63)g
Fe(to)g Fd(r4)g Fe(in)g Fd(VLIW2)p Fe(.)40 b(So)21 b
Fd(PathList)f Fe(=)57 1070 y Fc(f)p Fd([\(1,2,3,4],5,0)o(.7],)e
([\(1,2\),8,0.3])p Fc(g)p Fe(.)32 b(If)19 b(an)g(exception)h(\(sa)o(y)f
(an)h(external)f(in)o(terrupt\))i(o)q(ccurred)g(just)e(b)q(e-)57
1115 y(fore)12 b(executing)h Fd(VLIW2)p Fe(,)d(the)j(em)o(ulated)e
Fa(PowerPC)g Fe(mac)o(hine)g(app)q(ears)i(to)f(ha)o(v)o(e)g(completed)f
(instructions)i(1)f(and)f(2,)h(and)57 1160 y(is)i(at)g(the)h(p)q(oin)o
(t)e(immediately)e(prior)j(to)g(instruction)h(3.)j(The)d(results)g(of)f
(instruction)g(4)g(are)h(still)e(in)h Fd(r63)f Fe(and)h(are)h(not)57
1204 y(y)o(et)f(committed)d(to)j(an)g(arc)o(hitected)h(register,)g(at)f
(the)g(p)q(oin)o(t)f(of)h(the)g(in)o(terrupt.)2 1268
y(5.)22 b Fa(PowerPC)13 b Fe(instruction)i(5,)e Fd(and)21
b(r8,r4,r7)12 b Fe(dep)q(ends)k(on)e(the)h(result)g(of)e(the)i
Fd(xor)p Fe(.)j(Because)e(of)d(our)h(aggressiv)o(e)h(sc)o(hed-)57
1313 y(uling)k(this)h(result)g(can)h(b)q(e)f(used)h(in)f
Fd(VLIW2)f Fe(b)o(y)g(noting)h(that)g(the)g(desired)i(v)n(alue)d(of)g
Fd(r4)h Fe(is)g(in)f Fd(r63)p Fe(,)i(yielding)e Fd(and)57
1358 y(r8,r63,r7)p Fe(.)d(The)e(con)o(tin)o(uation)e(of)h(the)i(curren)
o(t)g(path)e(is)h(set)g(to)g(6.)k Fd(PathList)12 b Fe(b)q(ecomes)h
Fc(f)p Fd([\(1,2,3,4,5\),6,0.7)o(],)57 1403 y([\(1,2\),8,0.3])p
Fc(g)p Fe(.)2 1467 y(6.)22 b Fa(PowerPC)12 b Fe(instruction)i(6,)e
Fd(bc)22 b(L2)13 b Fe(has)g(no)g(data)g(dep)q(endences)j(and)d(hence)i
(can)f(b)q(e)f(sc)o(heduled)i(in)e Fd(VLIW2)f Fe(in)h(a)g(manner)57
1512 y(analogous)18 b(to)h Fd(bc)j(L1)d Fe(b)q(eing)g(sc)o(heduled)i
(in)e Fd(VLIW1)p Fe(.)34 b(But)20 b(w)o(e)g(do)f(not)g(sc)o(hedule)i
(branc)o(hes)g(earlier)f(than)f(the)h(last)57 1556 y(VLIW)e(on)g(a)h
(path,)g(in)f(order)h(to)g(main)o(tain)d(precise)k(in)o(terrupts.)33
b(The)19 b(curren)o(t)h(path)f(is)f(replaced)i(b)o(y)e(t)o(w)o(o)g
(paths:)57 1601 y(one)h(con)o(tin)o(uing)g(with)g(the)h(fall-through)e
(instruction)i(7,)g(and)f(one)h(con)o(tin)o(uing)e(with)h(the)i(target)
e Fd(L2)g Fe(\(instruction)57 1646 y(10\).)31 b(Assume)19
b(this)f(second)i(branc)o(h)f(is)f(also)g(guessed)i(to)e(b)q(e)i(tak)o
(en)e(with)g(30\045)g(probabilit)o(y)m(.)30 b Fd(Pathlist)17
b Fe(b)q(ecomes)57 1691 y Fc(f)p Fd([\(1,2,3,4,5,6])o(,7,0.)o(49\(0.)o
(7)p Fc(\002)p Fd(0.7\)])o(,)i([\(1,2\),8,0.3],)g([\(1,2,3,4,5,6\),10)o
(,0.21)o(\(0.7)p Fc(\002)p Fd(0.)o(3\)])p Fc(g)p Fe(.)2
1755 y(7.)j(Of)11 b(the)h(3)f(paths,)h(the)h(fall-through)c(path)j(of)f
(instruction)h(6,)f(is)g(no)o(w)g(most)g(lik)o(ely)m(,)f(so)h(it)g(b)q
(ecomes)h(the)g(curren)o(t)h(path.)k(Its)57 1800 y(con)o(tin)o(uation)
12 b(is)i Fa(PowerPC)f Fe(instruction)i(7,)e Fd(b)21
b(OFFPAGE)p Fe(.)12 b(It)i(is)g(placed)g(on)g(the)g(left)g(tip)g(of)f
Fd(VLIW2)g Fe(since)h(branc)o(hes)i(are)57 1845 y(sc)o(heduled)h(in)e
(order.)24 b(Since)16 b(this)f(branc)o(h)h(has)g(no)g(onpage)f(con)o
(tin)o(uations,)g(this)h(path)f(is)h(remo)o(v)o(ed)e(from)g
Fd(PathList)p Fe(,)57 1889 y(and)j(the)h(next)g(most)e(probable)h(path)
h(b)q(ecomes)f(the)h(new)g(curren)o(t)h(path.)29 b Fd(Pathlist)15
b Fe(b)q(ecomes)j Fc(f)p Fd([\(1,2\),8,0.3],)57 1934
y([\(1,2,3,4,5,6\),1)o(0,0.)o(21])p Fc(g)p Fe(.)2 1998
y(8.)k(The)c Fa(PowerPC)f Fe(instruction)i(8)e Fd(sub)22
b(r9,r10,r11)p Fe(,)16 b(the)j Fd(L1)e Fe(target,)i(is)f(the)h(con)o
(tin)o(uation)e(of)g(the)i(curren)o(t,)h(highest)57 2043
y(probabilit)o(y)11 b(path.)17 b(This)c(target)g(con)o(tin)o(ues)g
(from)e(the)j(righ)o(t)e(tip)g(of)h Fd(VLIW1)p Fe(,)e(since)j(that)e
(is)h(the)g(lo)q(cation)f(of)g(the)i(branc)o(h)57 2088
y(that)g(inserted)i(it)e(in)g Fd(PathList)p Fe(.)k(This)c
Fd(sub)g Fe(instruction)g(has)h(no)f(data)g(dep)q(endences)k(with)c
(earlier)g(instructions,)h(and)57 2133 y(hence)i(can)g(b)q(e)f(sc)o
(heduled)i(on)e(the)h(righ)o(t)e(tip)h(of)g Fd(VLIW1)p
Fe(.)24 b(The)16 b(con)o(tin)o(uation)f(of)h(the)h(curren)o(t)h(path)e
(b)q(ecomes)g(9,)g(and)57 2178 y Fd(PathList)c Fe(b)q(ecomes)i
Fc(f)p Fd([\(1,2,8\),9,0.3],)k([\(1,2,3,4,5,6\),10,)o(0.21])o
Fc(g)p Fe(.)2 2242 y(9.)k Fa(PowerPC)14 b Fe(instruction)i(9,)f
Fd(b)22 b(OFFPAGE)13 b Fe(is)j(next)f(on)g(the)h(curren)o(t)h(path.)23
b(It)15 b(is)g(handled)g(just)h(lik)o(e)f(instruction)g(7,)g(and)57
2286 y(hence)h(a)e Fd(b)22 b(OFFPAGE)13 b Fe(is)i(placed)g(on)g(the)g
(righ)o(t)g(tip)f(of)g Fd(VLIW1)p Fe(.)20 b(This)15 b(path)g(is)g(then)
g(remo)o(v)o(ed)f(from)f Fd(PathList)p Fe(,)g(whic)o(h)57
2331 y(no)o(w)g(b)q(ecomes)h Fc(f)p Fd([\(1,2,3,4,5,6\),10)o(,0.21)o(])
p Fc(g)p Fe(.)-19 2395 y(10.)22 b(The)17 b(only)f(op)q(en)i(path)f
(remaining)e(in)h(the)i(list)f(is)g(the)g(one)g(that)h(con)o(tin)o(ues)
f(with)g Fa(PowerPC)f Fe(instruction)i(10)e Fd(cntlz)57
2440 y(r11,r4)p Fe(,)11 b(the)i Fd(L2)f Fe(target)h(from)e
Fd(VLIW2)p Fe(.)16 b(It)d(is)f(dep)q(enden)o(t)i(on)f(the)g(result)g
(of)f(instruction)h Fd(4)p Fe(,)f Fd(xor)21 b(r4,r5,r6)p
Fe(.)16 b(As)d(noted,)57 2485 y(this)f(v)n(alue)g(of)f
Fd(r4)h Fe(is)g(a)o(v)n(ailable)f(in)g Fd(VLIW2)h Fe(itself)g(in)f
Fd(r63)p Fe(.)17 b(Hence)d(instruction)f(10)f(can)g(b)q(e)h(sc)o
(heduled)h(on)e(the)h(righ)o(t)f(tip)g(of)57 2530 y Fd(VLIW2)p
Fe(.)j(The)10 b(con)o(tin)o(uation)e(of)h(the)h(curren)o(t)g(path)g(b)q
(ecomes)f(11,)g(and)g Fd(PathList)f Fe(b)q(ecomes)h Fc(f)p
Fd([\(1,2,3,4,5,6,10\),)o(11,0.)o(21])p Fc(g)p Fe(.)-19
2594 y(11.)22 b Fa(PowerPC)13 b Fe(instruction)i(11,)f
Fd(b)21 b(OFFPAGE)13 b Fe(is)h(next)h(on)g(this)f(path.)20
b(It)14 b(is)g(handled)h(just)f(lik)o(e)g(instructions)h(7)f(and)g(9,)g
(and)57 2639 y(hence)e(a)f Fd(b)21 b(OFFPAGE)10 b Fe(is)h(placed)g(on)g
(the)h(righ)o(t)e(tip)h(of)f Fd(VLIW2)p Fe(.)16 b(This)11
b(path)g(is)g(then)h(remo)o(v)o(ed)e(from)f(the)j(list.)17
b(As)11 b(there)i(are)57 2683 y(no)g(more)g(en)o(tries)i(in)e(the)h(P)o
(athList,)f(and)h(no)f(more)g(en)o(tries)i(to)e(pro)q(cess,)i(the)g
(algorithm)c(terminates.)17 b(The)d(translated)57 2728
y(co)q(de)g(is)g(ready)g(for)g(execution)h(b)q(eginning)e(at)h
Fd(VLIW1)p Fe(.)p -57 2760 V eop
end
userdict /end-hook known{end-hook}if
%%EndDocument
 @endspecial 354 2562 a Fh(Figure)12 b(8.)f(Description)h(of)g(con)n
(ver)o(sion)i(fr)o(om)d Fo(P)l(owerPC)j Fh(to)d(VLIW)m(.)915
2787 y Fn(17)p eop
%%Page: 18 18
18 17 bop 31 50 a Fn(in)15 b(Section)g(3,)i(in)e(which)g(all)h
(operations)f(in)g(a)h(VLIW)f(instruction)g(read)g(their)g(inputs)g
(before)g(an)o(y)h(outputs)31 116 y(from)11 b(the)h(current)g(VLIW)g
(instruction)g(are)g(written.\))-19 224 y Fm(\017)25
b Fn(The)17 b(renaming)f(scheme)h(just)f(described)h(places)g(results)f
(in)h(architected)f Fo(P)l(owerPC)i Fn(re)o(gisters)f(in)f(original)31
290 y(program)f(order)m(.)29 b(Stores)17 b(and)g(other)f(operations)g
(with)h(non-renameable)f(destinations)h(are)g(placed)g(at)f(the)31
356 y(end)c(of)g(the)g(last)h(VLIW)f(on)h(the)f(current)g(path.)j(In)d
(this)h(way)m(,)f(precise)g(e)o(xceptions)h(can)g(be)f(maintained.)-41
464 y(The)19 b Fp(D)n(AISY)g Fn(code)h(for)e(performing)f(this)i
(scheduling)g(is)g(contained)g(lar)o(gely)f(in)h(the)g(\002le)g
Fk(vliw.c)p Fn(,)i(and)e(in)-91 530 y(particular)n(,)h(the)g(function)e
Fp(insert)p 522 530 15 2 v 18 w(op\(\))p Fn(.)36 b Fp(insert)p
797 530 V 18 w(op\(\))18 b Fn(is)i(passed)g(a)g Fo(P)l(owerPC)h
Fn(operation)e(to)g(schedule)h(and)f(an)-91 596 y(earliest)11
b(time)g(at)g(which)g(that)h(operation)e(may)h(be)h(scheduled.)j(T)l(o)
d(get)f(this)h(earliest)f(time,)h(the)f(caller)g(of)g
Fp(insert)p 1871 596 V 18 w(op\(\))-91 663 y Fn(typically)k(calls)i
(the)f(function)f Fp(get)p 533 663 V 18 w(earliest)p
706 663 V 18 w(time\(\))p Fn(,)i(which)f(is)g(also)h(in)f
Fk(vliw.c)p Fn(.)26 b Fp(get)p 1502 663 V 18 w(earliest)p
1675 663 V 18 w(time\(\))15 b Fn(returns)-91 729 y(the)e(earliest)g
(time)g(at)g(which)g(the)g(current)g Fo(P)l(owerPC)i
Fn(operation)d(may)h(be)g(scheduled)h(based)f(on)h(data)f(dependences)
-91 795 y(with)f(already)g(scheduled)h(operations.)-41
861 y(The)k(\002rst)f(VLIW)g(in)h(a)g(group)e(has)i(time)g(0,)h(the)e
(subsequent)h(VLIW\(s\),)h(time)e(1,)i(etc.)29 b(There)16
b(may)h(be)g(multi-)-91 927 y(ple)e(immediate)f(successors)i(if)e(the)h
(\002st)g(VLIW)g(instruction)f(contains)h(a)g(conditional)f(branch.)23
b Fp(D)n(AISY)15 b Fn(does)h(not)-91 994 y(assume)f(that)f(the)h
(hardware)e(has)i(interlocks)f(and)g(if)g(it)h(encounters)f(a)h(long)f
(latenc)o(y)g(operation)g(such)h(as)g Fk(divide)-91 1060
y Fn(and)i(no)h(useful)f(work)g(to)g(be)h(done)f(between)h(the)f
Fk(divide)g Fn(and)h(its)f(use,)j(it)d(pads)h(the)g(gap)f(with)g(empty)
g(VLIW)-91 1126 y(instructions.)-41 1192 y Fp(insert)p
84 1192 V 17 w(op\(\))10 b Fn(\002rst)g(tries)g(to)h(place)f(the)h
Fo(P)l(owerPC)h Fn(operation)e(at)h(the)f(end)h(of)f(the)g(VLIW)h
(instruction)f(at)g(the)h Fo(earliest)-91 1258 y(time)p
Fn(.)25 b(T)l(o)15 b(do)h(this,)g Fp(D)n(AISY)g Fn(requires)f(\(1\))f
(that)i(a)f(function)g(unit)g(be)g(free)g(on)g(which)g(to)h(compute)f
(the)g(result,)h(and)-91 1325 y(\(2\))d(that)g(a)h(non-)p
Fo(P)l(owerPC)g Fn(architected)g(re)o(gister)f(be)h(a)o(v)o(ailable)f
(to)g(place)h(the)g(result)f(if)g(the)h Fo(earliest)g(time)f
Fn(is)h(earlier)-91 1391 y(than)h(the)h(current)e(VLIW)i(instruction.)
25 b(If)14 b(these)i(function)f(unit)g(or)g(re)o(gister)h(constraints)f
(do)h(not)f(permit)g(placing)-91 1457 y(the)e(operation)g(at)h(the)f
Fo(earliest)i(time)p Fn(,)f(the)f(ne)o(xt)h(time)f(is)h(tried,)g(until)
f(e)o(v)o(entually)g(a)h(VLIW)g(instruction)f(is)h(found)f(in)-91
1523 y(which)h(the)g Fo(P)l(owerPC)i Fn(operation)d(may)h(be)h
(scheduled.)21 b(This)15 b(is)f(guaranteed)g(to)g(happen)g(at)h(some)f
(point,)h(because)-91 1589 y(if)i(all)g(of)g(the)h(e)o(xisting)f(VLIW)h
(instructions)f(on)g(the)g(path)h(are)f(full,)h Fp(insert)p
1286 1589 V 18 w(op\(\))e Fn(creates)i(a)g(ne)o(w)f(empty)g(VLIW)-91
1656 y(instruction)d(and)h(appends)g(it)g(to)f(the)h(current)f(path.)24
b(Note)14 b(that)h(this)g(scheduling)g(algorithm)f(ne)o(v)o(er)g(needs)
i(to)e(spill)-91 1722 y(re)o(gisters,)f(since)g(ha)o(ving)f(a)h(re)o
(gister)f(for)g(the)g(result)h(is)g(a)f(requirement)g(of)g(scheduling)g
(an)h(operation.)j(Of)c(course,)h(if)-91 1788 y(the)g
Fo(P)l(owerPC)j Fn(operation)d(is)g(scheduled)h(at)g(the)f(end)h(of)f
(the)h(current)e(VLIW)i(instruction)f(or)g(later)n(,)h(it)f
(immediately)-91 1854 y(places)g(result)f(in)g(the)g
Fo(P)l(owerPC)j Fn(destination)d(re)o(gister)m(.)-41
1921 y(Although)g(it)h(may)g(not)f(be)i(clear)e(from)g(this)h(e)o
(xample,)h(the)f(scheduling)g(algorithm)f(produces)h(groups)g(of)f
(VLIW)-91 1987 y(tree)j(instructions)g(which)h(are)f(themselv)o(es)h
(trees.)26 b(That)16 b(is)f(the)h(groups)f(are)h(trees)f(of)g(trees.)26
b(The)16 b(reason)g(for)e(this)-91 2053 y(is)h(in)g(the)g(second)h(b)o
(ullet)f(abo)o(v)o(e:)21 b(namely)15 b Fo(P)l(owerPC)i
Fn(operations)d(or)h(their)g Fo(commit)f Fn(from)g(a)i(rename)f(re)o
(gister)f(are)-91 2119 y(always)f(scheduled)h(in)g(the)f(last)h(VLIW)g
(instruction)f(on)h(the)f(current)g(path.)20 b(Ev)o(en)14
b(if)g(the)f Fo(P)l(owerPC)j Fn(operation)d(has)-91 2185
y(been)i(seen)g(before)f(on)h(some)g(other)f(path,)i(it)f(is)g
(replicated)f(again)h(at)g(the)g(end)f(of)h(the)g(current)f(path.)23
b(Thus)15 b(VLIW)-91 2252 y(groups)d(ha)o(v)o(e)h(no)f
Fo(join)g Fn(points.)-41 2318 y(Sometimes,)g(of)f(course,)i(it)f(is)g
(essential)h(to)f(ha)o(v)o(e)g(a)g(join)g(point.)j(Loops)e(for)e(e)o
(xample)h(need)g(a)h(join)e(at)h(their)g(entry)m(,)-91
2384 y(or)g(the)g(scheduling)h(algorithm)e(would)h(unroll)f(them)h
(fore)o(v)o(er)m(.)k(This)d(is)g(accomplished)f(by)h(terminating)e(the)
h(current)-91 2450 y(path)k(and)h(starting)f(a)h(ne)o(w)g(VLIW)f(group)
g(after)g(a)h(particular)f Fo(P)l(owerPC)i Fn(operation)e(has)h(been)g
(seen)g(suf)o(\002ciently)-91 2516 y(man)o(y)12 b(times.)-41
2583 y(The)j(data)h(structures)f(used)g(by)h(the)f(scheduling)g
(algorithm,)g(in)g(particular)g(the)g(representation)f(of)h(VLIW)h
(tree)-91 2649 y(instructions)c(is)g(described)h(in)f(Section)g(6.)915
2787 y(18)p eop
%%Page: 19 19
19 18 bop -91 50 a Fl(5)59 b(D)n(AISY)16 b(Optimizations)-91
172 y Fj(5.1)46 b(Combining)-41 291 y Fn(The)13 b(combining)e
(optimization)h(essentially)h(does)g(symbolic)f(arithmetic,)g(and)g(is)
h(v)o(ery)g(useful)f(for)g(noting)f(when)-91 357 y(address)g(e)o
(xpressions)h(are)f(the)h(same,)g(as)g(well)f(as)g(for)g(generating)f
(induction)h(v)o(ariable)f(v)o(alues)h(in)g Fk(for)g
Fn(loops,)h(with-)-91 423 y(out)j(serialization.)26 b(F)o(or)15
b(e)o(xample,)i(a)f(loop)f(body)h(may)f(ha)o(v)o(e)i(a)e(statement)h
(like)f Fk(addi)30 b(r3,r3,4)p Fn(.)25 b(Thus)16 b(if)g
Fk(r3)-91 490 y Fn(has)d(the)g(v)o(alue)g Fk(r3)242 497
y Fc(0)275 490 y Fn(in)g(iteration)f(0,)h(then)g(in)g(iteration)f(3,)i
Fk(r3)f Fn(will)f(ha)o(v)o(e)i(the)f(v)o(alue)g Fk(r3)1460
497 y Fc(0)1491 490 y Fb(+)e(12)p Fn(.)19 b(Combining)12
b(deter)o(-)-91 556 y(mines)g(this)g(and)g(eliminates)g(serialization)g
(on)g(the)g Fk(addi)30 b(r3,r3,4)11 b Fn(instruction.)k(This)e(then)f
(allo)o(ws)g(iteration)f(3)-91 622 y(operations,)h(which)g(ha)o(v)o(e)h
(no)f(other)g(data)h(dependences)g(to)f(be)g(scheduled)h(immediately)m
(.)-41 688 y(Address)j(e)o(xpressions,)i(particularly)c(those)i(in)n(v)
o(olving)f(the)h(stack)g(also)g(bene\002t)g(from)e(combining.)26
b(The)16 b(stack)-91 754 y(is)j(often)f(b)o(umped)h(at)g(the)g(start)f
(of)h(a)g(procedure,)h(e.g.)36 b Fk(addi)30 b(r1,r1,-96)p
Fn(.)k(This)20 b(may)f(be)g(follo)o(wed)e(by)i(a)-91
821 y(load)g(operation,)i(e.g.)37 b Fk(lwz)29 b(r4,8\(r1\))p
Fn(.)36 b(Combining)19 b(notes)g(that)g(this)h(load)f(operation)f(can)i
(be)f(scheduled)-91 887 y(immediately)11 b(\(before)h(the)g
Fk(addi)p Fn(\))f(as)i Fk(lwz)30 b(r4,-88\(r1\))p Fn(.)-41
953 y(There)10 b(are)g(some)g(subtle)h(ca)o(v)o(eats)g(on)f(the)g(use)h
(of)e(combining.)15 b(F)o(or)9 b(e)o(xample,)i(there)f(are)g(some)h
(cases)g(when)f(wrap-)-91 1019 y(around)17 b(from)f(0xFFFFFFFF)f(to)j
(0x00000000)f(makes)g(combining)g(impermissible.)31 b(One)18
b(such)g(case)g(in)n(v)o(olv)o(es)-91 1086 y Fk(addic)p
Fn(.)k(F)o(or)14 b(e)o(xample,)i(assume)g(that)e Fk(r4)h
Fn(is)g(initially)f(0xFFFFFFFF)l(,)e(and)j(a)g(loop)f(has)h(the)g
(instruction)f Fk(addic)-91 1152 y(r4,r4,1)p Fn(.)24
b(Then)16 b(the)f(\002rst)g(time)g(that)g(this)h(instruction)e(is)i(e)o
(x)o(ecuted,)h(the)e Fk(CA)h Fn(bit)f(of)g(the)g(XER)h(is)g(set)g
(since)f(the)-91 1218 y(ne)o(w)c(v)o(alue)g(wraps)g(around)f(to)h
(0x00000000.)k(Ho)o(we)o(v)o(er)n(,)c(the)g(second)h(e)o(x)o(ecution)f
(of)g(this)g(instruction)f(clears)h(the)h Fk(CA)-91 1284
y Fn(bit)g(since)h(there)g(is)g(no)f(carry)h(going)f(from)g(0)g(to)h
(1.)k(Ho)o(we)o(v)o(er)n(,)12 b(combining)g(might)g(re)o(write)g(this)h
(second)g(iteration)f(as)-91 1350 y Fk(addic)29 b(r63,r4,2)p
Fn(,)12 b(which)g(would)g(incorrectly)f(set)i(the)f Fk(CA)g
Fn(bit.)-41 1417 y(D)n(AISY)k(currently)h(implements)g(combining)g(by)g
(maintaining)g(a)g(linked)g(list)h(of)f(combined)g(v)o(alues)g(for)g
(each)-91 1483 y(GPR.)c(Each)g(entry)e(in)i(this)f(list)g(contains)-19
1596 y Fm(\017)25 b Fn(A)12 b(GPR)g(number)n(,)-19 1702
y Fm(\017)25 b Fn(A)12 b(time,)-19 1809 y Fm(\017)25
b Fn(A)12 b(displacement,)-19 1915 y Fm(\017)25 b Fn(A)12
b(pointer)g(to)g(the)g(ne)o(xt)h(list)f(element.)-41
2028 y(This)h(list)g(is)h(kept)e(in)h(re)o(v)o(erse)g(chronological)f
(order)n(,)h(and)g(thus)g(to)g(\002nd)g(the)g(proper)f(base)i(re)o
(gister)e(and)h(displace-)-91 2094 y(ment)d(at)g(a)h(particular)f
(time,)g(the)h(list)f(is)h(searched)g(until)f(the)g Fo(time)g
Fn(is)h(less)g(than)g(or)f(equal)g(to)g(the)h(time)f(of)g(interest.)15
b(The)-91 2161 y(desired)g(v)o(alue)f(of)h(the)f(current)h(GPR)f(is)i
(then)e(obtained)h(from)f(the)g(sum)h(of)g(the)g Fo(GPR)g(number)h
Fn(and)e Fo(displacement)-91 2227 y Fn(in)g(the)h(list.)23
b(This)15 b(linked)f(list)h(is)g(added)g(to)f(whene)o(v)o(er)h(a)g
(combinable)f(operation)g(is)h(encountered.)23 b(F)o(or)14
b(e)o(xample,)-91 2293 y Fk(addi)f Fn(and)h Fk(oril)29
b(rx,rx,0)13 b Fn(\(or)g(an)o(y)h Fk(copy)p Fn(\))e(are)i(combinable)f
(operations.)19 b(This)14 b(list)g(is)g(associated)g(with)f(the)-91
2359 y Fp(TIP)g Fn(structure)f(and)g(is)h(called)g Fk(gpr)p
546 2359 15 2 v 17 w(val)p Fn(.)-91 2478 y Fj(5.2)46
b(Copy)11 b(Pr)o(opagation)-41 2596 y Fn(Copy)18 b(propagation)f(is)i
(essentially)g(a)g(special)g(case)h(of)e(combining)g(where)g(the)h
(displacement)f(must)h(always)-91 2662 y(be)e(0.)28 b(Ho)o(we)o(v)o(er)
n(,)18 b(it)f(is)g(useful)f(to)h(separate)g(the)f(two,)i(because)f(not)
g(all)f(operations)h(ha)o(v)o(e)g(a)g(displacement)f(\002eld.)915
2787 y(19)p eop
%%Page: 20 20
20 19 bop -91 50 a Fn(F)o(or)15 b(e)o(xample,)j(the)d(operation)h
Fk(xor)29 b(r3,r4,r5)15 b Fn(is)i(not)e(helped)h(if)f(we)i(kno)o(w)e
(that)h(at)g(a)g(particular)f(time)g Fk(r4)h Fn(is)-91
116 y(equi)o(v)o(alent)g(to)h Fk(r63+8)p Fn(.)30 b(Ho)o(we)o(v)o(er)n
(,)18 b(if)e(we)i(kno)o(w)e(that)h Fk(r4)g Fn(is)h(equi)o(v)o(alent)e
(to)h Fk(r61)p Fn(,)h(then)f(we)h(can)f(schedule)g(the)-91
182 y Fk(xor)e Fn(early)f(as)i Fk(xor)30 b(r60,r61,r5)14
b Fn(\(assuming)h(that)g Fk(r60)f Fn(is)i(an)f(a)o(v)o(ailable)g
(destination)g(re)o(gister)f(and)i(that)f Fk(r5)-91 248
y Fn(maps)h(to)g(itself)f(at)h(the)g(time)f(the)h Fk(xor)g
Fn(is)g(scheduled.)26 b(Copy)16 b(propagation)e(information)g(is)j
(kept)e(for)g(each)h(GPR,)-91 315 y(FPR,)f(and)g(CCR)h(in)f(a)g(linked)
g(list)g(akin)g(to)g(that)g(used)g(for)f(combining.)24
b(The)15 b(only)g(dif)o(ference)f(is)h(that)g(there)g(is)g(no)-91
381 y(displacement)10 b(\002eld.)15 b(These)c(lists)g(are)f(part)g(of)g
(the)g Fp(TIP)i Fn(structure)e(and)g(are)g(called)h Fk(gpr)p
1455 381 15 2 v 17 w(rename)p Fn(,)g Fk(fpr)p 1765 381
V 18 w(rename)p Fn(,)-91 447 y(and)h Fk(ccr)p 86 447
V 18 w(rename)p Fn(.)-91 567 y Fj(5.3)46 b(Load\255Stor)o(e)13
b(Must)f(Aliases)-41 687 y Fn(There)g(are)f(man)o(y)h(cases,)i
(particularly)c(in)i(unoptimized)f(code)h(where)f(it)h(can)g(be)g
(easily)g(pro)o(v)o(en)g(that)f(a)h(particular)-91 754
y(load)g(refers)g(to)g(the)g(same)h(location)f(as)h(a)g(pre)o(vious)e
(store)i(encountered)f(on)g(this)g(path.)k(F)o(or)c(e)o(xample:)-2
874 y Fk(xor)120 b(r3,r9,r10)-2 940 y(stw)g(r3,8\(r1\))-2
1006 y(...)-2 1072 y(lwz)g(r5,8\(r1\))-2 1139 y(addi)90
b(r6,r5,1)-41 1259 y Fn(In)15 b(such)g(cases,)j(operations)d(depending)
g(on)h(the)f(result)g(of)g(the)h Fk(load)f Fn(can)h(be)f(aggressi)o(v)o
(ely)h(scheduled)f(using)-91 1325 y(the)i(source)g(of)f(the)h
Fk(store)g Fn(operation.)28 b(In)17 b(the)g(e)o(xample)g(abo)o(v)o(e,)i
(the)e Fk(addi)f Fn(instruction)g(could)h(be)g(scheduled)-91
1391 y(immediately)h(after)h(the)g Fk(xor)g Fn(as)g Fk(addi)30
b(r63,r3,1)p Fn(,)20 b(i.e.)37 b(the)19 b Fk(addi)g Fn(need)g(not)g
(serialize)g(on)g(the)g(memory)-91 1457 y(accesses.)h(This)14
b(is)g(true)e(e)o(v)o(en)i(if)e(there)h(are)h(other)e(stores)i(between)
f(the)g Fo(must-alias)g Fn(load)g(and)h(store.)k(If)13
b(some)g(such)-91 1524 y(store)g(writes)g(to)f(the)h(same)h(memory)e
(location,)h(then)g(whate)o(v)o(er)f(method)h(is)g(used)h(to)e(ensure)i
(memory)e(consistenc)o(y)-91 1590 y(\(e.g.)j(load-v)o(erify\))10
b(will)h(raise)h(an)f(e)o(xception,)i(and)e(the)h Fk(addi)f
Fn(result)g(in)g Fk(r63)g Fn(will)h(be)f(discarded.)16
b(Ho)o(we)o(v)o(er)n(,)11 b(in)g(the)-91 1656 y(normal)i(case,)j(where)
e(there)f(is)i(no)f(such)g(problem)g(store,)g(the)g Fk(addi)g
Fn(is)h(computed)e(far)g(earlier)h(than)g(it)f(was)i(in)e(the)-91
1722 y(original)e(code.)16 b(W)l(e)d(sometimes)f(refer)g(to)g(this)g
(optimization)g(as)h Fo(load-stor)n(e)f(telescoping)p
Fn(.)-41 1789 y(These)f(load-store)e Fo(must-aliases)h
Fn(bene\002t)f(signi\002cantly)h(from)e(combining)h(and)h
(copy-propagation.)j(Combining)-91 1855 y(and)e(copy-propagation)e
(make)i(it)f(easy)i(to)f(determine)g(if)f(address)i(e)o(xpressions)g
(are)f(equi)o(v)o(alent)f(e)o(v)o(en)i(if)e(the)o(y)i(do)f(not)-91
1921 y(refer)17 b(to)g(the)h(same)h(re)o(gister)m(.)32
b(Furthermore,)18 b Fo(load-stor)n(e)g(telescoping)f
Fn(can)h(be)g(done)g(through)f(multiple)g(sets)i(of)-91
1987 y(stores)12 b(and)h(loads.)-41 2053 y Fp(D)n(AISY)g
Fn(implements)g(its)h Fo(must-alias)f Fn(analysis)h(via)f(the)g
Fk(stores)g Fn(\002eld)g(of)g(the)g Fp(TIP)i Fn(structure.)j(The)c
Fk(stores)-91 2120 y Fn(\002eld)d(is)h(a)h(list)e(of)h(all)g(the)f
Fk(stores)h Fn(which)f(ha)o(v)o(e)i(occurred)e(on)g(this)h(path)g
(through)f(the)h(group.)j(Whene)o(v)o(er)c(a)h(load)g(is)-91
2186 y(encountered,)h(its)h(address)g(is)f(compared)g(to)g(those)h(in)f
Fk(stores)g Fn(for)f(a)i(match.)k(In)13 b(the)g(case)h(of)f(multiple)g
(matches,)-91 2252 y(the)f(latest)h(match,)f(of)g(course)h(wins.)-91
2372 y Fj(5.4)46 b(Load\255V)-5 b(erify)-41 2492 y Fn(In)17
b(order)g(to)g(get)g(reasonable)h(ILP)-6 b(,)18 b(it)g(is)g(essential)g
(to)f(e)o(x)o(ecute)i(load)e(instructions)g(as)h(early)g(as)g
(possible,)h(and)-91 2559 y(not)13 b(just)h(in)f(those)h(cases)h(where)
f Fo(must-alias)f Fn(can)h(be)g(pro)o(v)o(en.)19 b(Since)14
b(the)f(translator)g(cannot)h(be)f(certain)h(when)f(the)-91
2625 y(memory)h(location)h(is)g(ready)m(,)h Fo(as)g(early)f(as)h
(possible)f Fn(in)g(this)h(conte)o(xt)f(means)g(when)h(all)f(of)f(the)i
(re)o(gister)e(inputs)i(to)915 2787 y(20)p eop
%%Page: 21 21
21 20 bop -91 50 a Fn(the)15 b(load)f(are)h(ready)m(.)23
b(\(There)15 b(are)f(e)o(xceptions)i(such)f(as)g Fk(sync)g
Fn(operations)f(which)h(order)f(memory)g(accesses,)k(b)o(ut)-91
116 y(we)12 b(will)g(ignore)g(those)h(here.\))-41 182
y(Such)d(speculati)o(v)o(e)h(scheduling)g(of)f(loads)h(requires)g(some)
g(means)g(to)g(check)g(whether)f(the)h(loaded)g(v)o(alue)f(was)h(cor)o
(-)-91 248 y(rect.)19 b(The)14 b Fk(load-verify)f Fn(instruction)g(is)h
(one)f(way)h(of)f(performing)f(this)h(check.)20 b(Whene)o(v)o(er)14
b(a)g(load)f(operation)-91 315 y(is)h(scheduled)g(speculati)o(v)o(ely)f
(\(and)g(mo)o(v)o(es)i(past)f(at)f(least)h(one)g(store\),)g(a)f
Fk(load-verify)g Fn(instruction)g(is)h(inserted)-91 381
y(in)f(the)g(original)g(order)m(.)18 b(This)c Fk(load-verify)e
Fn(instruction)g(reloads)i(the)f(v)o(alue)g(and)g(checks)h(whether)f
(it)g(matches)-91 447 y(the)g(original)f(v)o(alue.)19
b(If)12 b(so,)i(e)o(x)o(ecution)g(continues)f(normally)m(.)18
b(If)12 b(not,)i(a)f Fk(load-verify)29 b(exception)g(trap)-91
513 y Fn(occurs,)18 b(and)e(the)g Fp(D)n(AISY)g Fn(VMM)h(retranslates)f
(starting)g(at)g(the)g(problem)g(load.)27 b(When)16 b(this)g(ne)o(w)g
(translation)g(is)-91 579 y(e)o(x)o(ecuted,)d(the)g(load)f(e)o(x)o
(ecutes)h(\002rst)f(and)h(gets)f(the)h(correct)e(v)o(alue.)-41
646 y(If)18 b(a)i(particular)e Fk(load)h Fn(repeatedly)f(incurs)h(such)
h(traps,)h Fp(D)n(AISY)f Fn(retranslates)f(the)g(original)g(group)f
(without)-91 712 y(speculating)c(the)g(load)g(instruction.)20
b(Currently)13 b Fp(D)n(AISY)h Fn(does)g(this)g(if)g(a)g(particular)f
(load)h(traps)g(10)g(times.)20 b(Such)14 b(a)-91 778
y(retranslate)e(polic)o(y)g(drops)h(the)f(number)g(of)g
Fk(load-verify)29 b(traps)12 b Fn(from)g(hundreds)g(of)g(millions)g(to)
h(hundreds)-91 844 y(in)f(the)g(SPEC95)h(benchmarks.)-41
911 y(Memory)18 b(mapped)g(I/O)g(locations)g(present)g(a)h(particular)e
(problem)h(for)g(speculati)o(v)o(e)g(loads.)34 b(Such)18
b(locations)-91 977 y(normally)c(cannot)h(be)g(read)f(or)h(written)f
(speculati)o(v)o(ely)h(because)h(the)o(y)f(can)g(ha)o(v)o(e)h(real)e
(physical)h(side)g(ef)o(fects)g(such)-91 1043 y(as)g(displaying)f(a)h
(character)f(on)h(the)f(screen)h(or)f(launching)g(a)h(missile.)23
b(\(Ev)o(en)15 b(loads)g(can)f(ha)o(v)o(e)h(such)g(side)g(ef)o(fects.)
-91 1109 y(F)o(or)c(e)o(xample)h(some)g(I/O)g(cards)g(ha)o(v)o(e)g
(only)g(1)g(address,)h(and)f(in)f(order)g(to)h(read)g(multiple)f(v)o
(alues)h(from)f(that)g(address,)-91 1175 y(sequence)16
b(through)e(the)i(set)g(of)f(v)o(alues)h(read)f(from)f(that)i
(address.\))25 b(Thus,)17 b(an)o(y)f(hardware)e(on)i(which)f(speculati)
o(v)o(e)-91 1242 y(loads)d(are)g(supported)g(must)g(be)g(able)g(to)g
(recognize)g(such)g(I/O)g(accesses)i(and)e(quash)g(them.)k(On)c
Fo(P)l(owerPC)p Fn(,)i(this)e(can)-91 1308 y(be)g(done)h(via)f(the)g
(WIMG)h(bits,)f(for)g(e)o(xample.)-91 1428 y Fj(5.5)46
b(Dead)11 b(Code)h(Elimination)-41 1548 y Fp(D)n(AISY)g
Fn(employs)g(a)h(v)o(ery)f(simple)g(and)h(limited)e(form)h(of)g(dead)g
(code)h(elimination.)i(It)d(notes)g(whether)g(a)h(re)o(gister)-91
1614 y(has)20 b(already)e(been)i(written)e(on)h(the)h(current)e(path)h
(through)f(the)i(current)e(VLIW)h(instruction.)36 b(If)19
b(so,)i(then)e(the)-91 1681 y(pre)o(vious)12 b(write)f(is)i(dead)g(and)
f(is)h(deleted.)-41 1747 y(Actually)18 b(there)h(is)g(one)g(e)o
(xception)g(e)o(v)o(en)g(to)g(this)g(simple)g(scheme.)36
b(If)18 b(the)h(pre)o(vious)f(write)h(to)f(the)h(re)o(gister)n(,)-91
1813 y(also)14 b(wrote)f(something)g(else,)i(then)f(it)f(generally)g
(cannot)h(be)g(deleted.)20 b(F)o(or)13 b(e)o(xample,)h(if)f(the)h(pre)o
(vious)f(instruction)-91 1879 y(writing)g Fk(r3)i Fn(was)f
Fk(addic)30 b(r3,r4,1)13 b Fn(and)i(the)g(current)e(instruction)h(is)h
Fk(xor)29 b(r3,r9,r10)p Fn(,)15 b(then)f(the)h Fk(addic)-91
1945 y Fn(cannot)f(be)h(deleted)f(because)h(the)g Fk(CA)f
Fn(bit)g(would)g(not)g(then)g(be)h(set)g(in)f(the)g Fk(XER)p
Fn(.)h(Ho)o(we)o(v)o(er)n(,)g(lea)o(ving)f(two)g(or)g(more)-91
2012 y(writes)d(to)g(a)g(single)h(GPR)f(can)h(be)f(problematic)f(for)h
(some)g(implementations)g(which)g(logically)f Fk(OR)i
Fn(the)f(bits)g(of)g(each)-91 2078 y(operation)k(trying)h(to)g(write)g
(to)g(a)h(re)o(gister)m(.)28 b(In)16 b(this)g(e)o(xample,)i(the)e
Fk(addic)30 b(r3)16 b Fn(v)o(alue)g(and)g(the)h Fk(xor)29
b(r3)17 b Fn(v)o(alue)-91 2144 y(would)11 b(be)i(incorrectly)e
Fk(OR)p Fn('ed)h(together)g(for)f(such)i(implementations.)-91
2264 y Fj(5.6)46 b(Uni\002cation)-41 2384 y Fn(As)11
b(noted)f(in)h(Section)f(4,)i(the)f(scheduler)g(forms)f(groups)g(of)h
(which)f(are)h(trees)g(of)f(tree)h(instructions)f(\(at)h(least)g(in)f
(the)-91 2451 y(most)k(general)g(case\).)23 b(Thus)15
b(the)f(same)h Fo(P)l(owerPC)i Fn(operation)c(may)h(be)h(represented)f
(multiple)g(times)g(in)h(the)f(same)-91 2517 y(group,)g(if)g(it)g(is)g
(past)h(one)f(or)g(more)g(join)f(points)i(in)f(the)g
Fo(P)l(owerPC)i Fn(code.)21 b(Such)14 b(operations)g(may)g(be)g
(aggressi)o(v)o(ely)-91 2583 y(scheduled)d(from)f(multiple)g(paths)h
(so)h(that)e(the)o(y)h(are)g(at)g(the)g(same)h(control)e(point)g(in)h
(the)g(VLIW)g(code.)k(F)o(or)c(e)o(xample,)-91 2649 y(consider)h(the)g
(follo)o(wing)f Fo(P)l(owerPC)j Fn(code:)915 2787 y(21)p
eop
%%Page: 22 22
22 21 bop 28 50 a Fk(nor)60 b(r7,r22,r23)28 116 y(cmpi)30
b(cr0,r31,0)28 182 y(beq)60 b(L1)28 248 y(xor)g(r5,r7,r8)28
315 y(b)120 b(L2)-91 381 y(L1:)28 447 y(and)60 b(r9,r7,r10)-91
513 y(L2:)28 579 y(addi)30 b(r3,r4,1)-41 700 y Fn(The)12
b(\002nal)f Fk(addi)g Fn(instruction)f(is)i(common)f(to)g(both)g(paths)
h(through)e(this)i(group,)f(and)g(hence)h(we)g(may)f(get)g(VLIW)-91
766 y(code)h(such)h(as:)-91 886 y Fk(V1:)178 952 y(nor)59
b(r7,r22,r23)178 1018 y(cmpi)29 b(cr0,r31,0)178 1085
y(addi)g(r63,r4,1)178 1151 y(addi)g(r62,r4,1)178 1217
y(b)119 b(V2)-91 1350 y(V2:)178 1416 y(beq)59 b(VL1)-2
1482 y(VL1:)h(xor)f(r5,r7,r8)178 1548 y(or)89 b(r3,r63,r63)178
1614 y(b)30 b(V3)178 1681 y(and)59 b(r9,r7,r10)178 1747
y(or)89 b(r3,r62,r62)178 1813 y(b)30 b(V4)-91 2012 y(V3:)179
b(b)119 b(OFFGROUP)-91 2144 y(V4:)179 b(b)119 b(OFFGROUP)-41
2264 y Fn(It)9 b(is)g(unnecessary)h(for)f Fk(V1)g Fn(to)h(ha)o(v)o(e)f
(two)g(computations)g(of)g Fk(addi)30 b(rx,r4,r1)p Fn(.)14
b(The)c(uni\002cation)e(optimization)-91 2330 y(tracks)j(the)f(Po)o
(werPC)g(address)h(from)f(which)h(each)g(scheduled)g(instruction)f
(comes)h(and)g(notes)g(whether)f(some)h(other)-91 2397
y(path)f(has)g(already)g(computed)f(this)h(v)o(alue.)15
b(If)9 b(another)g(path)h(has)g(computed)g(the)g(v)o(alue,)g(and)g(the)
g(destination)g(re)o(gister)-91 2463 y(\(e.g.)23 b Fk(r63)p
Fn(\))15 b(is)g(unused)g(all)g(along)g(the)g(path)f(where)h(it)g(is)g
(no)o(w)g(needed)g(then)f(the)h(operations)g(may)g(be)g
Fo(uni\002ed)p Fn(.)23 b(In)-91 2529 y(other)12 b(words,)g(the)g(VLIW)h
(code)f(would)g(be)-91 2649 y Fk(V1:)915 2787 y Fn(22)p
eop
%%Page: 23 23
23 22 bop 178 50 a Fk(nor)59 b(r7,r22,r23)178 116 y(cmpi)29
b(cr0,r31,0)178 182 y(addi)g(r63,r4,1)178 248 y(b)119
b(V2)-91 381 y(V2:)178 447 y(beq)59 b(VL1)-2 513 y(VL1:)h(xor)f
(r5,r7,r8)178 579 y(or)89 b(r3,r63,r63)178 646 y(b)30
b(V3)178 712 y(and)59 b(r9,r7,r10)178 778 y(or)89 b(r3,r63,r63)178
844 y(b)30 b(V4)-91 1043 y(V3:)179 b(b)119 b(OFFGROUP)-91
1175 y(V4:)179 b(b)119 b(OFFGROUP)-41 1263 y Fn(Actually)m(,)10
b(a)h(v)o(ariety)f(of)g(other)h(conditions)f(must)g(be)h(met)g(in)f
(order)g(to)h(unify)e(operations.)15 b(F)o(or)c(more)f(information,)-91
1329 y(look)g(at)h(the)f Fk(unify.c)g Fn(\002le.)15 b(These)d
(restrictions)e(suf)o(\002ciently)g(limit)g(the)g(number)g(of)g(times)h
(when)g(uni\002cation)f(may)-91 1395 y(be)i(employed,)g(so)h(as)g(to)f
(yield)g(a)h(relati)o(v)o(ely)e(small)i(gain)f(from)f(its)h(use.)-91
1508 y Fj(5.7)46 b(Unr)o(olling)-41 1620 y Fn(Because)14
b(of)g(the)f(limited)g(time)g(a)o(v)o(ailable)h(for)e(translation,)i
Fp(D)n(AISY)g Fn(does)g(not)g(currently)e(do)i(software)e(pipelin-)-91
1686 y(ing.)28 b(It)16 b(instead)h(unrolls)f(se)o(v)o(eral)h(times)g
(so)g(as)g(to)f(get)h(good)f(o)o(v)o(erlap)h(among)f(the)h(original)f
(loop)g(iterations.)28 b(T)l(o)-91 1752 y(do)15 b(this,)h
Fp(D)n(AISY)g Fn(checks)g(if)e(the)h Fo(P)l(owerPC)i
Fn(instruction)e(currently)f(being)h(translated)g(has)g(been)h(seen)f
(along)g(this)-91 1818 y(path)d(pre)o(viously)m(.)j(If)d(it)g(has,)i
(then)e(this)g(path)h(contains)f(a)h(loop)f(in)g(the)h(original)e
Fo(P)l(owerPC)k Fn(code.)h(After)11 b(passing)i(the)-91
1884 y(loop)d(header)h Fd(N)16 b Fn(times)11 b(\(where)g
Fd(N)16 b Fn(may)11 b(be)g(speci\002ed)g(in)g(the)g Fk(daisy.config)e
Fn(\002le)i(and)g(is)g(typically)g(2\),)g Fp(D)n(AISY)-91
1951 y Fn(serializes.)-41 2017 y(That)17 b(is,)j Fp(D)n(AISY)e
Fn(starts)f(a)h(ne)o(w)f(group)g(at)g(this)h(loop)f(header)g(address.)
31 b(This)18 b(has)g(the)g(ef)o(fect)e(of)h(peeling)g(the)-91
2083 y(\002rst)e Fd(N)21 b Fn(iterations)15 b(from)f(the)i(loop,)g(and)
g(is)g(useful)f(for)g(small)h(iteration)e(count)i(loops.)25
b(This)16 b(ne)o(w)g(group)e(formed)-91 2149 y(by)i Fp(D)n(AISY)h
Fn(gets)f Fd(M)22 b Fn(copies)17 b(of)f(the)g(loop)g(body)g(and)g(then)
h(loops)f(back)h(to)f(the)g(start)g(of)g(this)h(group.)27
b Fd(M)21 b Fn(is)c(also)-91 2215 y(speci\002ed)12 b(in)h
Fk(daisy.config)e Fn(and)h(is)h(typically)f(4.)-91 2348
y Fl(6)59 b(D)n(AISY)16 b(Data)f(Structur)o(es)-41 2464
y Fn(The)j(two)g(most)g(fundamental)f(data)h(structures)g(used)g(by)g
Fp(D)n(AISY)h Fn(are)f(in)f(the)i(\002le)e Fk(vliw.h)p
Fn(.)33 b(The)o(y)18 b(are)g(the)-91 2530 y Fp(VLIW)f
Fk(struct)f Fn(de\002ning)g(a)h(VLIW)f(tree)h(instruction)e(and)i
Fp(TIP)p Fn(,)h(the)f Fk(struct)e Fn(which)i(de\002nes)g(an)f(edge)h
(of)f(a)-91 2596 y(VLIW)e(tree)f(instruction.)20 b(\(F)o(or)13
b(a)h(description)f(of)h(VLIW)g(tree)f(instructions,)i(see)f(Section)g
(3.\))20 b(There)14 b(are)f(9)h(\002elds)-91 2662 y(in)e(the)g
Fp(VLIW)h Fk(struct)p Fn(:)915 2787 y(23)p eop
%%Page: 24 24
24 23 bop -19 50 a Fm(\017)25 b Fp(time)11 b Fn(indicates)h(ho)o(w)f
(man)o(y)g(VLIW)h(instructions)f(distant)g(from)g(the)g(start)g(of)g
(the)h(group,)f(the)h(current)e(VLIW)31 116 y(instruction)h(is.)16
b(The)d(\002rst)f(VLIW)h(instruction)e(of)h(a)h(group)e(has)i
Fp(time)g Fn(0.)-19 224 y Fm(\017)25 b Fp(gr)o(oup)12
b Fn(is)h(a)g(unique)f(identi\002er)g(indicating)g(the)g(VLIW)h(group)f
(to)g(which)h(this)g(group)e(to)i(which)f(this)h(instruc-)31
290 y(tion)f(belongs.)k(As)c(noted)g(in)h(Section)f(4,)g(VLIW)h(groups)
f(are)g(trees)h(of)f(tree)g(instructions.)-19 397 y Fm(\017)25
b Fp(gr)o(oup)p 161 397 15 2 v 17 w(entry)12 b Fn(is)h(the)f
Fo(P)l(owerPC)i Fn(address)f(of)f(the)g(entry)g(point)g(of)g(the)g
Fp(gr)o(oup)g Fn(to)g(which)g(this)h(VLIW)f(instruc-)31
463 y(tion)g(belongs.)-19 571 y Fm(\017)25 b Fp(entry)10
b Fn(points)h(to)g(the)h(\002rst)e(edge)i(\(or)e Fp(TIP)p
Fn(\))i(in)f(the)g(current)f(VLIW)h(instruction.)k(F)o(or)c(e)o(xample)
g(for)f(the)h(VLIW)31 637 y(instruction)g(in)h(Figure)g(5)g(on)h(page)f
(12,)h(the)f Fp(entry)g Fn(edge)h(is)f(the)h(se)o(gment)f(from)g
Fk(V1)g Fn(to)g Fk(bc)30 b(CR0.eq)p Fn(.)-19 745 y Fm(\017)25
b Fp(xlate)14 b Fn(is)g(the)h(address)f(of)g(the)h(simulation)e(code)i
(for)e(this)i(VLIW)f(instruction.)21 b(\(This)15 b(v)o(alue)f(is)h(not)
f(\002lled)g(in)31 811 y(until)e(scheduling)g(for)f(a)i(page)f(is)h
(complete.\))-19 918 y Fm(\017)25 b Fp(visited)16 b Fn(is)i(a)f(bit)g
(used)g(by)g(the)h(simulation)e(code)h(generator)g(and)g(by)g(the)g
(VLIW)g(code)g(dumper)g(to)g(kno)o(w)31 985 y(whether)12
b(the)o(y)g(ha)o(v)o(e)h(processed)g(this)f(VLIW)h(instruction)e(pre)o
(viously)m(.)-19 1092 y Fm(\017)25 b Fp(r)o(esr)o(c)p
139 1092 V 19 w(cnt)16 b Fn(is)h(used)h(to)e(determine)h(the)f(number)h
(of)f(each)h(type)g(of)f(function)g(unit)h(which)g(ha)o(v)o(e)g(been)g
(used)31 1158 y(by)h(this)g(VLIW)g(instruction.)31 b(As)18
b(noted)g(in)g(Section)f(3,)j(this)e(v)o(ersion)g(of)f
Fp(D)n(AISY)i Fn(does)f(not)g(distinguish)31 1224 y(between)e
(\003oating)f(point)h(and)g(inte)o(ger)g(operations.)26
b(This)17 b(is)f(re\003ected)g(in)g Fp(r)o(esr)o(c)p
1493 1224 V 19 w(cnt)p Fn(,)h(which)f(sees)h(only)e(1)31
1291 y(type)c(of)g(ALU.)h(T)l(o)g(change)g(this,)g(the)f
Fp(ALU)h Fk(#define)f Fn(earlier)g(in)g Fk(vliw.h)g Fn(must)g(be)h
(split)f(into)g Fk(#define)31 1357 y Fp(ALU)p 139 1357
V 18 w(INT)i Fn(and)f Fk(#define)g Fp(ALU)p 669 1357
V 18 w(FL)-5 b(T)p Fn(.)-19 1464 y Fm(\017)25 b Fp(cluster)11
b Fn(is)h(similar)f(to)g Fp(r)o(esr)o(c)p 539 1464 V
19 w(cnt)g Fn(b)o(ut)h(is)f(used)h(when)g Fp(D)n(AISY)g
Fn(is)f(tar)o(getting)g(an)h(architecture)e(with)h(clustered)31
1531 y(function)g(units.)-19 1638 y Fm(\017)25 b Fp(mem)p
138 1638 V 19 w(update)p 305 1638 V 16 w(cnt)12 b Fn(is)h(used)g(with)f
(the)g(combining)g(optimization.)-41 1757 y(The)19 b
Fp(TIP)g Fk(struct)f Fn(is)h(used)g(e)o(xtensi)o(v)o(ely)g(by)g(the)f
Fp(D)n(AISY)h Fn(scheduler)f(described)h(in)f(Section)h(4.)34
b(Its)18 b(name)-91 1824 y(deri)o(v)o(es)10 b(from)f(the)h(fact)g(that)
g(the)g(last)g(edge)h(or)f Fo(tip)g Fn(on)g(the)g(current)f(scheduling)
h(path)g(is)h(where)f(the)g(current)g Fo(P)l(owerPC)-91
1890 y Fn(operation)g(or)g(the)g Fo(commit)h Fn(of)f(the)h(current)e
Fo(P)l(owerPC)k Fn(operation')m(s)d(v)o(alue)g(to)h(a)g
Fo(P)l(owerPC)h Fn(re)o(gister)f(is)f(placed.)16 b(Some)-91
1956 y(of)c(the)g(more)g(important)f(\002elds)h(in)h(the)f
Fp(TIP)h Fk(struct)f Fn(are:)-19 2075 y Fm(\017)25 b
Fp(vliw)10 b Fn(is)i(a)f(back)g(pointer)f(to)h(the)g(o)o(v)o(erall)g
(VLIW)-5 b(.)12 b(This)f(is)h(essential)f(in)g(determining)f(whether)h
(a)g(function)f(unit)31 2141 y(is)i(a)o(v)o(ailable)g(to)h(add)f(an)h
(operation)e(to)h(the)h(current)e(tip.)-19 2249 y Fm(\017)25
b Fp(op)14 b Fn(is)i(a)f(linked)f(list)h(of)g(the)g(operations)f(on)h
(the)g(current)f(tip.)24 b(F)o(or)14 b(e)o(xample,)i(in)f(Figure)f(5)h
(on)g(page)g(12,)h(the)31 2315 y(initial)11 b Fp(TIP)j
Fn(be)o(ginning)e(at)g Fk(V1)h Fn(would)e(ha)o(v)o(e)i(an)f
Fp(op)g Fn(\002eld)g(of)g Fk(cmp,)30 b(add)p Fn(.)-19
2423 y Fm(\017)25 b Fp(num)p 131 2423 V 18 w(ops)12 b
Fn(is)h(the)f(number)g(of)g(operations)g(in)g(the)g Fp(op)g
Fn(list.)-19 2530 y Fm(\017)25 b Fp(left)17 b Fn(and)g
Fp(right)g Fn(are)g(the)h(false)f(and)h(true)f(paths)h(from)e(a)i
(conditional)f(jump)g(in)g(a)h(VLIW)g(tree)f(instruction)31
2596 y(\(as)h(described)g(in)g(Section)g(3\).)33 b(In)18
b(Figure)f(5,)j Fp(left)e Fn(would)f(be)h(the)g(edge)h(from)e
Fk(bc)30 b(CR0.eq)17 b Fn(to)h Fk(b)30 b(V2)p Fn(,)31
2663 y(while)12 b Fp(right)g Fn(would)g(be)g(the)h(edge)g(from)e
Fk(bc)30 b(CR0.eq)12 b Fn(to)h Fk(bc)29 b(CR1.lt)p Fn(.)16
b(The)d(terminating)f(branch)g(of)g(an)915 2787 y(24)p
eop
%%Page: 25 25
25 24 bop 31 50 a Fn(edge,)15 b(such)f(as)h Fk(bc)29
b(CR0.eq)14 b Fn(is)g(associated)h(with)f(the)g(edge)g(abo)o(v)o(e)g
(it.)21 b(Note)14 b(that)f(unconditional)g(onpage)31
116 y(branches)h(entirely)f(disappear)n(,)i(with)e(the)h(succeeding)g
(ALU)h(operations)e(scheduled)i(as)f(though)f(the)o(y)i(were)31
182 y(in)d(a)h(straight)g(line)f(with)h(the)g(predecessor)g(of)f(the)h
(unconditional)f(branch.)k(Leaf)d(branches)g(of)g(a)g(VLIW)g(tree)31
248 y(instruction)c(ha)o(v)o(e)i Fp(left)f Fn(set)h(to)f
Fp(0)p Fn(.)15 b(Of)o(fpage)10 b(leaf)g(branches)g(place)h(the)g
(address)f(of)h(the)f(of)o(fpage)f(tar)o(get)h(in)h Fp(right)p
Fn(.)-19 356 y Fm(\017)25 b Fp(gpr)p 109 356 15 2 v 17
w(vliw)p Fn(,)12 b Fp(fpr)p 306 356 V 17 w(vliw)p Fn(,)f(and)g
Fp(ccr)p 584 356 V 19 w(vliw)f Fn(are)h(used)h(in)e(allocating)h(non-)p
Fo(P)l(owerPC)h Fn(re)o(gisters)f(for)f(rename)h(results.)31
422 y(The)o(y)i(are)f(bit)h(v)o(ectors,)g(with)f(one)g(bit)h(per)f(re)o
(gister)g(to)g(indicate)h(whether)f(the)g(re)o(gister)h(is)f(free)g(in)
h(the)f(current)31 489 y(tip.)i(Note)d(that)e(for)h(a)g(re)o(gister)g
(to)g(be)g(free)g(for)f(a)h(result,)h(it)f(must)g(not)g(only)g(be)g
(free)g(in)g(the)g(current)f(tip,)i(b)o(ut)f(in)f(all)31
555 y(tips)k(preceding)g(the)g(current)f(tip)h(until)g(the)g(tip)g(at)g
(which)h(the)f(result)g(is)g(calculated.)19 b(F)o(or)13
b(e)o(xample,)h(consider)31 621 y(Figure)i(7)i(on)f(page)h(16,)h(when)f
(scheduling)f(the)g Fo(P)l(owerPC)j Fk(xor)d Fn(operation.)31
b(The)18 b(current)e(tip)h(be)o(gins)h(at)31 687 y Fk(VLIW2)p
Fn(.)e(The)d(rename)f(re)o(gister)h Fk(r63)f Fn(had)h(to)f(be)h(free)f
(not)h(only)f(in)g(this)h(tip,)g(b)o(ut)f(in)h(its)g(predecessor)n(,)g
(the)g(tip)31 753 y(from)e Fk(bc)30 b(L1)12 b Fn(to)g
Fk(b)30 b(VLIW2)p Fn(.)-19 861 y Fm(\017)25 b Fp(gpr)p
109 861 V 17 w(r)o(ename)p Fn(,)19 b Fp(fpr)p 383 861
V 17 w(r)o(ename)p Fn(,)f(and)f Fp(ccr)p 744 861 V 18
w(r)o(ename)g Fn(are)f(used)h(to)f(determine)g(the)g(re)o(gister)g(in)g
(which)g(a)h(v)o(alue)31 927 y(resides)j(at)g(a)f(particular)g(time.)37
b(If,)22 b(as)e(with)f(the)h Fk(xor)f Fn(result)h(in)f(Figure)g(7,)j
(an)d(operation)g(is)h(renamed,)31 994 y(subsequent)d(operations)g(ha)o
(v)o(e)h(to)f(kno)o(w)g(when)g(and)g(where)g(to)g(get)g(the)g(rename)g
(v)o(alue)g(and)g(when)g(to)g(get)31 1060 y(the)e(v)o(alue)g(from)f
(the)i Fo(P)l(owerPC)h Fn(re)o(gister)m(.)24 b(F)o(or)15
b(e)o(xample)g(the)h Fk(and)f Fn(which)g(uses)h(the)f(result)g(of)g
(the)g Fk(xor)h Fn(in)31 1126 y(Figure)11 b(7)i(must)f(kno)o(w)g(to)g
(obtain)g(its)h(input)e(from)h Fk(r63)g Fn(instead)g(of)g
Fk(r4)h Fn(in)f Fk(VLIW2)p Fn(.)-19 1234 y Fm(\017)25
b Fp(ca)p 81 1234 V 18 w(r)o(ename)12 b Fn(and)g Fp(ov)p
404 1234 V 18 w(r)o(ename)g Fn(are)g(similar)f(to)h Fp(gpr)p
942 1234 V 18 w(r)o(ename)g Fn(abo)o(v)o(e)h(e)o(xcept)f(the)o(y)g
(indicate)g(whether)g(the)g Fk(CA)31 1300 y Fn(and)h
Fk(OV)f Fn(bits)h(from)f(the)h Fo(P)l(owerPC)i Fk(XER)e
Fn(re)o(gister)f(ha)o(v)o(e)i(been)f(renamed)f(in)h(a)g(GPR)g(e)o
(xtender)m(.)18 b(The)13 b(need)g(for)31 1366 y(this)f(is)h(co)o(v)o
(ered)f(in)h(more)e(detail)i(in)f(Section)g(7.1.)-19
1474 y Fm(\017)25 b Fp(stor)o(es)18 b Fn(and)g Fp(last)p
340 1474 V 17 w(stor)o(e)g Fn(are)g(used)g(for)e(tracking)h(stores)h
(on)g(the)f(current)g(path.)31 b(This)19 b(is)e(essential)i(for)d(the)
31 1540 y Fo(must-alias)e Fn(optimization)f(described)h(in)g(Section)g
(5.3,)i(as)f(well)f(as)h(in)f(kno)o(wing)g(when)g(a)h
Fk(load-verify)31 1606 y Fn(operation)c(is)i(needed)g(on)f(a)g
(uniprocessor)m(.)k(\(See)c(Section)g(5.4.\))-19 1714
y Fm(\017)25 b Fp(a)o(vail)14 b Fn(indicates)i(the)f(time)h(at)f(which)
h(each)g(machine)f(resource)h(\(not)f(just)g(re)o(gisters\))h(is)g(a)o
(v)o(ailable.)25 b(This)16 b(is)31 1780 y(used)f(hea)o(vily)f(in)h(the)
f(scheduling)h(algorithm)e(described)i(in)f(Section)g(4,)i(and)f
(roughly)e(speaking)i(the)g(v)o(alue)31 1846 y(returned)e(by)h(the)h
(bf)f(get)p 471 1846 V 17 w(earliest)p 632 1846 V 18
w(time\(\))f(function)h(in)g Fk(vliw.c)g Fn(is)g(the)h(maximum)e
Fp(a)o(vail)g Fn(time)h(of)g(each)h(of)31 1913 y(an)d(operation')m(s)g
(inputs.)-19 2020 y Fm(\017)25 b Fp(cluster)14 b Fn(is)h(a)g
(supplement)f(to)g Fp(a)o(vail)p Fn(.)22 b(In)14 b(a)g(machine)h(with)f
(function)g(unit)g(clusters,)i(a)e(result)h(is)f(ready)h(at)f(its)31
2087 y Fp(a)o(vail)d Fn(time)h(only)g(in)g(its)h(o)o(wn)f(cluster)m(.)
-19 2194 y Fm(\017)25 b Fp(loophdr)15 b Fn(is)h(a)h(bit)f(v)o(ector)g
(to)g(track)g(which)g(instructions)g(ha)o(v)o(e)g(been)h(seen)f(on)h
(the)f(current)f(path)h(from)f(the)31 2260 y(entry)h(point)g(of)g(this)
g(VLIW)h(group.)27 b(If)16 b(an)g(instruction)g(has)h(been)f(seen)h
(pre)o(viously)m(,)g(it)g(means)f(there)g(is)h(a)31 2327
y(loop.)-19 2434 y Fm(\017)25 b Fp(gpr)p 109 2434 V 17
w(writer)13 b Fn(and)f Fp(mem)p 460 2434 V 19 w(update)p
627 2434 V 17 w(cnt)f Fn(are)i(used)g(by)f(the)g(combining)g
(optimization.)-19 2542 y Fm(\017)25 b Fp(pr)o(ob)9 b
Fn(is)h(the)g(probability)e(that)i(this)f(tip)h(e)o(x)o(ecutes)h(gi)o
(v)o(en)e(that)h(the)f(entry)h(point)f(of)g(this)h(group)f(e)o(x)o
(ecuted.)15 b(These)31 2608 y(probabilities)d(are)h(established)h
(through)e(a)i(simpli\002ed)e(Ball-Larus)i(set)g(of)e(heuristics.)19
b(These)14 b(probabilities)915 2787 y(25)p eop
%%Page: 26 26
26 25 bop 31 50 a Fn(ine)o(vitably)10 b(become)h(small)g(after)f(a)h
(fe)o(w)f(conditional)h(branches)g(are)g(encountered)f(on)h(the)g
(current)f(path,)h(thus)31 116 y(making)h(it)g(dif)o(\002cult)f(to)h
(kno)o(w)g(which)g(operations)g(to)g(schedule)h(\227)f(a)h(problem)e
(alluded)h(to)h(in)f(Section)g(1.)-19 224 y Fm(\017)25
b Fp(orig)p 120 224 15 2 v 17 w(ops)15 b Fn(counts)f(the)h(number)e(of)
h Fo(P)l(owerPC)j Fn(operations)c(which)i(\(1\))e(ha)o(v)o(e)i(their)f
(result)g(placed)g(in)h(a)f Fo(P)l(ow-)31 290 y(erPC)19
b Fn(re)o(gister)f(on)g(this)g Fp(TIP)p Fn(,)h(or)f(\(2\))f(are)h(a)g
(store,)i(or)e(\(3\))f(are)h(a)g(branch.)33 b(This)18
b(information)f(is)h(used)h(to)31 356 y(calculate)12
b(the)h(in\002nite)e(cache)i(ILP)f(attained,)h(as)g(described)f(in)g
(Section)g(2.1.)-19 464 y Fm(\017)25 b Fp(br)p 84 464
V 17 w(condbit)10 b Fn(speci\002es)h(which)f(of)h(the)f(\(up)g(to)h
(256\))f(condition)g(code)g(bits)h(is)g(being)f(tested)h(by)g(the)f
(conditional)31 530 y(branch)k(terminating)f(the)i Fp(TIP)p
Fn(.)h(The)f(sense)h(of)e(the)g(condition)g(\(branch)g(if)g
Fk(TRUE)g Fn(or)g(branch)g(if)g Fk(FALSE)p Fn(\))g(is)31
596 y(obtained)e(from)f Fp(br)p 377 596 V 18 w(ins)p
Fn(,)i(the)f(original)f Fo(P)l(owerPC)k Fn(conditional)c(branch.)-41
716 y(Another)k(set)i(of)f(important)g(data)g(structures)h(are)f(the)g
(opcode)h(formats)f(in)g Fk(dis.h)p Fn(.)28 b(The)17
b Fp(OPCODE)p 1828 716 V 18 w(B)o(ASE)-91 783 y Fk(struct)g
Fn(de\002nes)g(basic)h(information)e(used)h(in)h(parsing)f
Fo(P)l(owerPC)i Fn(operations)e(such)h(as)g(the)f(primary)f(and)h(e)o
(x-)-91 849 y(tended)11 b(opcodes.)16 b(Each)c Fo(P)l(owerPC)h
Fn(operation)e(also)h(has)g(a)g(unique)f(number)g(indicated)g(by)g(the)
h Fp(op)p 1655 849 V 17 w(num)g Fn(\002eld.)j(The)-91
915 y Fp(op)p -35 915 V 17 w(num)h Fn(v)o(alues)g(are)g(de\002ned)f(in)
h(the)g(\002le)g Fk(dis)p 778 915 V 17 w(tbl.h)p Fn(.)26
b(The)16 b Fp(page)g Fn(\002eld)f(of)h Fp(OPCODE)p 1567
915 V 18 w(B)o(ASE)f Fn(refers)h(to)f(the)-91 981 y(page)f(number)f(in)
h(an)g(old)f(1990)h(manual)f(describing)h(the)g(Po)o(wer)f(\(not)g
Fo(P)l(owerPC)p Fn(\))i(architecture.)20 b(These)15 b(numbers)-91
1048 y(are)c(probably)g(of)g(little)g(use)i(at)e(this)h(point.)j(Ho)o
(we)o(v)o(er)n(,)d(one)f(of)h(the)f(carryo)o(v)o(ers)h(of)f(this)h(is)g
(that)f(the)h(mnemonics)f(used)-91 1114 y(in)i Fk(dis)p
54 1114 V 17 w(tbl.h)g Fn(and)g Fk(dis)p 409 1114 V 17
w(tbl.c)g Fn(are)g(generally)f(Po)o(wer)n(,)h(not)f Fo(P)l(owerPC)j
Fn(mnemonics.)j(This)13 b(should)g(probably)-91 1180
y(be)f(changed)h(at)f(some)h(point.)-41 1246 y(The)18
b(\002le)g Fk(dis)p 229 1246 V 17 w(tbl.c)g Fn(contains)g(a)g(list)g
(of)f(all)h(the)g(Po)o(wer)f(and)h Fo(P)l(owerPC)h Fn(opcodes)f
(formated)f(to)h(initialize)-91 1312 y(the)e Fp(OPCODE1)f
Fk(struct)h Fn(in)f Fk(dis.h)p Fn(.)26 b Fp(OPCODE1)16
b Fn(has)g(two)f(\002elds,)i(the)f Fp(OPCODE)p 1533 1312
V 18 w(B)o(ASE)g Fn(just)f(described)-91 1379 y(and)i
Fp(OPERAND)p 247 1379 V 18 w(IN)p Fn(.)h(The)g Fp(OPERAND)p
691 1379 V 18 w(IN)g Fk(struct)f Fn(lists)g(the)h(source)f(and)g
(destination)g(operands)g(of)g(each)-91 1445 y(Po)o(wer)f(and)h
Fo(P)l(owerPC)i Fn(operation.)29 b(Operands)17 b(can)g(be)g(either)g(e)
o(xplicit)g(in)f(the)h(opcode)g(format,)h(in)f(which)g(case)-91
1511 y Fk(dis)p 2 1511 V 17 w(tbl.c)d Fn(used)h(a)g(\002eld)f(name)g
(such)h(as)g Fk(RT)f Fn(for)g(them,)h(or)f(implicit,)h(in)f(which)g
(case)h Fk(dis)p 1605 1511 V 18 w(tbl.c)f Fn(e)o(xplicitly)-91
1577 y(identi\002es)d(them.)k(F)o(or)c(e)o(xample)h Fk(CA)f
Fn(is)h(an)f(implicit)f(destination)i(of)f Fk(addic)f
Fn(\(or)h Fk(ai)g Fn(for)g(Po)o(wer\).)j(The)e(\002eld)f(names)-91
1643 y(such)j(as)g Fk(RT)f Fn(are)h(de\002ned)f(in)h(the)f(\002le)g
Fk(opcode)p 764 1643 V 18 w(fmt.h)p Fn(.)19 b(Fields)13
b(are)h(di)o(vided)f(into)g(those)g(such)h(as)h Fk(RT)e
Fn(which)g(are)-91 1710 y(renameable)f(\(generally)g(corresponding)g
(to)g(GPR')m(s,)i(FPR')m(s,)f(and)g(condition)f(code)h
(\002elds/bits\),)g(and)g(those)g(which)-91 1776 y(are)f(not)g
(renameable.)-41 1842 y(Returning)18 b(to)g(the)h(\002le)f
Fk(dis.h)p Fn(,)j(the)d Fp(OPCODE2)h Fk(struct)f Fn(is)h(de\002ned)g
(as)g(well.)35 b Fp(OPCODE2)19 b Fn(is)g(similar)-91
1908 y(to)d Fp(OPCODE1)p Fn(,)j(with)d(both)h(sharing)f(the)h(same)g
Fp(OPCODE)p 1020 1908 V 18 w(B)o(ASE)p Fn(.)g(Ho)o(we)o(v)o(er)n(,)h
(where)e Fp(OPCODE1)h Fn(symboli-)-91 1974 y(cally)f(names)g(some)h
(inputs)f(and)g(outputs,)h Fp(OPCODE2)f Fn(e)o(xplicitly)g(names)g(all)
g(inputs)g(and)g(outputs)g(of)g(a)g(parsed)-91 2041 y(instruction.)k(F)
o(or)14 b(e)o(xample,)i Fp(OPCODE1)e Fn(deals)h(with)f(the)g(general)g
(instruction,)g(e.g.)22 b Fk(and)30 b(RA,RS,RB)p Fn(,)14
b(while)-91 2107 y Fp(OPCODE2)e Fn(deals)h(with)f(a)h(speci\002c)f
(instance)h(of)f(it,)h(e.g.)j Fk(and)29 b(r3,r4,r5)p
Fn(.)-41 2173 y Fo(These)13 b Fp(OPCODE2)f Fo(format)h(instructions)g
(de\002ne)g(not)f(only)h(the)g(input)f(P)l(owerPC)i(instructions)g(to)e
Fp(D)n(AISY)p Fo(,)i(b)o(ut)-91 2239 y(also)i(the)f(VLIW)h(primitive)g
(oper)o(ations.)27 b Fn(This)16 b(ties)g(the)g(VLIW)g(architecture)f(v)
o(ery)g(closely)h(\(too)f(closely\))h(to)f(the)-91 2306
y Fo(P)l(owerPC)i Fn(architecture.)24 b(This)15 b(should)h(be)f
(changed)g(at)h(some)f(point)g(so)h(the)f(VLIW)g(architecture)g(can)g
(de\002ne)g(its)-91 2372 y(o)o(wn)d(set)h(of)f(primiti)o(v)o(e)f(ALU)h
(and)h(memory)e(operations.)915 2787 y(26)p eop
%%Page: 27 27
27 26 bop -91 50 a Fl(7)59 b(T)l(ranslation)14 b(Idiosyncrasies)-91
166 y Fj(7.1)46 b Fo(P)l(owerPC)13 b Fj(T)m(ranslation)e
(Idiosyncrasies)-41 279 y Fo(P)l(owerPC)k Fn(has)e(man)o(y)h(branch)f
(instructions)f(which)i(decrement)e(the)i Fk(ctr)f Fn(and)g(branch)g
(depending)g(on)g(whether)-91 345 y Fk(ctr)d Fn(is)g(zero,)h(possibly)g
(in)f(conjunction)g(with)g(some)g(other)g(condition.)k(Such)c(branches)
h(become)f(serializing,)h(since)-91 411 y(the)o(y)k(both)h(read)f(and)g
(set)h Fk(ctr)p Fn(.)25 b(In)15 b(a)h(practical)f(terms,)h(such)g
(branches)g(limit)f(parallelism)g(by)g(requiring)f(that)h(no)-91
478 y(more)d(than)g(one)h(loop)f(iteration)f(e)o(x)o(ecute)j(per)e(c)o
(ycle.)k(T)l(o)d(o)o(v)o(ercome)g(this)f(problem,)g(it)h(is)g(useful)f
(to)g(make)g Fk(ctr)g Fn(one)-91 544 y(of)k(the)g(non-)p
Fo(P)l(owerPC)i Fn(architected)e(GPR')m(s.)28 b(F)o(or)16
b(e)o(xample)h Fp(D)n(AISY)g Fn(makes)f(the)h Fo(P)l(owerPC)h
Fk(ctr)e Fn(synon)o(ymous)-91 610 y(with)g Fk(r32)p Fn(.)30
b(In)16 b(this)h(way)g(the)g(v)o(alue)f(in)h Fk(ctr)g
Fn(can)g(be)g(e)o(xplicitly)g(decremented)f(with)h(the)g(result)f
(renamed)h(\(e.g.)-91 676 y(to)f Fk(r63)p Fn(,)i(then)e(committed)g(to)
g Fk(ctr/r32)p Fn(.)28 b(The)17 b(renamed)f(v)o(alue)g(can)h(also)f(be)
h(e)o(xplicitly)f(compared)g(to)g(0,)i(and)-91 742 y
Fk(and)p Fn('ed)d(with)h(some)h(other)f(condition)f(if)h(need)g(be.)28
b(In)16 b(programs)f(with)h(small)h(tight)e(loops,)j(we)f(ha)o(v)o(e)f
(observ)o(ed)-91 809 y(signi\002cant)c(impro)o(v)o(ement)f(from)h
(these)h(actions.)-41 875 y(In)k(addition)g(to)h(branching)g(on)f(the)h
Fk(ctr)g Fn(v)o(alue,)i Fo(P)l(owerPC)f Fn(branches)f(can)h(of)e
(course)h(branch)g(on)g(v)o(alues)g(of)-91 941 y(condition)d(re)o
(gister)h(bits.)28 b(It)16 b(can)h(further)e(branch)h(on)g(the)g
(conjunction)g(of)g(a)g(condition)g(re)o(gister)g(bit)g(v)o(alues)g
(and)-91 1007 y(whether)c(the)g Fk(ctr)g Fn(is)h(0.)i(F)o(or)d(good,)h
(high)f(frequenc)o(y)f(performance,)h(such)h(compound)e(branches)i
(must)f(be)g(broken)-91 1073 y(into)g(simple)g(primiti)o(v)o(es,)g
(which)g(ultimately)g(branch)g(based)h(solely)f(on)g(the)h(v)o(alue)f
(of)g(a)g(single)h(bit.)-41 1140 y(F)o(or)d(similar)g(reasons,)i
Fp(D)n(AISY)f Fn(places)h(the)f Fo(P)l(owerPC)h Fn(link)f(re)o(gister)f
(in)h Fk(r33)p Fn(.)k(The)c Fk(MQ)g Fn(re)o(gister)g(from)e(the)i(Po)o
(wer)-91 1206 y(architecture)i(is)g(in)h Fk(r34)p Fn(.)19
b(This)14 b(should)g(probably)e(be)i(changed)g(at)f(some)h(point)f
(since)h(the)g Fo(P)l(owerPC)h Fn(architecture)-91 1272
y(does)e(not)f(de\002ne)g(the)g(MQ)h(re)o(gister)m(.)-41
1338 y(Although)j(it)h(does)h(not)f(do)h(so)f(in)h(this)f(v)o(ersion,)i
(it)e(would)g(be)g(worthwhile)f(for)h Fp(D)n(AISY)g Fn(to)h(maintain)e
(a)i(non-)-91 1405 y Fo(P)l(owerPC)i Fn(architected)d(re)o(gister)h
(such)g(as)h Fk(r35)e Fn(with)h(the)g(v)o(alue)f(0.)33
b(\(This)18 b(con)n(v)o(ention)g(could)f(be)h(enforced)f(by)-91
1471 y(software,)12 b(i.e.)18 b(the)13 b Fp(D)n(AISY)g
Fn(translator)n(,)g(not)g(by)f(hardware.)17 b(Since)12
b(the)h(user)g(has)h(no)e(access)j(to)d(the)h(non-)p
Fo(P)l(owerPC)-91 1537 y Fn(re)o(gisters,)h(this)f(can)g(work.\))k
(Because)d(the)f Fo(P)l(owerPC)i Fn(load)e(and)g(store)g(instructions,)
g(as)h(well)f(as)h Fk(addi)e Fn(follo)o(w)g(the)-91 1603
y(con)n(v)o(ention)j(that)g(if)g(the)g Fk(RA)g Fn(\002eld)g(is)h(0,)h
(it)e(means)g(literal)g(0,)i(not)e(the)g(contents)g(of)g
Fk(r0)p Fn(,)i(ha)o(ving)e(a)g(VLIW)h(re)o(gister)-91
1669 y(dedicated)d(to)g(0)g(makes)g(scheduling)g(much)g(easier)m(.)19
b(T)l(o)13 b(see)h(this)f(more)g(clearly)m(,)g(consider)g(a)g(load)g
(instruction)g(with)-91 1736 y Fk(RA)h Fn(\002eld)f Fo(not)h
Fn(equal)g(to)g(0.)21 b(Assume)14 b(this)g(load)g(is)h(scheduled)f
(early)f(with)h(its)g(result)g(placed)g(in)g(a)g(rename)g(re)o(gister)m
(.)-91 1802 y(Because)f(of)e(copy)g(propagation,)g(at)h(the)g(time)g
(of)f(this)h(early)f(load)h(the)g(v)o(alue)f(of)h(the)f
Fk(RA)h Fn(re)o(gister)g(may)f(not)h(be)g(in)f(the)-91
1868 y(same)g(re)o(gister)g(as)h(indicated)e(in)h(the)g
Fo(P)l(owerPC)i Fn(operation,)e(and)g(may)g(in)g(fact)f(be)h(in)g
Fk(r0)p Fn(.)k(F)o(or)c(e)o(xample,)g(the)g(original)-91
1934 y Fo(P)l(owerPC)k Fn(operation)d(may)h(be)g Fk(lwz)29
b(r3,8\(r4\))p Fn(.)17 b(Ho)o(we)o(v)o(er)n(,)c(at)g(the)g(time)g(the)g
Fk(lwz)g Fn(is)g(scheduled,)h(the)f(v)o(alue)g(of)-91
2000 y Fk(r4)h Fn(may)g(reside)g(in)g Fk(r0)p Fn(.)21
b(Ho)o(we)o(v)o(er)13 b(the)h(instruction)g Fk(lwz)29
b(r3,8\(r0\))13 b Fn(does)i(not)f(mean)g(load)g(from)f(the)h(address)
-91 2067 y Fk(<r0+8>)p Fn(,)i(it)f(means)g(literal)g(address)h
Fk(8)p Fn(.)24 b(T)l(o)16 b(a)o(v)o(oid)f(this)g(problem,)h(the)f
Fp(D)n(AISY)h Fn(VLIW)f(architecture)g(ought)g(not)-91
2133 y(de\002ne)e Fk(r0)g Fn(to)g(mean)g(literal)f Fk(0)p
Fn(.)18 b(T)l(o)13 b(handle)g(those)h(loads)f(and)g Fk(addi)p
Fn(')m(s)g(where)g(literal)f Fk(0)h Fn(is)h(needed,)g
Fk(r35)e Fn(could)h(be)-91 2199 y(used.)-41 2265 y(Y)-5
b(et)15 b(another)f(problem)g(arises)i(from)d(the)i Fo(P)l(owerPC)i
Fn(contains)e Fk(mtcrf)g Fn(instruction.)22 b(The)16
b Fk(mtcrf)e Fn(instruction)-91 2331 y(mo)o(v)o(es)h(an)o(y)g
(combination)f(of)h(8,)h(4-bit)e(condition)g(re)o(gister)h(\002elds)g
(from)e(a)i(GPR)g(to)g(the)g(condition)f(code)h(re)o(gister)m(.)-91
2398 y(Since)d(the)g(VLIW)g(architecture)f(has)i(more)e(than)h(8)g
(condition)f(re)o(gister)h(\002elds,)h(e)o(xtending)f(the)g
Fk(mtcrf)f Fn(instruction)-91 2464 y(must)19 b(be)h(handled.)37
b(If)18 b(the)i(VLIW)f(re)o(gisters)h(are)f(64)h(bits)f(and)h(the)f
(VLIW)h(has)g(16,)h(4-bit)e(condition)g(re)o(gister)-91
2530 y(\002elds,)13 b(then)f(a)g(simple)g(e)o(xtension)h(of)f
Fk(mtcrf)g Fn(could)g(be)g(done,)h(although)e(the)i(instruction)e
(encoding)h(would)f(likely)-91 2596 y(use)k(more)f(than)g(32)g(bits.)22
b(Since,)15 b(only)f(one)h(\002eld)f(is)g(mo)o(v)o(ed)h(in)f(man)o(y)h
(cases)g(the)g Fp(D)n(AISY)f Fn(software)g(assumes)h(the)-91
2662 y(architecture)10 b(will)g(ha)o(v)o(e)g(an)h(additional)f
(modi\002ed)g(format,)g Fk(mtcrf2)p Fn(.)k(The)e Fk(mtcrf2)d
Fn(instruction)h(has)h(3)g(operands:)915 2787 y(27)p
eop
%%Page: 28 28
28 27 bop -31 50 a Fn(1.)25 b(One)12 b(4-bit)g(condition)f(re)o(gister)
h(as)h(the)g(destination)f(for)f(the)i(instruction.)-31
158 y(2.)25 b(A)12 b(GPR)g(instruction)g(containing)g(the)g(4-bit)g
(source)g(\002eld)g(for)g(the)g(mo)o(v)o(e.)-31 265 y(3.)25
b(An)19 b(immediate)g(v)o(alue)g(specifying)g(which)h(4-bit)e(\002eld)i
(in)f(the)g(GPR)h(is)g(to)f(be)h(mo)o(v)o(ed)f(to)h(the)f(condition)31
331 y(re)o(gister)m(.)-41 439 y(The)12 b Fo(P)l(owerPC)h
Fn(condition)e(re)o(gister)g(must)h(be)f(otherwise)h(dealt)f(with)h
(carefully)m(,)f(as)h(it)f(is)h(addressable)g(in)f(3)h(ways,)-91
505 y(\(1\))d(as)i(indi)o(vidual)e(bits)h(for)g(operations)g(like)f
Fk(crnand)h Fn(and)g(conditional)f(branches,)j(\(2\))d(as)i(4-bit)e
(condition)h(re)o(gister)-91 572 y(\002elds,)k(as)g(set)f(by)g
Fk(cmp)g Fn(type)g(instructions)g(and)g(mo)o(v)o(ed)h(by)f
Fk(mtcrf2)f Fn(type)i(instructions,)f(and)g(\(3\))g(as)g(a)h(full)e
(32-bit)-91 638 y(entity)m(,)h(as)h(used)g(with)f(the)g
Fk(mfcr)g Fn(instruction)g(for)g(e)o(xample.)19 b(Dependences)14
b(set)g(at)f(one)g(le)o(v)o(el,)h(must)g(of)f(course)g(be)-91
704 y(observ)o(ed)f(at)h(other)f(le)o(v)o(els.)k(F)o(or)c(e)o(xample)g
(a)h(branch)f(cannot)g(be)g(mo)o(v)o(ed)h(abo)o(v)o(e)g(its)f(compare.)
-41 770 y(Finally)m(,)21 b(the)e Fk(CA,)30 b(OV)p Fn(,)20
b(and)g Fk(SO)f Fn(bits)h(of)f(the)h Fk(XER)f Fn(re)o(gister)h(require)
e(special)j(attention)e(in)g(order)g(to)h(attain)-91
836 y(maximum)d(parallelism.)32 b(The)19 b Fk(addic)f
Fn(instruction)f(in)h(particular)f(is)h(hea)o(vily)g(used)g(to)g
(increment)g(loop)f(inde)o(x)-91 903 y(v)o(ariables.)29
b(Alas,)18 b Fk(addic)f Fn(not)f(only)h(b)o(umps)g(the)f(v)o(alue)h(in)
g(its)g(destination)f(GPR,)h(it)g(also)g(sets)h(the)e(carry)h(v)o(alue)
-91 969 y(in)e Fk(CA)p Fn(.)g(Unless)h(this)f Fk(CA)h
Fn(v)o(alue)e(can)i(be)f(renamed,)h Fk(addic)f Fn(instructions)g(must)g
(serialize)g(because)h(of)f(the)g(output)-91 1035 y(dependence)f
(between)f(them)h(\227)g(e)o(v)o(en)f(if)h(the)f Fk(CA)h
Fn(v)o(alue)f(computed)h(is)g(ne)o(v)o(er)f(used)h(\227)g(which)f(is)h
(the)g(case)h(for)d(the)-91 1101 y(v)o(ast)17 b(majority)f(of)g(code.)
373 1083 y Fg(2)420 1101 y Fn(It)h(would)f(be)h(better)f(if)h
(compilers)f(always)h(used)g(the)g Fk(addi)g Fn(instruction)f(instead)h
(of)-91 1168 y Fk(addi)d Fn(in)h(such)g(cases.)23 b(Ho)o(we)o(v)o(er)n
(,)15 b(a)g(lar)o(ge)g(body)f(of)g(code)h(e)o(xists)h(using)e
Fk(addic)p Fn(.)22 b(T)l(o)15 b(get)g(around)f(this)h(problem,)-91
1234 y Fp(D)n(AISY)f Fn(places)f(the)h(v)o(alue)f(of)g
Fk(CA)g Fn(in)g(an)h(e)o(xtender)f(bit)g(of)g(the)h(tar)o(get)f(GPR)g
(for)g(an)g(operation)g(such)h(as)g Fk(addic)e Fn(\227)-91
1300 y(if)i(the)h Fk(addic)f Fn(was)h(e)o(x)o(ecuted)h(speculati)o(v)o
(ely)f(and)f(its)h(inte)o(ger)g(result)g(renamed)f(to)h(a)g(non-)p
Fo(P)l(owerPC)h Fn(architected)-91 1366 y(re)o(gister)m(.)23
b(When)15 b(the)g(inte)o(ger)f(result)h(is)g(committed)f(to)h(its)g
Fo(P)l(owerPC)h Fn(architected)f(re)o(gister)n(,)h(the)e
Fk(CA)h Fn(e)o(xtender)g(bit)-91 1432 y(is)i(simultaneously)g
(committed)g(to)g(the)g Fk(CA)g Fn(bit)g(in)g(the)g Fo(P)l(owerPC)i
Fk(XER)e Fn(re)o(gister)m(.)30 b(If)17 b(an)g Fk(addic)g
Fn(instruction)f(is)-91 1499 y(not)e(e)o(x)o(ecuted)g(speculati)o(v)o
(ely)m(,)h(the)f(VLIW)g(can)h(place)f(the)g(carry)f(v)o(alue)h
(directly)g(in)f(the)i Fk(CA)e Fn(bit)h(of)g(the)g Fk(XER)p
Fn(.)g(\(The)-91 1565 y(architecture)e(can)i(tell)f(speculati)o(v)o(e)h
(operations)f(by)g(their)g(non-)p Fo(P)l(owerPC)h Fn(architected)f
(destination)g(re)o(gister)m(.\))19 b(The)-91 1631 y(o)o(v)o(er\003o)o
(w)11 b(\()p Fk(OV)p Fn(\))g(and)g(summary)g(o)o(v)o(er\003o)o(w)g(\()p
Fk(SO)p Fn(\))g(bits)h(are)f(handled)h(similarly)m(,)f(e)o(xcept)h
(that)f(the)h Fk(OV)f Fn(e)o(xtender)h(bit)f(for)-91
1697 y(a)i(speculati)o(v)o(e)g(operation)g(is)g(both)g(placed)g(in)g
(the)g Fk(XER)g(OV)g Fn(bit)f(as)i(well)f(as)h Fk(or)p
Fn('ed)e(with)h(the)g Fk(SO)g Fn(bit)g(already)g(in)f(the)-91
1763 y Fk(XER)g Fn(re)o(gister)m(.)-41 1830 y(A)h(similar)f(scheme)i
(is)f(needed)h(for)e(the)h(bits)g(of)g(the)g Fk(FPSCR)g
Fn(re)o(gister)n(,)g(and)h(the)f(v)o(arious)f(combinations)h(in)g
(these)-91 1896 y(bits)d(are)g(modi\002ed)f(by)h(dif)o(ferent)e
(\003oating)h(point)g(instructions.)15 b(Se)o(v)o(eral)9
b(forms)h(of)f(the)h(\003oating)f(point)g(mo)o(v)o(e)i(re)o(gister)-91
1962 y(instruction)g(\()p Fk(FMR)p Fn(\))f(are)h(then)h(needed)g(to)f
(handle)g(updating)g(the)h(appropriate)e(combinations)h(of)g(bits)h(in)
f(the)h Fk(FPSCR)-91 2028 y Fn(from)e(the)h Fk(FPSCR)g
Fn(e)o(xtender)h(bits)f(which)g(must)h(be)f(added)h(to)f(each)h
(\003oating)e(point)h(re)o(gister)n(,)h(just)g(as)g Fk(CA)f
Fn(and)g Fk(OV)g Fn(are)-91 2094 y(added)h(to)g(each)h(general)f
(purpose)g(re)o(gister)m(.)-41 2161 y(Ev)o(en)f(the)f(condition)f(re)o
(gister)h(bits)g(need)h(such)f(e)o(xtenders)h(if)e(the)h(instructions)g
Fk(fcmpo)g Fn(and)g Fk(fcmpu)g Fn(are)g(allo)o(wed)-91
2227 y(to)i(be)g(renamed)g(and)h(e)o(x)o(ecuted)g(out)f(of)g(order)m(.)
j Fp(D)n(AISY)e Fn(currently)e(does)i Fk(fcmpo)f Fn(and)g
Fk(fcmpu)g Fn(in)g(order)m(.)-41 2293 y(T)l(o)f(make)g
Fp(D)n(AISY)g Fn(emulate)g(the)g(full)f Fo(P)l(owerPC)j
Fn(architecture)e(including)f(supervisor)h(code,)g(it)g(is)h(important)
e(that)-91 2359 y(the)j(machine)g(model)g(be)g(complete,)h(or)e(at)i
(least)f(easily)h(e)o(xtendable.)k(F)o(or)13 b(e)o(xample,)h
(dependencies)f(on)g(mode)g(bits)-91 2426 y(in)i(the)h(MSR)g(should)f
(be)h(modelled)f(as)h(well)g(as)g(dependences)g(on)f(se)o(gment)h(re)o
(gisters)g(and)g(B)n(A)-6 b(T')m(s.)27 b(WIMG)15 b(bits)-91
2492 y(must)c(also)g(be)h(modelled)e(for)h(correct)f(address)i
(translation.)j(There)c(are)g(machine)g(speci\002c)g(re)o(gisters)h
(such)f(as)h(HID0)p -91 2537 825 2 v -33 2567 a Ff(2)-16
2582 y Fe(The)e Fa(D)o(AISY)g Fe(compiler)g(does)g(not)g(ha)o(v)o(e)h
(suf)o(\002cient)f(time)g(to)f(do)h(a)h(li)o(v)o(eness)f(analysis)g(to)
g(determine)g(with)f(certainty)g(that)h(the)g(v)o(alue)g(in)-91
2637 y Fi(CA)g Fe(is)g(dead.)915 2787 y Fn(28)p eop
%%Page: 29 29
29 28 bop -91 50 a Fn(on)14 b(the)g(604,)g(which)g(also)h(must)f(be)g
(modelled.)20 b(In)14 b(general,)g(it)g(is)g(probably)f(easiest)i(to)f
(pick)g(a)g(speci\002c)h Fo(P)l(owerPC)-91 116 y Fn(implementation,)c
(and)i(strictly)f(model)g(it.)-91 233 y Fj(7.2)46 b(Other)12
b(Idiosyncrasies)-41 351 y Fn(There)g(are)h(man)o(y)f(data)h
(structures)f(in)h Fp(D)n(AISY)g Fn(which)f(are)g(li)o(v)o(e)h(only)f
(during)g(the)g(formation)f(of)h(a)h(single)g(group.)-91
417 y(It)g(would)f(be)i(useful)f(to)g(ha)o(v)o(e)h(a)g(special)f
Fk(malloc)g Fn(for)g(such)h(structures,)f(with)g(all)h(such)g(memory)e
(being)h(automat-)-91 483 y(ically)j(free')n(d)e(after)i(the)g
(translation)g(of)f(each)i(group)e(is)i(complete.)27
b Fp(D)n(AISY)16 b Fn(has)h(an)f(incomplete)g(and)g(a)o(wkward)-91
549 y(implementation)11 b(of)h(this)g(special)h Fk(malloc)p
Fn(.)-41 616 y(Simulation)k(code)i(must)f(be)h(managed)f(in)g(a)h
(parallel)f(fashion)g(to)g(the)h(actual)f(VLIW)h(binary)f(code.)34
b(That)19 b(is)-91 682 y(when)c(VLIW)h(code)f(for)g(a)g(group)g(is)g
(formed,)h(the)f(simulation)g(code)g(must)h(also)f(be)h(formed)e
(\(until)g(we)i(ha)o(v)o(e)g(real)-91 748 y(hardware\).)31
b(Like)o(wise)19 b(when)f(a)g(VLIW)g(group)g(is)g(destroyed)g(the)g
(simulation)f(code)i(must)f(also)g(be)h(destroyed.)-91
814 y(Code)12 b(should)h(be)f(written)f(with)h(this)h(in)f(mind)g(so)g
(that)g(VLIW)h(code)f(and)g(simulation)g(code)g(are)h(handled)f(by)g
(paired)-91 881 y(function)f(calls)i(or)f(some)h(like-minded)d
(construct.)-41 947 y(There)g(are)g(se)o(v)o(eral)g(shortcomings)g(to)g
(the)g(current)f Fp(D)n(AISY)h Fn(implementation)f(which)h(could)g(and)
g(should)g(cleaned)-91 1013 y(up.)15 b(First,)d Fp(D)n(AISY)f
Fn(has)h(no)f(simple,)h(clean)g(way)f(to)g(get)g(a)h(scratch)f(re)o
(gister)g(for)g(use)h(by)f(the)g(compiler)g(in)g(generating)-91
1079 y(intermediate)18 b(v)o(alues)h(or)g(v)o(alues)g(needed)h(only)e
(by)h Fp(D)n(AISY)h Fn(and)f(not)g(the)g(original)f Fo(P)l(owerPC)j
Fn(code,)h(e.g.)36 b(the)-91 1145 y(destination)14 b(of)f(an)i
Fk(LRA)f Fn(instruction.)20 b(Ne)o(xt,)15 b Fp(D)n(AISY)g
Fn(has)g(no)f(simple)g(clean)g(way)g(to)g(delete)g(operations.)21
b(This)15 b(is)-91 1212 y(particularly)c(painful,)h(when)h(a)g
Fo(P)l(owerPC)h Fn(instruction)e(maps)h(to)f(se)o(v)o(eral)h(VLIW)g
(primiti)o(v)o(es,)f(and)g(it)h(is)g(not)f(kno)o(wn)-91
1278 y(ahead)17 b(of)g(time)g(if)g(those)g(primiti)o(v)o(es)g(will)g
(be)g(able)g(to)g(be)h(scheduled)f(early)m(.)30 b(\(This)18
b(happens,)h(for)d(e)o(xample,)j(on)-91 1344 y Fo(P)l(owerPC)c
Fk(loads)f Fn(going)f(to)h(VLIW)g Fk(load)f Fn(\226)h
Fk(load-verify)e Fn(operations.\))20 b(If)13 b(all)g(the)h(operations)g
(cannot)f(be)-91 1410 y(scheduled)d(early)m(,)g(then)g(the)o(y)f(must)h
(often)f(all)h(be)g(deleted.)15 b(The)10 b(current)f
Fp(D)n(AISY)h Fn(does)g(not)g(make)f(this)h(easy)m(.)15
b(Finally)m(,)-91 1476 y(the)j(current)g Fp(D)n(AISY)g
Fn(assumes)i(that)e(the)h(VLIW)f(primiti)o(v)o(e)f(operations)h(will)g
(look)g(v)o(ery)h(much)f(like)g Fo(P)l(owerPC)-91 1543
y Fn(operations,)j(\(b)o(ut)e(with)g(more)f(re)o(gisters\).)37
b(This)20 b(problem)e(results)i(from)e(the)h(front)g(and)g(back)g(ends)
h(sharing)f(a)-91 1609 y(common)12 b(opcode)g(table.)k(Clearly)c(this)g
(problem)g(should)g(be)g(a)o(v)o(oided)h(in)f(ne)o(w)g
(implementations.)-91 1746 y Fl(8)59 b(Dumping)16 b(VLIW)f
(Instructions)-41 1868 y Fn(An)10 b(assembly)h(language)g(dump)f(of)h
(the)f(generated)h(VLIW)g(code)f(is)h(generated)g(in)f(the)h(\002le)g
Fk(daisy.vliw)e Fn(if)h(the)-91 1934 y(user)j(speci\002es)h(the)g
Fk(-N)f Fn(\003ag)h(when)f(running)g Fp(D)n(AISY)g Fn(\()p
Fk(daisy)p Fn(\).)18 b(The)c(code)g(to)f(perform)f(this)i(dump)f(is)h
(lar)o(gely)f(in)-91 2000 y(the)g(\002le)g Fk(vliw)p
183 2000 15 2 v 18 w(dump.c)p Fn(.)18 b(This)d(code)e(tra)o(v)o(erses)h
(each)g(VLIW)f(group)g(\227)g(i.e.)20 b(a)14 b(tree)f(of)g(VLIW)h(tree)
f(instructions)-91 2067 y(\227)f(and)f(emits)h(the)g(VLIW)g
(instructions.)j(The)d(most)g(natural)g(way)f(to)h(tra)o(v)o(erse)f(a)h
(VLIW)g(group)g(is)g(by)f(starting)h(with)-91 2133 y(the)f
Fp(entry)g(TIP)h Fn(of)f(the)g(\002rst)g(VLIW)h(instruction)e(and)i
(follo)o(wing)d(its)j Fp(left)e Fn(and)i Fk(right)f Fn(links)g(in)g
(depth-\002rst)f(fashion)-91 2199 y(to)j(each)g(e)o(xit)g(of)f(the)h
(group.)k(Unfortunately)11 b(this)i(depth-\002rst)f(tra)o(v)o(ersal)h
(does)g(not)g(group)f(together)g(the)h(operations)-91
2265 y(in)e(a)h(single)g(VLIW)f(tree)h(instruction.)i(Thus)f(the)e
(dumper)g(\002rst)g(tra)o(v)o(erses)h(the)g(group)f(to)g(\002nd)g(the)h
(indi)o(vidual)e(VLIW)-91 2331 y(tree)i(instructions,)g(and)h(then)f
(for)f(each)i(such)g(instruction)e(emits)i(the)f(code.)-41
2398 y(Emitting)h(the)h(code)g(for)g(a)g(VLIW)g(tree)g(instruction)f
(subdi)o(vides)h(into)g(emitting)f(the)h(code)g(for)f(each)i
Fp(TIP)g Fn(of)e(the)-91 2464 y(instruction.)19 b(As)14
b(noted)f(in)h(Section)f(6)h(the)g(ALU)g(and)g(memory)e(ops)i(are)g
(contained)g(in)f(the)h Fp(op)f Fn(\002eld)h(of)f(the)h(tip)f(\(in)-91
2530 y(re)o(v)o(erse)h(order\).)19 b(The)c(tips)f(are)g(glued)g
(together)f(using)h(the)g Fp(left)p Fn(,)g Fp(right)f
Fn(and)i Fp(br)p 1326 2530 V 17 w(condbit)e Fn(\002elds)h(of)g
Fp(TIP)p Fn(.)h(Figure)e(9)-91 2596 y(illustrates)f(the)g(output)g
(corresponding)g(to)g(the)g(two)g(VLIW)g(instructions)g(in)g(Figure)g
(7)g(on)g(page)h(16.)-41 2662 y(There)f(are)h(se)o(v)o(eral)f(points)g
(to)g(note)h(about)f(the)g(dump)g(in)g(Figure)g(9:)915
2787 y(29)p eop
%%Page: 30 30
30 29 bop -91 566 a Fk(V1:)-91 632 y(T1_27738b58:)716
b(#)30 b(0xd01b7244,)e(Cnts)i(Offset:)f(0)28 698 y(cax)209
b(r1,r2,r3)28 765 y(bc)239 b(12,2,T1_27738e4c)178 b(#)388
b(SKIP)-91 831 y(T1_27738c54:)716 b(#)388 b(Cnts)30 b(Offset:)f(0)28
897 y(xor)209 b(r63,r5,r6)28 963 y(b)269 b(T1_27738d50)-91
1029 y(T1_27738e4c:)716 b(#)30 b(0xd01b7260,)e(Cnts)i(Offset:)f(4)28
1096 y(sf)239 b(r9,r10,r11)28 1162 y(b)269 b(OFFPAGE)-91
1294 y(V2:)-91 1361 y(T1_27738d50:)716 b(#)30 b(0xd01b7254,)e(Cnts)i
(Offset:)f(8)28 1427 y(rlinm)149 b(r12,r1,3,0,28)28 1493
y(or)239 b(r4,r63,r63)28 1559 y(and)209 b(r8,r63,r7)28
1625 y(bc)239 b(4,5,T1_27739044)208 b(#)388 b(SKIP)-91
1692 y(T1_27738f48:)716 b(#)30 b(0xd01b7258,)e(Cnts)i(Offset:)f(8)28
1758 y(b)269 b(OFFPAGE)-91 1824 y(T1_27739044:)716 b(#)30
b(0xd01b7268,)e(Cnts)i(Offset:)f(c)28 1890 y(cntlz)149
b(r11,r63)28 1956 y(b)269 b(OFFPAGE)416 2118 y Fh(Figure)12
b(9.)f(Example)g(of)h(VLIW)f(dump)i(output)g(with)e Fk(-N)h
Fh(\003ag.)915 2787 y Fn(30)p eop
%%Page: 31 31
31 30 bop -19 50 a Fm(\017)25 b Fn(Po)o(wer)n(,)12 b(not)g
Fo(P)l(owerPC)i Fn(mnemonics)e(are)g(used.)-19 158 y
Fm(\017)25 b Fn(VLIW)16 b(tree)g(instructions)g(be)o(gin)g(at)g(labels)
h(of)e(the)h(form)f Fk(Vn:)p Fn(,)j(where)e Fk(n)g Fn(is)g(a)h(count)f
(that)g(starts)g(at)g(1)g(and)31 224 y(increases)d(for)e(the)i(entire)e
(e)o(x)o(ecution)i(of)f Fp(D)n(AISY)p Fn(.)-19 331 y
Fm(\017)25 b Fp(TIP)14 b Fn(edges)f(are)g(labelled)f(as)i
Fk(Tn)p 615 331 15 2 v 17 w(12345678)p Fn(,)f(where)g(the)f
Fk(n)h Fn(indicates)g(which)g(in)n(v)o(ocation)f(of)g(the)h
Fp(D)n(AISY)31 398 y Fn(translator)i(produced)h(this)h(tip.)27
b(As)17 b(can)g(be)f(seen)h(from)e(Figure)h(9,)i(this)e(count)g(be)o
(gins)h(at)g(1.)28 b(T)l(o)16 b(be)h(more)31 464 y(precise,)12
b(this)g(count)g(is)g(the)g Fp(xlate)p 627 464 V 17 w(entry)p
758 464 V 18 w(cnt)f Fn(v)o(ariable)g(b)o(umped)h(on)g(each)g(in)n(v)o
(ocation)f(of)h(the)f Fp(xlate)p 1810 464 V 18 w(entry\(\))31
530 y Fn(function)g(discussed)i(in)e(Section)h(2.2.)k(The)c
Fk(12345678)f Fn(is)h(the)g(he)o(x)g(address)h(of)e(the)h
Fp(TIP)h Fk(struct)e Fn(for)g(this)31 596 y(tip,)h(as)g(described)g(in)
g(Section)f(6.)16 b(The)c Fp(TIP)h Fk(struct)f Fn(memory)f(is)h
(reclaimed)f(after)g(each)i(page)f(translation,)31 663
y(so)j(an)g(address)g(does)g(not)f(uniquely)g(identify)g(a)h(tip.)23
b(Ho)o(we)o(v)o(er)14 b(the)g Fd(<)h Fo(in)n(vocation)f(count)p
Fn(,)i Fp(TIP)f Fo(addr)n(ess)h Fd(>)31 729 y Fn(pair)c(do.)-19
836 y Fm(\017)25 b Fn(Onpage)12 b(branches)g(and)g(intra-VLIW)f
(conditional)h(branches)g(use)h(tip)e(labels)i(to)f(indicate)g(their)f
(tar)o(gets.)16 b(F)o(or)31 903 y(e)o(xample,)11 b(the)f(\002rst)f
Fk(bc)h Fn(operation)f(in)h(VLIW)g(instruction)g Fk(V1)f
Fn(branches)h(to)g(the)g(last)h(tip)e(in)h Fk(V1)p Fn(.)15
b(As)10 b(discussed)31 969 y(in)j(Section)g(3,)h(this)f
Fk(bc)g Fn(is)h(not)f(really)g(a)h(branch,)f(b)o(ut)g(a)h(mask)g(to)f
(indicate)g(which)g(operations)g(in)g Fk(V1)g Fn(should)31
1035 y(e)o(x)o(ecute,)20 b Fk(cax,)29 b(xor)17 b Fn(or)g
Fk(cax,)29 b(sf)p Fn(.)i(Such)17 b(conditional)g(branch/mask)g
(instructions)g(are)g(commented)31 1101 y(with)e(a)h
Fk(SKIP)g Fn(annotation)f(in)h(the)g(dump)f(as)h(can)g(be)g(seen)h(in)f
(Figure)f(9.)26 b(The)16 b Fk(b)30 b(T1)p 1586 1101 V
18 w(27738d50)15 b Fn(in)g(the)31 1168 y(middle)d Fp(TIP)h
Fn(of)f Fk(V1)g Fn(is)h(actually)f(a)h(branch)f(to)g(the)g(ne)o(xt)h
(VLIW)f(instruction)g Fk(V2)p Fn(.)-19 1275 y Fm(\017)25
b Fn(The)c(he)o(x)g(numbers)g(after)f(the)h Fk(#)g Fn(such)h(as)f
Fk(0xd01b7244)f Fn(in)h Fk(V1)g Fn(indicate)f(the)h(address)h(of)e(the)
h Fo(P)l(ow-)31 1341 y(erPC)16 b Fn(branch)e(terminating)g(the)h(tip.)
23 b(In)14 b(other)g(words,)i(the)e Fk(bc)30 b(12,2,T1)p
1411 1341 V 17 w(27738e4c)14 b Fn(was)h(at)g(address)31
1408 y(0xd01b7244)c(in)h(the)g(original)f Fo(P)l(owerPC)k
Fn(program.)f(Note)e(that)g(the)g(branch)g(terminating)f(the)h(middle)g
(tip)g(of)31 1474 y Fk(V1)j Fn(does)h(not)g(ha)o(v)o(e)g(an)g(address.)
26 b(This)16 b(is)g(because)h(this)e(branch)h(does)g(not)f(correspond)g
(to)h(an)o(y)g Fo(P)l(owerPC)31 1540 y Fn(branch,)c(b)o(ut)g(instead)h
(to)f(a)h(branch)f(between)g(VLIW)h(instructions.)-19
1648 y Fm(\017)25 b Fn(Each)13 b(e)o(xit)f(tip)g(of)g(a)g(VLIW)g
(instruction)g(has)h(a)f(counter)g(associated)h(with)f(used)g(for)g
(tracking)f(the)h(number)g(of)31 1714 y(times)i(that)h(this)f(tip)g(e)o
(x)o(ecutes)i(during)e(the)g(e)o(x)o(ecution)h(of)f(the)g(translated)g
(program.)21 b(The)16 b Fk(Cnts)29 b(Offset)31 1780 y
Fn(v)o(alues)12 b(in)f(Figure)g(9)h(refer)e(to)i(the)g(location)f(of)g
(the)h(associated)g(e)o(xit)g(tip')m(s)g(count)f(v)o(alue)h(as)g(an)g
(of)o(fset)f(from)f(the)31 1846 y(start)k(of)g(the)h(counts)g(area.)22
b(These)16 b Fk(Cnts)29 b(Offset)14 b Fn(v)o(alues)h(can)g(sometimes)f
(be)h(useful)f(in)h(deb)o(ugging)f(as)31 1913 y(described)f(in)g
(Section)g(10.)18 b Fo(Caution:)e Fn(F)o(or)d(lar)o(ge)g(programs)f
(like)h Fk(gcc)p Fn(,)h(the)f(counts)g(area)g(may)g(not)g(be)h(lar)o
(ge)31 1979 y(enough)d(to)g(hold)g(a)g(count)g(v)o(alue)h(for)e(all)h
(tips.)16 b(In)11 b(such)g(cases)i(the)e Fk(-I)g Fn(\003ag)g(can)h(be)f
(speci\002ed)h(with)f Fk(daisy)g Fn(to)31 2045 y(suppress)j(generation)
f(of)g(such)h(counts.)20 b(\(This)13 b(also)h(speeds)h(simulation)e(at)
g(the)h(e)o(xpense)g(of)g(not)f(collecting)31 2111 y(as)g(much)f(man)o
(y)g(statistics)h(on)g(the)f(translation.\))-91 2252
y Fl(9)59 b(VLIW)15 b(Simulation)f(Code)-41 2376 y Fn(Most)h(of)g(the)g
(simulation)g(code)g(resides)h(in)f(three)g(\002les,)h
Fk(simul.c)p Fn(,)g Fk(ppc)p 1309 2376 V 17 w(map.c)p
Fn(,)g(and)f Fk(ccr-v2p.c)p Fn(.)24 b(The)-91 2442 y(entry)18
b(point)f(for)h(generating)g(simulation)g(code)g(is)h
Fp(vliw)p 941 2442 V 17 w(to)p 1000 2442 V 18 w(ppc)p
1096 2442 V 17 w(gr)o(oup\(\))e Fn(in)h Fk(simul.c)p
Fn(.)34 b(In)17 b(much)i(the)f(same)-91 2508 y(manner)h(as)h(a)f(VLIW)h
(assembly)g(language)f(listing)g(is)h(dumped,)i Fp(vliw)p
1218 2508 V 17 w(to)p 1277 2508 V 17 w(ppc)p 1372 2508
V 18 w(gr)o(oup\(\))c Fn(tra)o(v)o(erses)i(the)f(VLIW)-91
2575 y(instructions)d(in)h(a)g Fo(gr)n(oup)f Fn(and)h(generates)g
Fo(P)l(owerPC)h Fn(code)f(to)g(emulate)f(the)h(action)g(of)f(the)h
(VLIW)f(instructions.)-91 2641 y(\(Section)11 b(8)i(describes)f(ho)o(w)
g(VLIW)h(instructions)f(are)g(dumped.\))915 2787 y(31)p
eop
%%Page: 32 32
32 31 bop -91 31 a Fk(V1_SIM:)28 97 y(cax)149 b(r31,r2,r3)567
b(#)30 b(cax)89 b(r1,r2,r3)28 163 y(stw)149 b
(r31,R1_SHADOW_OFFSET\(r13\))28 229 y(lwz)g(r31,CR0_OFFSET\(r13\))267
b(#)30 b(bc)119 b(12,2,T1_27738e4c)28 295 y(mtcrf)89
b(0x80,r31)28 362 y(bc)179 b(4,2,LSIM1)567 b(#)30 b(Inverted)f(branch)g
(sense)28 428 y(liu)149 b(r31,LSIM2_HIGH)417 b(#)30 b(Construct)f
(target)g(addr)28 494 y(oril)119 b(r31,r31,LSIM2_LOW)327
b(#)30 b(i.e.)g(LSIM2)28 560 y(mtlr)119 b(r31)28 626
y(blrl)956 b(#)30 b(Branch)f(to)h(orig)f(bc)h(targ)-91
759 y(LSIM1:)28 825 y(xor)149 b(r31,r5,r6)567 b(#)30
b(xor)89 b(r63,r5,r6)28 891 y(stw)149 b(r31,R63_SHADOW_OFFSET\(r13\))
1104 958 y(#)30 b(VLIW)g(regs:)f(par)g(semantics)28 1024
y(lwz)149 b(r1,R1_SHADOW_OFFSET\(r13\))117 b(#)30 b(Set)g(r1)f(at)h
(end)g(of)f(V1)28 1090 y(lwz)149 b(r31,R63_SHADOW_OFFSET\(r13\))57
b(#)30 b(Set)g(r63)f(at)h(end)f(of)h(V1)28 1156 y(stw)149
b(r31,R63_OFFSET\(r13\))28 1289 y(liu)g(r31,V2_SIM_HIGH)387
b(#)30 b(Construct)f(V2)h(simul)f(addr)28 1355 y(oril)119
b(r31,r31,V2_SIM_LOW)28 1421 y(mtlr)g(r31)28 1487 y(blrl)956
b(#)30 b(Branch)f(to)h(V2)g(simul)f(code)-91 1620 y(LSIM2:)1015
b(#)30 b(Targ)g(of)f(bc)h(12,2,T1_27738e4c)28 1686 y(subfc)89
b(r31,r10,r11)507 b(#)30 b(sf)119 b(r9,r10,r11)28 1752
y(stw)149 b(r31,R9_SHADOW_OFFSET\(r13\))1104 1818 y(#)30
b(VLIW)g(regs:)f(par)g(semantics)28 1884 y(lwz)149 b
(r1,R1_SHADOW_OFFSET\(r13\))117 b(#)30 b(Set)g(r1)f(at)h(end)g(of)f(V1)
28 1951 y(lwz)149 b(r9,R9_SHADOW_OFFSET\(r13\))117 b(#)30
b(Set)g(r9)f(at)h(end)g(of)f(V1)28 2083 y(liu)149 b(r27,0xd01b)537
b(#)30 b(Offpage)f(target)g(address)28 2149 y(oril)119
b(r27,r27,0x8180)417 b(#)30 b(is)g(0xd01b8180)f(==>)g(r27)28
2216 y(lil)149 b(r26,1)687 b(#)30 b(Direct)f(Offpage)g(Branch=1)28
2348 y(liu)149 b(r31,xlate_entry_raw_HIGH)117 b(#)30
b(Construct)f(xlate_entry_raw)28 2414 y(oril)119 b
(r31,r31,xlate_entry_raw_LOW)27 b(#)j(address)28 2480
y(mtlr)119 b(r31)28 2547 y(blrl)956 b(#)30 b(Branch)f(to)h
(xlate_entry_raw)257 2708 y Fh(Figure)13 b(10.)e(Generation)i(of)f(Sim)
o(ulation)e(Code)j(f)o(or)f(a)f(VLIW)h(T)m(ree)g(Instruction.)915
2787 y Fn(32)p eop
%%Page: 33 33
33 32 bop -41 50 a Fn(Figure)9 b(10)i(has)g(simulation)f(code)h(for)e
(VLIW)i(instruction)f Fk(V1)g Fn(in)h(Figure)f(9.)15
b(This)c(simulation)f(code)h(is)g(generated)-91 116 y(as)i(follo)o(ws:)
-19 236 y Fm(\017)25 b Fn(The)19 b(\002rst)g(ALU/memory)g(operation)f
(of)h Fk(V1)g Fn(is)g Fk(cax)30 b(r1,r2,r3)p Fn(.)35
b(Thus)20 b(the)f(simulation)g(code)g(must)31 302 y(perform)d(this)j
Fk(cax)f Fn(\(or)f Fk(add)p Fn(\))h(operation)f(as)i(well.)33
b(Most)19 b(of)e(the)h(VLIW)h(re)o(gisters)f(are)g(kept)g(at)g(kno)o
(wn)31 369 y(memory)13 b(locations.)20 b(Ho)o(we)o(v)o(er)n(,)14
b(for)f(ef)o(\002cienc)o(y)g(reasons)i(and)e(for)g(ease)i(of)e
(interfacing)g(to)g(other)h Fo(P)l(owerPC)31 435 y Fn(code,)k(some)e
(of)g(the)g(VLIW)h(re)o(gisters)f(are)h(actually)f(kept)f(in)i
Fo(P)l(owerPC)h Fn(re)o(gisters.)28 b(In)16 b(particular)n(,)g(VLIW)31
501 y(re)o(gisters)e Fk(r1-r12)g Fn(are)g(kept)g(in)g(real)g
Fo(P)l(owerPC)j Fn(re)o(gisters)d Fk(r1-r12)p Fn(.)21
b(Like)o(wise)15 b(\003oating)e(point)h(re)o(gisters)31
567 y Fk(fp0-??)g Fn(are)c(kept)g(in)h(real)f Fo(P)l(owerPC)i
Fn(re)o(gisters.)j(Thus)d(the)e(inputs)h(for)e(the)i
Fk(cax)f Fn(instruction)g(come)g(directly)31 633 y(from)h
Fo(P)l(owerPC)j Fn(re)o(gisters)f Fk(r1)f Fn(and)g Fk(r2)h
Fn(as)f(sho)o(wn)h(in)f(Figure)f(10.)31 720 y(The)h(destination,)g
Fk(r1)p Fn(,)h(is)f(of)g(course)g(also)g(kept)f(in)h(a)g(real)g
Fo(P)l(owerPC)i Fk(r1)p Fn(.)h(Ho)o(we)o(v)o(er)n(,)d(recall)g(from)e
(Section)i(3,)31 787 y(that)g(VLIW)h(instructions)f(use)h(parallel)f
(semantics,)i(and)f(hence)f(an)o(y)h(uses)h(of)e Fk(r1)h
Fn(in)f(VLIW)h(instruction)f Fk(V1)31 853 y Fn(should)f(get)g(the)g
(old)g(v)o(alue)g(of)f Fk(r1)p Fn(,)i(not)f(the)g(ne)o(w)g(v)o(alue)g
(computed)f(by)h Fk(cax)p Fn(.)k(Thus)d(the)f Fk(cax)g
Fn(result)g(is)g(placed)31 919 y(in)17 b Fk(r31)p Fn(,)i(and)e(then)g
(placed)g(in)h(a)f(shado)o(w)g(v)o(ersion)h(of)f Fk(r1)p
Fn(.)30 b(At)17 b(the)g(end)h(of)f(the)g(VLIW)g(instruction,)h(this)31
985 y(shado)o(w)12 b(v)o(ersion)g(of)g Fk(r1)h Fn(will)f(be)g(copied)g
(to)h(the)f(real)g Fk(r1)p Fn(,)h(as)g(e)o(xplained)f(belo)o(w)m(.)31
1072 y(Since)i(only)g(VLIW)g(inte)o(ger)g(re)o(gisters)g
Fk(r1-r12)g Fn(are)g(kept)f(in)h(the)g(corresponding)g
Fo(P)l(owerPC)i Fn(re)o(gister)n(,)e(the)31 1138 y(other)e
Fo(P)l(owerPC)i Fn(inte)o(ger)e(re)o(gisters)g(are)h(a)o(v)o(ailable)f
(for)f(scratch)i(computation.)i(In)d(particular)f(note:)89
1259 y Fp(\226)24 b Fk(r31)12 b Fn(is)h(used)g(to)f(hold)g(the)g
(result)g(of)g(the)h Fk(cax)p Fn(.)89 1346 y Fp(\226)24
b Fk(r13)12 b Fn(is)g(used)g(to)g(access)h(the)f(location)f(of)g(the)h
(shado)o(w)g(re)o(gister)f(for)g Fk(r1)p Fn(.)16 b Fk(r13)c
Fn(is)g(used)g(throughout)e(the)138 1412 y(simulation)g(code)h(to)f
(access)i(needed)e(v)o(alues)h(\226)f(not)h(just)f(re)o(gisters)h(and)f
(their)g(shado)o(ws,)i(b)o(ut)e(simulation)138 1478 y(counts,)k(hash)g
(tables,)g(and)f(other)f(v)o(alues.)19 b(This)13 b(is)h(analogous)f(to)
g(the)g(use)h(of)f Fk(r2)g Fn(in)g(AIX)f(code)i(as)f(the)138
1544 y Fk(TOC)f Fn(pointer)m(.)-19 1664 y Fm(\017)25
b Fn(The)18 b(ne)o(xt)f(operation)f(in)i Fk(V1)f Fn(after)f(the)i
Fk(cax)f Fn(is)g(a)h Fk(bc)p Fn(.)30 b(Note)17 b(that)g(the)h
Fk(bc)f Fn(in)g(Figure)f(9)i(reads)f(condition)31 1731
y(re)o(gister)g(bit)g Fk(2)p Fn(.)30 b(Thus)18 b(the)g(simulation)e
(code)i(must)f(\002rst)g(read)g(bit)g Fk(2)g Fn(as)h(well.)31
b(The)18 b(simulator)e(keeps)h(all)31 1797 y(64-256)e(bits)i(of)f(the)g
(condition)g(re)o(gister)g(in)h(memory)e(\227)h(none)h(are)f(kept)g(in)
g(real)h Fo(P)l(owerPC)h Fn(re)o(gisters,)g(as)31 1863
y(with)13 b(some)i(of)e(the)h(inte)o(ger)g(and)g(\003oating)f(point)h
(re)o(gisters.)21 b(The)14 b(condition)f(re)o(gister)h(bits)g(are)g
(kept)g(as)g(4-bit)31 1929 y(\002elds,)f(with)f(one)g(4-bit)g(\002eld)g
(stored)g(in)g(the)g(high)g(order)g(4)g(bits)h(of)f(a)g(full)g(32-bit)f
(word.)31 2016 y(Thus)g(the)g(simulation)g(code)g(in)g(Figure)f(10)h
(\002rst)g(loads)g(the)g(4-bit)f(\002eld)h(\()p Fk(CR0)p
Fn(\))f(from)g(memory)g(into)h Fo(P)l(owerPC)31 2082
y Fn(re)o(gister)j Fk(r31)p Fn(.)22 b(In)15 b(order)e(to)i(branch)f(on)
h(bit)f Fk(2)p Fn(,)i(the)e(v)o(alue)h(of)f Fk(CR0)g
Fn(must)h(be)f(placed)h(in)g(the)f(real)h Fo(P)l(owerPC)31
2149 y Fn(condition)c(re)o(gister)n(,)h(thus)f(the)h
Fk(mtcrf)f Fn(instruction)g(which)g(places)i(the)e(VLIW)h
Fk(CR0)f Fn(v)o(alue)h(in)f(the)h Fo(P)l(owerPC)31 2215
y Fk(CR0)g Fn(\002eld.)31 2302 y(It)h(then)g(remains)g(to)g(actually)g
(branch.)18 b(The)c(simulation)f(code)g(corresponding)f(to)i(the)f(tar)
o(get)g(of)g(the)g(branch)31 2368 y(can)f(be)g(arbitrarily)e(far)h(a)o
(way)m(.)16 b(Why)11 b(can)h(the)g(tar)o(get)g(be)g(arbitrarily)e(far)h
(a)o(way?)k(Note)d(that)g(there)g(may)g(not)f(be)31 2434
y(room)f(in)h(the)f(currently)g(allocated)h(chunk)g(of)f(memory)g(to)h
(place)g(all)g(of)f(the)h(simulation)f(code)h(for)f(the)h(current)31
2500 y(VLIW)18 b(instruction.)31 b(In)17 b(such)h(cases,)j(the)d
(simulator)f(places)h(an)g(unconditional)f(branch)g(to)h(an)g
(arbitrary)31 2567 y(32-bit)c(location)g(where)h(the)g(simulation)f
(code)h(continues.)24 b(The)15 b(code)g(for)g(to)f(do)h(this)g
(branching)f(is)i(in)e(the)31 2633 y Fp(dump\(\))d Fn(function)g(in)i
Fk(xlate)p 584 2633 15 2 v 17 w(mem.c)p Fn(.)915 2787
y(33)p eop
%%Page: 34 34
34 33 bop 31 50 a Fn(Since)15 b(the)g(tar)o(get)f(can)i(be)f
(arbitrarily)e(far)n(,)i(the)g(sense)h(of)f(the)g(conditional)f(branch)
h(is)g(in)n(v)o(erted,)h(so)g(that)e(the)31 116 y(original)f(branch)g
(tar)o(get)h(occurs)g(on)f(the)h(fall-through.)k(In)13
b(the)h(VLIW)g(code)g(of)g(Figure)f(9,)h(the)g(operation)f(is)31
182 y Fk(bc)29 b(12,2)10 b Fn(\227)g(branch)g(if)g(bit)f
Fk(2)h Fn(is)h(on,)g(whereas)f(in)g(the)g(simulation)g(code)g(of)g
(Figure)f(10,)i(the)f(operation)f(is)i Fk(bc)31 248 y(4,2)f
Fn(\227)h(branch)f(if)h(bit)f Fk(2)h Fn(is)g(of)o(f.)j(Immediately)c
(follo)o(wing)f(the)i(simulation)f(fall-through)e(are)j(4)f
(instructions,)31 315 y(culminating)h(with)g Fk(blr)p
Fn(,)h(to)g(construct)f(and)h(branch)f(to)h(the)f(32-bit)g(address)h
(of)g(the)f(simulation)h(code)g(for)e(the)31 381 y(tar)o(get,)i
Fk(LSIM2)g Fn(of)g(the)g(original)g(branch.)-19 489 y
Fm(\017)25 b Fk(LSIM1)15 b Fn(in)g(Figure)g(10)g(has)h(the)f(code)h
(for)e(the)i(fall-through)d(of)i(the)g(VLIW)h(branch)f(and)g(the)g(tar)
o(get)g(of)g(the)31 555 y(simulation)9 b(code)g(branch.)15
b(At)9 b(the)h(fall-through)d(of)i(the)h(VLIW)f(code)h(is)g(the)g
(operation)e Fk(xor)30 b(r63,r5,r6)p Fn(.)31 621 y(Just)16
b(as)g(with)f(the)h Fk(cax)f Fn(operation)g(earlier)n(,)h(the)f
Fk(xor)h Fn(result)f(is)h(computed)f(into)g Fo(P)l(owerPC)j
Fk(r31)d Fn(and)h(then)31 687 y(sa)o(v)o(ed)d(in)f(a)h(shado)o(w)f
(location)g(for)g Fk(r63)p Fn(.)-19 795 y Fm(\017)25
b Fn(The)10 b Fk(xor)g Fn(operation)f(terminates)h(the)g(ALU/memory)f
(operations)h(on)g(this)g(path)g(through)f(VLIW)h(instruction)31
861 y Fk(V1)p Fn(.)21 b(Thus)15 b(the)g(v)o(alues)f(in)g(the)g(shado)o
(w)h(re)o(gisters)f(can)h(be)f(copied)g(into)g(the)h(real)f(re)o
(gisters.)21 b(The)15 b(ne)o(xt)g(three)31 927 y(operations)e(in)g
(Figure)f(10)h(do)h(this.)k(Since,)c(as)g(noted)f(abo)o(v)o(e,)i(VLIW)e
Fk(r1)g Fn(is)h(kept)e(in)h Fo(P)l(owerPC)j Fk(r1)p Fn(,)d(setting)31
994 y(the)f(real)g(re)o(gister)f(for)h Fk(r1)g Fn(consists)h(of)e(a)i
(single)f Fk(lwz)g Fn(operation)f(from)g(the)h(shado)o(w)g(location)g
(to)g Fk(r1)p Fn(.)j(VLIW)31 1060 y Fk(r63)e Fn(is)h(not)f(kept)g(in)h
(a)f Fo(P)l(owerPC)j Fn(re)o(gister)n(,)e(so)g(its)f(shado)o(w)h(is)g
(\002rst)f(loaded)g(into)h Fo(P)l(owerPC)h Fk(r31)p Fn(,)f(and)g(then)
31 1126 y(stored)e(into)g(the)g(memory)g(location)g(for)f(VLIW)i
Fk(r63)p Fn(.)-19 1234 y Fm(\017)25 b Fn(Once)13 b(this)f(is)h(done)g
(the)f(simulation)g(code)h(must)g(branch)f(to)g(the)h(ne)o(xt)f(VLIW)h
(instruction)f(on)g(this)h(path,)g Fk(V2)p Fn(.)31 1300
y(The)e(full)f(32-bit)g(address)h(of)f(the)h(simulation)f(code)h(for)f
Fk(V2)h Fn(is)g(constructed)f(into)h Fo(P)l(owerPC)h
Fk(r31)p Fn(,)f(the)g(mo)o(v)o(ed)31 1366 y(to)h(the)g
Fo(P)l(owerPC)i Fk(LinkReg)p Fn(.)i(The)c(simulation)g(code)h(for)e
Fk(v2)i Fn(is)f(then)g(jumped)g(to.)-19 1474 y Fm(\017)25
b Fn(It)16 b(remains)g(to)g(look)h(at)f(the)h(simulation)f(code)g(for)g
(the)g(tar)o(get)h(of)f(the)g(conditional)g(branch)g(in)h
Fk(V1)f Fn(and)g(the)31 1540 y(fall-through)10 b(of)i(the)g(simulation)
g(code)g(that)g(xbranch.)k(This)d(code)f(is)h(at)f Fk(LSIM2)g
Fn(in)g(Figure)g(10.)-19 1648 y Fm(\017)25 b Fn(The)13
b(operation)e(starting)h(this)g(edge)h(in)f(the)g(VLIW)h(code)f(in)g
(Figure)g(9)g(is)h Fk(sf)29 b(r9,r10,r11)p Fn(.)15 b(This)e
Fk(sf)f Fn(\(or)31 1714 y Fk(subfc)p Fn(\))h(is)h(handled)g(just)f(as)i
(were)f(the)f Fk(cax)h Fn(and)g Fk(xor)g Fn(operations)f(earlier)n(,)h
(with)f(the)h(result)g(being)g(stored)31 1780 y(in)e(the)g(shado)o(w)h
(location)f(for)f Fk(r9)p Fn(.)-19 1888 y Fm(\017)25
b Fn(W)n(ith)16 b(the)g Fk(subfc)g Fn(is)h(complete,)h(the)e
(ALU/memory)g(operations)g(for)f(this)i(path)f(through)g(VLIW)g
Fk(V1)g Fn(are)31 1954 y(\002nished.)j(Just)14 b(as)g(on)f(the)h(other)
f(path,)h(shado)o(w)f(v)o(alues)h(are)f(copied)h(to)f(their)g(real)g
(re)o(gisters.)20 b(Since)13 b Fk(r1)g Fn(and)31 2020
y Fk(r9)f Fn(were)g(set)h(on)f(this)h(path,)f(these)h(re)o(gisters)g
(are)f(updated.)-19 2128 y Fm(\017)25 b Fn(The)14 b(culmination)f(of)h
(this)g(path)g(dif)o(fers)f(from)f(the)i(other)g(path)g(ho)o(we)o(v)o
(er)n(,)g(in)g(that)f(the)h(tar)o(get)g(is)g(not)g(another)31
2194 y(VLIW)e(instruction,)g(b)o(ut)g(an)h Fk(OFFPAGE)e
Fn(location.)-19 2302 y Fm(\017)25 b Fn(Branching)12
b(of)o(fpage)g(works)g(as)h(follo)o(ws)f(in)h(Figure)e(10.)17
b Fo(P)l(owerPC)e Fn(re)o(gister)d Fk(r27)h Fn(is)g(loaded)f(with)g
(the)h Fo(P)l(ow-)31 2368 y(erPC)k Fk(OFFPAGE)d Fn(address,)k
Fk(0xD01B8180)c Fn(in)h(this)h(case.)26 b Fo(P)l(owerPC)17
b Fn(re)o(gister)f Fk(r27)f Fn(is)h(loaded)f(with)g(the)31
2434 y(branch)9 b(type)g(\()p Fk(1)g Fn(for)f Fk(OFFPAGE)p
Fn(\))h(of)g(this)g(branch.)15 b(Then)9 b(the)h(address)g(of)f(the)g
(function)f Fk(xlate)p 1715 2434 15 2 v 18 w(entry)p
1883 2434 V 17 w(raw)31 2501 y Fn(is)14 b(constructed)f(into)g
Fo(P)l(owerPC)j Fn(re)o(gister)d Fk(r31)p Fn(,)h(which)g(is)g(then)f
(copied)h(to)f(the)h Fo(P)l(owerPC)h Fk(LinkReg)p Fn(.)k(The)31
2567 y(\002nal)12 b Fk(blr)g Fn(goes)h(to)f Fk(xlate)p
542 2567 V 17 w(entry)p 709 2567 V 18 w(raw)p Fn(,)g(whose)h(function)e
(was)i(described)f(in)g(Section)g(2.2.)915 2787 y(34)p
eop
%%Page: 35 35
35 34 bop -41 50 a Fn(The)17 b(generation)e(of)h(the)h(simulation)f
(code)g(just)h(described)f(is)h(lar)o(gely)f(carried)g(out)g(by)h
(functions)f(in)g(the)g(\002les)-91 116 y Fk(simul.c)p
Fn(,)10 b Fk(ppc)p 234 116 15 2 v 18 w(map.c)p Fn(,)h(and)f
Fk(ccr-v2p.c)p Fn(,)h(as)g(noted)f(abo)o(v)o(e.)16 b(The)11
b(routines)f(in)g Fk(simul.c)g Fn(generally)f(handle)-91
182 y(the)16 b(control)f(\003o)o(w)g(through)g(the)g(VLIW)h
(instruction,)h(while)e(the)h(routines)f(in)h Fk(ppc)p
1409 182 V 18 w(map.c)f Fn(deal)h(with)f(the)h(ALU)-91
248 y(and)g(memory)g(operations.)27 b(Operations)16 b(on)g(the)h
(condition)e(re)o(gister)h(\227)h Fk(cmp,)29 b(fcmpo,)g(crnand,)g(mcrf)
p Fn(,)-91 315 y(etc.)16 b(are)c(dealt)g(with)g(in)h
Fk(ccr-v2p.c)p Fn(.)-41 381 y(The)g(simulation)f(code)g(in)g(Figure)g
(10)g(is)h(slightly)f(simpli\002ed)g(from)f(the)i(simulation)f(code)g
(often)g(generated.)k(F)o(or)-91 447 y(e)o(xample,)f(there)f(is)g(no)h
(code)f(to)g(increment)f(the)i(number)e(of)h(times)g(each)h(VLIW)f(e)o
(xit)g(tip)g(is)h(e)o(x)o(ecuted.)22 b(The)14 b(code)-91
513 y(to)g(do)f(such)i(a)f(b)o(ump)f(follo)o(ws)h(the)g(style)g(of)f
(code)h(in)g(Figure)f(10,)i(loading)e(the)h(address)h(of)e(the)h(count)
g(based)g(on)g(an)-91 579 y(of)o(fset)d(from)h Fk(r13)p
Fn(,)g(incrementing)g(the)g(count,)h(and)f(storing)g(it)g(back.)-41
646 y(There)h(is)h(also)f(no)g(simulation)g(code)g(to)g(call)g(a)h
(cache)f(simulator)n(,)h(trace)f(dumper)f(or)h(other)f(functions)h
(written)g(in)-91 712 y(C.)g(The)g(simulation)f(code)h(for)e(such)i
(functions)f(is)h(v)o(ery)f(similar)g(to)g(the)h(code)f(for)g(dealing)g
(with)g(of)o(fpage)g(branches.)-91 778 y(P)o(arameters)g(such)i(as)f(a)
h(load)e(address)i(are)f(placed)g(in)g(prede\002ned)f(re)o(gisters.)18
b(Then)13 b(the)g(address)h(of)e(the)h Fo(r)o(aw)h Fn(cache)-91
844 y(handler)h(routine)f(is)i(constructed)f(and)g(placed)h(in)f(the)g
Fo(P)l(owerPC)i Fk(LinkReg)p Fn(.)25 b(A)15 b Fk(blrl)g
Fn(is)h(then)f(used)h(to)f(branch)-91 911 y(to)i(the)g(ra)o(w)g(cache)g
(handler)m(.)30 b(Using)17 b(a)g Fk(branch-to-LinkReg-and-link)e
Fn(instruction)h(permits)g(the)h(ra)o(w)-91 977 y(cache)e(handler)f(to)
h(return)e(to)i(the)g(simulator)f(as)h(with)f(ordinary)g(function)g
(calls.)23 b(The)15 b(ra)o(w)g(cache)g(handler)f(copies)-91
1043 y(the)h(parameters)g(from)f(prede\002ned)g(re)o(gisters)i(to)f
(AIX)f(standard)h(re)o(gisters,)i(such)e(as)h Fk(r3,)30
b(r4,)f(...)p Fn(,)16 b(and)g(then)-91 1109 y(branches)c(to)g(a)h
(cache)g(simulator)f(written)f(in)h(C.)-41 1175 y(Note)i(that)h(the)f
(simulator)g(uses)i(the)e Fo(P)l(owerPC)j Fk(LinkReg)d
Fn(to)g(perform)g(indirect)f(branches.)23 b(Since)15
b(this)f(is)h(the)-91 1242 y(case,)i(the)f Fk(LinkReg)f
Fn(for)g(the)g(translated)g(program)g(\(e.g.)25 b Fk(/bin/ls)p
Fn(\))15 b(must)g(be)h(kept)f(else)o(where.)25 b(As)16
b(noted)g(in)-91 1308 y(Section)11 b(7.1,)i(the)f Fk(LinkReg)f
Fn(for)g(the)g(translated)h(program)f(is)h(de\002ned)f(to)h(be)g
Fk(r33)p Fn(,)g(while)f(its)h Fk(CtrReg)g Fn(is)g(de\002ned)-91
1374 y(to)g(be)g Fk(r32)p Fn(,)h(with)f(the)g(Po)o(wer)g(MQ)h(re)o
(gister)f(occupying)f(\(for)g(no)o(w\))h Fk(r34)p Fn(.)-41
1440 y(The)k(of)o(fset)f(locations)h(from)f Fk(r13)h
Fn(are)g(accessed)h(both)f(by)g(assembly)g(language)g(and)g(C)h
(routines.)26 b(In)16 b(C,)g(the)o(y)-91 1506 y(are)h(accessed)i(via)e
(the)h Fp(r13)p 411 1506 V 18 w(ar)o(ea)f Fn(pointer)m(.)31
b(In)17 b(order)f(to)i(keep)f(the)g(of)o(fsets)g(consistent)h(between)g
(the)f(C)h(and)f(as-)-91 1573 y(sembly)i(language)f(routines,)j(the)d
(of)o(fsets)h(are)f(generated)h(automatically)f(into)g(\002les)h
Fk(resrc)p 1627 1573 V 17 w(offset.h)f Fn(and)-91 1639
y Fk(r13)p 2 1639 V 17 w(hdr.s)p Fn(.)e(The)c(utility)g(that)g(does)g
(this)g(is)h Fk(gen)p 828 1639 V 18 w(resrc)e Fn(and)h(it)g(is)h
(created)f(from)f(the)h Fk(gen)p 1605 1639 V 18 w(resrc.c)f
Fn(source)-91 1705 y(\002le.)k Fp(Do)e(not)e(manually)h(alter)g(the)g
(offsets)g(in)g Fk(resrc)p 913 1705 V 17 w(offset.h)p
Fp(!)-91 1845 y Fl(10)59 b(Deb)o(ugging)15 b(D)n(AISY)-41
1970 y Fn(Deb)o(ugging)i Fp(D)n(AISY)i Fn(is)f(often)g(tedious)g(and)g
(dif)o(\002cult)f(\227)h(at)h(least)f(deb)o(ugging)g(problems)f(that)h
(occur)g(in)g(the)-91 2036 y(translated)9 b(code,)i(as)g(opposed)f(to)f
(the)h Fp(D)n(AISY)g Fn(translator)f(itself.)15 b(F)o(or)9
b(problems)g(like)g Fk(assert)h Fn(failures)e(in)i Fp(D)n(AISY)-91
2102 y Fn(itself,)16 b(your)f(fa)o(v)o(orite)e(symbolic)i(deb)o(ugger)g
(can)h(be)f(employed.)24 b(F)o(or)14 b(the)i(translated)f(code)g(ho)o
(we)o(v)o(er)n(,)h(deb)o(ugging)-91 2168 y(is)h(generally)f(done)h(at)g
(the)g(assembly)h(language)e(le)o(v)o(el.)30 b(This)17
b(o)o(wes)h(to)e(the)h(fact)f(that)h Fp(D)n(AISY)g Fn(takes)g(as)h
(input)e(a)-91 2235 y(binary)11 b(e)o(x)o(ecutable)i(\(at)f(least)h(in)
f(application)g(mode\))g(and)g(translates)h(it)f(along)g(with)g(an)o(y)
g(shared)h(library)e(functions)-91 2301 y(in)n(v)o(oked)f(\(1\))h(into)
g(VLIW)h(code)g(and)f(\(2\))g(into)g Fo(P)l(owerPC)j
Fn(simulation)d(code)g(for)g(that)g(VLIW)h(code.)k(Comparison)11
b(of)-91 2367 y(input)h(and)g(output)g(do)g(not)g(lend)g(themselv)o(es)
i(to)e(easy)h(identi\002cation)e(of)h(b)o(ugs.)-41 2433
y(The)i(most)g(useful)g(deb)o(ugging)f(strate)o(gy)h(uses)h(a)f(binary)
g(search)g(approach.)20 b(On)14 b(e)o(v)o(ery)g(crosspage)g(and)g
(indirect)-91 2499 y(branch,)i Fp(D)n(AISY)g Fn(can)g(optionally)f
(stop)h(e)o(x)o(ecution)g(and)g(\(1\))f(continue)g Fp(D)n(AISY)p
Fn(-style)h(e)o(x)o(ecution,)h(\(2\))e(report)f(the)-91
2566 y(address)c(of)f(the)g(ne)o(xt)h Fo(P)l(owerPC)h
Fn(instruction)d(which)i(would)e(ha)o(v)o(e)i(been)g(e)o(x)o(ecuted,)h
(or)e(\(3\))f(e)o(x)o(ecute)i(nati)o(v)o(e)g Fo(P)l(owerPC)-91
2632 y Fn(code)i(directly)g(without)g(being)g(translated)g(into)g
Fp(D)n(AISY)h Fn(VLIW)f(code.)915 2787 y(35)p eop
%%Page: 36 36
36 35 bop -41 50 a Fn(Binary)14 b(search)h(can)h(be)f(used)g(to)g
(isolate)g(which)g(crosspage)g(or)g(indirect)f(branch)g(results)h(in)g
(the)g(manifestation)-91 116 y(of)h(a)g(b)o(ug.)28 b(F)o(or)16
b(e)o(xample,)i(suppose)f Fk(/bin/ls)e Fn(does)i(not)f(translate)g
(correctly)m(,)h(as)g(may)f(be)h(e)o(videnced)f(by)g(\002les)-91
182 y(not)c(being)h(displayed)g(in)g(the)g(same)g(way)f(the)o(y)h(are)g
(if)g Fk(/bin/ls)f Fn(is)h(in)n(v)o(oked)f(directly)m(.)k(Then)e
Fp(D)n(AISY)f Fn(can)g(be)g(run)-91 248 y(with)e(a)h(speci\002cation)f
(to)g(shift)g(from)g(e)o(x)o(ecution)h(of)f(the)g(translated)g(VLIW)h
(v)o(ersion)f(to)h(the)f Fo(P)l(owerPC)j Fn(v)o(ersion)d(after)-91
315 y Fp(N)k Fn(crosspage)g(or)g(indirect)f(branches.)23
b(W)n(ith)15 b Fk(/bin/ls)p Fn(,)g(an)g(initial)g(v)o(alue)f(of)h
Fp(N)j Fb(=)h(1000)e Fn(might)d(be)h(reasonable.)-91
381 y(If)h(a)h(correct)f(listing)g(of)g(\002les)h(results,)h(then)f
(the)f(b)o(ug)h(must)f(not)h(occur)f(in)h(the)f(\002rst)g(1000)h
(crosspage)g(or)f(indirect)-91 447 y(branches.)25 b(Hence)16
b Fp(N)g Fn(must)f(be)h(increased,)h(to)e(say)i(2000.)25
b(If)15 b(the)g(output)g(is)h(no)o(w)f(incorrect,)h(then)g(the)f(b)o
(ug)g(must)-91 513 y(be)h(between)f(crosspage)h(or)g(indirect)f(branch)
g(1000)g(and)h(2000.)25 b(F)o(ollo)o(wing)15 b(the)h(binary)f(search)h
(technique,)g Fp(N)g Fn(is)-91 579 y(no)o(w)11 b(set)g(to)g(1500.)k
(This)d(process)g(continues)f(until)f(the)i(precise)f(crosspage)g(or)g
(indirect)g(branch)f(leading)h(to)g(an)h(error)-91 646
y(is)i(found.)21 b(At)14 b(this)g(point)g(the)g(translated)g(code)g
(for)g(the)g(problem)f(page)h(can)h(be)f(e)o(xamined)g(in)g(greater)g
(detail)g(with)-91 712 y(kno)o(wledge)f(that)h(the)g(b)o(ug)f(must)h
(lie)g(here.)20 b(Note)14 b(that)g(this)g(is)g(true)f(e)o(v)o(en)h(if)g
(there)f(are)h(multiple)f(b)o(ugs.)21 b(The)14 b(binary)-91
778 y(search)h(technique)f(catches)h(them)f(in)h(sequence,)h(i.e.)23
b(the)14 b(\002rst)g(page)h(with)f(a)h(b)o(ug)f(is)h(found)f(\(and)g
(\002x)o(ed\),)h(then)f(the)-91 844 y(second,)f(etc.)-41
911 y(From)g(a)h(user)g(perspecti)o(v)o(e,)h(binary)e(search)h(is)h
(controlled)e(by)h(the)g Fk(-L)f Fn(and)h Fk(-M)g Fn(\003ags)h(to)e
Fk(daisy)p Fn(.)21 b(The)14 b(number)-91 977 y(speci\002ed)h
(immediately)g(after)f Fk(-L)h Fn(\(e.g.)25 b Fk(-L1500)p
Fn(\))14 b(speci\002es)i(the)f(number)f(of)h(crosspage)h(or)f(indirect)
f(branches)-91 1043 y(before)f(e)o(x)o(ecution)h(switches)g(to)f(nati)o
(v)o(e)h Fo(P)l(owerPC)h Fn(code.)20 b(The)14 b(number)f(after)f(the)i
Fk(-M)f Fn(\003ag)h(speci\002es)g(what)g(action)-91 1109
y(to)d(take)g(after)g Fk(-L)h Fn(crosspage)g(or)f(indirect)g(branches)h
(ha)o(v)o(e)g(been)f(seen.)16 b Fk(-M2)c Fn(indicates)g(that)f(control)
g(should)g(switch)-91 1175 y(to)16 b(nati)o(v)o(e)g Fo(P)l(owerPC)i
Fn(code)f(as)g(described,)g(while)f Fk(-M1)h Fn(indicates)f(that)g
Fp(D)n(AISY)h Fn(should)f(stop)h(and)f(print)f(out)h(the)-91
1242 y Fo(P)l(owerPC)d Fn(tar)o(get)e(address)h(of)f(the)g(current)g
(crosspage)h(or)f(indirect)g(branch.)k Fk(-M1)c Fn(is)h(normally)e
(used)i(after)f Fk(-M2)g Fn(has)-91 1308 y(isolated)h(the)h(of)o
(fending)d(page)j(to)f(\002nd)g(its)h Fo(P)l(owerPC)h
Fn(address.)-41 1374 y(The)g Fk(-L)g Fn(and)h Fk(-M)f
Fn(\003ags)g(set)h(the)f(v)o(ariables)g Fk(max)p 824
1374 15 2 v 17 w(dyn)p 931 1374 V 18 w(page)p 1069 1374
V 17 w(cnt)g Fn(and)g Fk(max)p 1366 1374 V 18 w(dyn)p
1474 1374 V 18 w(pages)p 1642 1374 V 17 w(action)g Fn(which)-91
1440 y(are)e(referenced)g(in)h Fp(xlate)p 363 1440 V
17 w(offpage)p 539 1440 V 16 w(indir\(\))e Fn(in)i Fk(simul.c)p
Fn(,)f(which)h(essentially)g(checks)g(if)f(e)o(x)o(ecution)h(should)f
(stop)-91 1506 y(or)g(if)g Fo(P)l(owerPC)i Fn(code)e(should)h(be)f(e)o
(x)o(ecuted)h(directly)f(from)f(this)h(point)g(forward.)-41
1573 y(As)i(an)g(aside,)h(properly)e(switching)g(from)g(e)o(x)o
(ecution)h(of)g(translated)f(VLIW)h(code)g(to)g(nati)o(v)o(e)f
Fo(P)l(owerPC)j Fn(code)e(is)-91 1639 y(a)g(bit)g(trick)o(y)m(,)g
(because)h Fo(P)l(owerPC)h Fn(re)o(gisters)e(must)g(be)g(set)h(in)e(a)i
(speci\002c)f(order)m(.)20 b(The)15 b(most)f(dif)o(\002cult)f(is)h
Fk(LinkReg)-91 1705 y Fn(since)e Fk(LinkReg)g Fn(is)g(used)g(to)g
(branch)g(to)f(the)h(nati)o(v)o(e)g Fo(P)l(owerPC)i Fn(code.)i(If)11
b Fk(LinkReg)g Fn(is)i(li)o(v)o(e)e(at)h(this)g(point,)g(there)g(is)-91
1771 y(a)g(problem.)j(A)e(trick)e(to)i(o)o(v)o(ercome)f(this)g(problem)
g(can)h(be)f(found)g(in)g(the)g(\002le)g Fk(to)p 1344
1771 V 18 w(native.c)p Fn(.)-41 1837 y(As)j(another)f(aside,)i(the)f
(problem)f(page)g(normally)g(lies)h(in)g(the)f(\002rst)h(million)e
(crosspage)j(or)e(indirect)g(branches.)-91 1904 y(The)h(worst)f(case)h
(thus)f(far)g(encountered)g(in)n(v)o(olv)o(ed)g(a)h(b)o(ug)f
(translating)g Fk(gcc)g Fn(in)g(which)h(the)f(b)o(ug)g(did)h(not)f
(manifest)-91 1970 y(itself)c(until)g(more)f(than)i(26)f(million)f
(crosspage)i(or)f(indirect)g(branches,)h(with)f(e)o(x)o(ecution)g(of)g
(these)h(26)f(million)g(taking)-91 2036 y(almost)i(an)h(hour)e(each.)
-41 2102 y(Alas)k(e)o(v)o(en)g(when)h(the)f(problem)f(page)h(is)h
(identi\002ed,)f(there)g(are)g(still)g(dif)o(\002culties.)23
b(The)16 b(b)o(ug)f(may)g(lie)g(either)g(in)-91 2169
y(the)e(translation)g(from)f Fo(P)l(owerPC)j Fn(to)e(VLIW)h(code)f(or)g
(in)g(the)g(translation)g(from)f(VLIW)i(code)f(to)g(simulation)g(code.)
-91 2235 y(Bugs)j(in)g(the)g Fo(P)l(owerPC)i Fn(to)e(VLIW)h(code)f
(mapping)f(are)h(generally)g(easier)g(to)g(\002nd.)27
b(In)16 b(addition)f(the)h(amount)g(of)-91 2301 y(VLIW)c(code)g(for)f
(the)h(problem)f(page)h(may)g(be)g(lar)o(ge)f(due)h(to)g(code)g(e)o
(xplosion,)g(making)g(it)f(dif)o(\002cult)g(to)h(spot)g(the)g(b)o(ug)
-91 2367 y(by)g(inspection.)-41 2433 y(One)18 b(approach)g(in)g(this)g
(case)h(is)f(to)g(run)g(a)g(nati)o(v)o(e)g(v)o(ersion)h(of)e(the)i
(problem)e(program)g(under)h(a)g(deb)o(ugger)g(in)-91
2500 y(one)e(windo)o(w)m(,)i(and)e(the)h Fp(D)n(AISY)g
Fn(v)o(ersion)g(in)f(another)g(windo)o(w)m(.)28 b(Since)16
b Fp(D)n(AISY)h Fn(does)g(not)g(reorder)e(conditional)-91
2566 y(branches,)j(a)e(correspondence)g(between)g(the)g(nati)o(v)o(e)g
(v)o(ersion)g(and)h Fp(D)n(AISY)f Fn(v)o(ersion)g(may)g(be)h(kept.)26
b(Often)16 b(after)-91 2632 y(a)f(fe)o(w)g(branches,)h(the)f
Fp(D)n(AISY)g Fn(v)o(ersion)h(will)e(branch)h(one)g(way)g(and)g(the)g
(nati)o(v)o(e)g(v)o(ersion)g(the)g(other)n(,)h(thus)f(further)915
2787 y(36)p eop
%%Page: 37 37
37 36 bop -91 50 a Fn(isolating)12 b(the)g(b)o(ug.)-41
116 y(Ev)o(en)h(without)e(comparing)h(branch)g(by)g(branch,)g(the)g
(nati)o(v)o(e)h(v)o(ersion)f(can)g(be)h(useful)f(in)g(isolating)g
(which)g(VLIW)-91 182 y(instructions)g(to)h(e)o(xamine)g(for)f(the)h(b)
o(ug.)k(Often)c(the)g(amount)f(of)h(time)f(the)h(nati)o(v)o(e)g(v)o
(ersion)g(spends)h(on)e(the)h(problem)-91 248 y(page)i(\(at)f(the)h
(problem)f(point\))g(is)h(short.)23 b(In)15 b(such)g(cases,)i(a)e
(trace)g(of)f(the)h(nati)o(v)o(e)g(e)o(x)o(ecution)g(can)g(be)g
(created.)23 b(F)o(or)-91 315 y(e)o(xample,)12 b(under)g
Fk(dbx)p Fn(,)g(the)g Fk(tracei)f Fn(command)h(can)g(be)g(used)h(to)e
(do)h(this.)k(This)d(trace)e(can)i(then)e(be)i(matched)e(to)h(a)-91
381 y Fk(daisy.vliw)g Fn(\002le)h(\(as)g(described)g(in)g(Section)g
(8\))f(to)h(identify)g(which)f(VLIW)i(instructions)e(should)h(e)o(x)o
(ecute.)19 b(By)-91 447 y(identifying)11 b(a)h(small)g(subset)g(of)g
(VLIW)g(instructions)g(to)g(e)o(xamine,)g(this)g(technique)g(further)f
(facilitates)g(\002nding)g(the)-91 513 y(b)o(ug)h(by)g(inspection.)-41
579 y(Sometimes)h(the)h(translated)g(code)g(crashes)h(with)f(an)g(ille)
o(gal)f(instruction)h(or)f(similar)h(problem.)20 b(In)13
b(these)i(cases,)-91 646 y(the)c(VLIW)g(simulation)f(code)i(near)e(the)
h(crash)h(site)f(can)g(be)g(e)o(xamined)g(under)g(a)g(deb)o(ugger)n(,)g
(since)h(crashes)f(normally)-91 712 y(report)17 b(the)h(state)h(of)f
(the)g(re)o(gisters)h(including)e(the)i Fk(IAR)p Fn(.)f(The)h(problem)e
(is)i(often)f(to)g(\002nd)g(what)g(portion)g(of)f(the)-91
778 y(original)9 b Fo(P)l(owerPC)j Fn(program)e(was)g(running)g(at)g
(the)g(time)g(of)g(the)h(crash,)g(and)g(also)f(to)h(\002nd)e(which)i
(VLIW)f(instruction)-91 844 y(was)i(e)o(x)o(ecuting)h(\(as)f(opposed)h
(to)f(the)g(simulation)g(code)h(address)g(reported)e(by)h(the)h(deb)o
(ugger\).)-41 911 y(The)d(tip)f(e)o(x)o(ecution)h(counts)f(discussed)i
(in)e(Section)g(8)h(can)g(be)f(useful)h(in)f(this)h(re)o(gard.)k(As)c
(noted)f(in)g(Section)g(9)h(these)-91 977 y(counts)k(are)g(b)o(umped)g
(at)g(each)g(e)o(xit)g(of)g(a)g(VLIW)g(instruction.)20
b(These)c(b)o(umps)e(occur)f(e)o(xplicitly)h(in)g(the)g(simulation)-91
1043 y(code)c(including)f(the)g(reading)g(the)h(old)f(v)o(alue)h(from)f
(the)g(proper)g(count)g(of)o(fset.)15 b(These)10 b(of)o(fsets)g(can)g
(be)f(matched)h(to)f(the)-91 1109 y(count)k(of)o(fsets)g(reported)f(in)
h(the)g Fk(daisy.vliw)f Fn(\002le)h(\(see)h(Figure)e(9)i(on)f(page)g
(30\))g(to)g(\002nd)g(the)g(VLIW)g(instruction)-91 1175
y(that)19 b(was)h(e)o(x)o(ecuting)g(when)f(the)h(program)e(crashed.)38
b(Once)20 b(the)f(VLIW)h(instruction)f(is)h(found,)h(the)f
Fo(P)l(owerPC)-91 1242 y Fn(address)14 b(of)g(the)g(original)g(code)g
(can)g(be)h(found)e(by)h(looking)g(at)g(other)g(annotations)g(in)g(the)
g Fk(daisy.vliw)f Fn(\002le,)i(as)-91 1308 y(discussed)e(in)f(Section)g
(8,)h(and)f(as)h(can)g(be)f(seen)h(in)g(Figure)e(9.)-41
1374 y(Another)g(useful)g(trick)g(in)h(deb)o(ugging)f(is)h(to)g(look)f
(at)h(the)g(contents)f(of)h(the)f Fo(P)l(owerPC)j Fn(link)d(re)o
(gister)m(.)16 b(As)c(was)g(seen)-91 1440 y(in)g(Section)g(9,)g(the)g
(simulation)g(code)h(for)e Fp(D)n(AISY)h Fn(does)h(man)o(y)f(of)g(its)h
(branches)f(indirectly)f(through)g(the)i Fo(P)l(owerPC)-91
1506 y Fk(LinkReg)j Fn(in)i(order)e(to)h(be)h(able)f(to)h(branch)f(to)g
(random)f(32-bit)h(addresses.)32 b(These)18 b(branches)f(to)h(link)f
(re)o(gister)-91 1573 y(are)d(normally)g Fk(blrl)p Fn(,)h(i.e.)23
b(the)o(y)14 b(branch)h(to)f Fk(LinkReg)g Fn(and)g(then)h(set)g
Fk(LinkReg)f Fn(to)g(the)h(subsequent)g Fo(P)l(owerPC)-91
1639 y Fn(operation.)g(When)c(the)h(translated)g(code)g(crashes)g(at)g
(some)g(bad)g(address)g(like)f(0,)i(the)f(contents)f(of)h
Fk(LinkReg)f Fn(often)-91 1705 y(indicate)h(ho)o(w)g(the)g(simulated)g
(code)h(got)f(to)g(the)h(bad)f(address.)-41 1771 y(An)g(additional)h
(ca)o(v)o(eat)g(about)g(deb)o(ugging:)j(Do)c(not)h(set)g(a)h
(breakpoint)e(for)g(the)g(translated)h(code)g(until)g(that)f(code)-91
1837 y(has)k(actually)g(been)g(generated.)26 b(At)15
b(least)h(under)g Fk(dbx)f Fn(this)h(results)g(in)g(ille)o(gal)f
(instruction)g(errors.)26 b(This)16 b(restric-)-91 1904
y(tion)f(means)g(that)h(a)f(breakpoint)g(must)g(generally)g(be)g(set)h
(in)f(the)g Fp(D)n(AISY)h Fn(translator)f(itself,)h(with)f(the)g
(breakpoint)-91 1970 y(triggering)c(after)g(the)i(problem)e(code)i(is)f
(generated,)h(b)o(ut)f(before)g(it)g(is)h(e)o(x)o(ecuted.)-41
2036 y(Another)i(point)h(of)g(interest)g(about)g(deb)o(ugging)f
Fp(D)n(AISY)i Fn(in)n(v)o(olv)o(es)f(se)o(gmentation)g(violations.)27
b(Se)o(gmentation)-91 2102 y(violations)17 b(can)h(correctly)f(occur)h
(in)f(translated)h(code)g(because)g Fp(D)n(AISY)g Fn(schedules)h(loads)
f(speculati)o(v)o(ely)m(.)32 b(Not)-91 2169 y(all)18
b(speculati)o(v)o(e)h(loads)g(will)f(actually)g(turn)g(out)g(to)g(be)h
(needed,)i(and)d(those)h(that)f(do)g(not)h(may)f(access)i(arbitrary)-91
2235 y(addresses,)g(and)e(consequently)f(cause)i(se)o(gmentation)e
(violations.)32 b(T)l(o)18 b(o)o(v)o(ercome)g(this)f(dif)o(\002culty)m
(,)h Fp(D)n(AISY)g Fn(has)-91 2301 y(its)13 b(o)o(wn)g(se)o(gmentation)
g(violation)f(handler)h(\(in)f Fk(shm.c)p Fn(\).)17 b(This)d(handler)f
(ignores)g(se)o(gmentation)g(violations)f(from)-91 2367
y(loads,)h(b)o(ut)f(terminates)f(the)i(program)e(on)h(violations)f
(from)h(stores.)k(This)c(approach)g(occasionally)g(masks)h(problem)-91
2433 y(se)o(gmentation)d(violations)h(in)f(the)g(translated)h(code)f
(or)h(in)f Fp(D)n(AISY)h Fn(itself.)k(Note)10 b(that)h(when)f(deb)o
(ugging)g(under)g Fk(dbx)p Fn(,)-91 2500 y(the)k Fk(ignore)29
b(segv)13 b Fn(command)h(must)f(be)h(used)h(so)f(that)f
Fk(dbx)h Fn(does)g(not)g(catch)g(and)g(complain)f(of)g(se)o(gmentation)
-91 2566 y(violations)d(that)h(are)g(actually)f(of)h(the)f(acceptable)i
(type)e(described)h(abo)o(v)o(e.)16 b(\(The)11 b(use)g(of)g
Fk(ignore)29 b(segv)10 b Fn(is)i(seems)-91 2632 y(to)g(cause)h(some)g
(problems)f(under)f Fp(AIX)i(4.1.5)p Fn(,)h(b)o(ut)e(seems)h(\002ne)f
(under)g Fp(AIX)h(4.3.2)p Fn(.\))915 2787 y(37)p eop
%%Page: 38 38
38 37 bop -91 50 a Fl(11)59 b(P)o(ost-Pr)o(ocessing)13
b(of)i(D)n(AISY)g(Output)-41 174 y Fn(As)g(described)f(in)g(Section)g
(2.1,)i Fp(D)n(AISY)f Fn(produces)g(a)f(v)o(ariety)g(of)g(output)g
(\002les.)22 b(Man)o(y)15 b(of)g(these)g(are)f(produced)-91
240 y(by)e(the)g Fk(dvstats)g Fn(utility)m(,)g(which)g(takes)g(as)h
(input)f(three)g(binary)g(\002les)g(produced)g(by)g Fk(daisy)p
Fn(:)-2 348 y Fk(ls.vliw_perf_ins_cnts)-2 414 y(ls.vliw_perf_ins_info)
-2 480 y(ls.vliw_spec_ins_info)-91 588 y Fn(if)g(the)h(input)f(to)g
Fk(daisy)g Fn(was)h Fk(/bin/ls)p Fn(.)j(As)d(with)f Fk(daisy)p
Fn(,)h(a)g(usage)g(summary)f(for)g Fk(dvstats)f Fn(is)i(produced)f(by)
-91 654 y(in)n(v)o(oking)f(it)i(with)f(no)g(ar)o(guments.)j(An)e
(abridged)e(form)h(of)g(this)g(usage)h(summary)f(is)h(reproduced)e(in)h
(Figure)g(11.)-41 721 y(Figure)k(12)g(sho)o(ws)i(the)e(\002rst)h(part)f
(of)h(the)g Fk(ls.histo)f Fn(\002le)g(produced)h(by)f
Fk(dvstats)p Fn(.)29 b(As)17 b(reported)f(in)h(Sec-)-91
787 y(tion)11 b(2.1,)h(the)g Fk(ls.histo)f Fn(\002le)g(reports)g(the)g
(in\002nite)g(cache)h(ILP)f(attained,)h(along)f(with)h(histograms)f(on)
g(ho)o(w)g(man)o(y)-91 853 y(operations)g(were)g(packed)h(into)f(each)h
(VLIW)f(instruction.)k(The)d(ILP)f(information)f(is)i(reported)f(for)f
(the)i(application)-91 919 y(as)h(a)f(whole,)h(and)f(for)g(that)g(part)
g(in)g(the)g(original,)g(non-shared)g(library)f(portion)h(of)g(the)g
(application.)-41 985 y(As)g(also)h(described)f(in)h(Section)f(2.1,)h
Fk(daisy)f Fn(appends)g(additional)g(statistics)h(to)f(a)h(\002le)f
Fk(daisy.stats)f Fn(in)h(the)-91 1052 y(current)d(directory)m(.)k(A)d
(sample)g(of)f(this)h(information)e(is)i(sho)o(wn)f(in)h(Figure)f(13.)
15 b(A)9 b(note)h(of)f(caution:)14 b(programs)9 b(which)-91
1118 y(in)n(v)o(oke)j(the)h Fk(fork\(\))g Fn(library)e(can)j(be)f
(translated)g(by)g Fp(D)n(AISY)p Fn(,)h(b)o(ut)e(the)h(statistics)h
(produced)f(in)g Fk(daisy.stats)-91 1184 y Fn(and)i(the)h(\002les)f
(produced)g(by)g Fp(dvstats)g Fn(are)g(not)g(accurate)h(\226)f(only)g
(one)h(branch)f(of)g(the)g(fork)f(is)i(seen.)25 b(Luckily)16
b(fe)o(w)-91 1250 y(benchmark)c(and)g(standard)g(utility)g(programs)f
(that)h(we)h(ha)o(v)o(e)g(run)f(in)n(v)o(oke)f Fk(fork\(\))p
Fn(.)-91 1391 y Fl(12)59 b(Ca)o(v)o(eats)-19 1515 y Fm(\017)25
b Fp(D)n(AISY)12 b Fn(\(e)o(x)o(ecutable)h Fk(daisy)p
Fn(\))e(has)i(been)f(de)o(v)o(eloped)g(on)h(a)f(604E)h(machine.)i(The)e
(simulation)f(code)g(gener)o(-)31 1581 y(ated)g(may)g(cause)h(problems)
f(on)h(some)f(other)g(v)o(ariants)g(of)g(the)g Fo(P)l(owerPC)p
Fn(.)-19 1689 y Fm(\017)25 b Fn(As)15 b(noted)g(in)g(Section)f(8,)j
(for)d(lar)o(ge)h(programs)f(like)g Fk(gcc)p Fn(,)i(the)f(counts)g
(area)g(may)g(not)g(be)g(lar)o(ge)g(enough)g(to)31 1755
y(hold)d(a)h(count)f(v)o(alue)h(for)e(all)i(tips.)k(In)12
b(such)h(cases)h(the)e Fk(-I)h Fn(\003ag)f(can)h(be)g(speci\002ed)g
(with)f Fk(daisy)g Fn(to)h(suppress)31 1821 y(generation)g(of)g(such)i
(counts.)20 b(\(This)15 b(also)f(speeds)h(simulation)e(at)h(the)g(e)o
(xpense)h(of)e(not)h(collecting)f(as)i(much)31 1888 y(man)o(y)d
(statistics)h(on)f(the)h(translation.\))-19 1995 y Fm(\017)25
b Fn(Whene)o(v)o(er)9 b Fp(D)n(AISY)h Fn(generates)f(code,)i(as)f(with)
f(the)g Fp(dump\(\))f Fn(function)h(in)g Fk(xlate)p 1483
1995 15 2 v 17 w(mem.c)p Fn(,)h(the)g Fp(\003ush)p 1846
1995 V 17 w(cache\(\))31 2061 y Fn(function)i(in)h Fk(cache.c)g
Fn(should)g(be)g(called)h(to)f(make)g(sure)g(the)g(generated)g(code)h
(is)f(\003ushed)h(from)e(the)h Fo(P)l(ow-)31 2128 y(erPC)g
Fn(data)g(cache)g(to)f(the)g Fo(P)l(owerPC)i Fn(instruction)e(cache.)
-19 2235 y Fm(\017)25 b Fn(In)12 b(order)f(to)i(use)f
Fk(daisy)p Fn(,)h(the)f Fk(datasize)g Fn(limit)f(must)i(be)f(at)h
(least)g(256)f(Mbytes.)k(Under)c Fo(csh)h Fn(or)f Fo(tcsh)p
Fn(,)h(this)31 2302 y(can)f(be)h(accomplished)f(via)g(the)h(command)f
Fk(limit)29 b(datasize)g(512000)g(kbytes)12 b Fn(\(which)g(actually)31
2368 y(sets)h(it)f(to)g(512)g(Mbytes\).)-19 2476 y Fm(\017)25
b Fn(In)10 b(order)g(to)g(use)h Fk(daisy)p Fn(,)g(it)f(is)h(important)e
(to)h(ha)o(v)o(e)h(a)g(lar)o(ge)f(amount)g(of)g(paging)h(space:)k(at)10
b(least)h(256)f(Mbytes,)31 2542 y(and)k(preferably)e(400)i(Mbytes.)20
b(The)15 b(amount)e(you)g(currently)g(ha)o(v)o(e)h(may)g(be)g
(determined)f(by)h(typing)f Fk(lsps)31 2608 y(-a)p Fn(.)i(Contact)e
(your)f(system)g(administrator)g(if)f(you)i(need)f(to)g(increase)h
(your)f(amount.)915 2787 y(38)p eop
%%Page: 39 39
39 38 bop 219 2416 a @beginspecial 49 @llx 149 @lly 423
@urx 751 @ury 5616 @rhi @setspecial
%%BeginDocument: texfig/dvstats.eps
%DVIPSCommandLine: /vol/tex/texmf/bin/@sys/dvips558 -E -o dvstats.eps
%+ dvstats
%DVIPSParameters: dpi=300, comments removed
%DVIPSSource:  TeX output 2000.05.18:1858
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
 .1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
TeXDict begin 40258437 52099154 1000 300 300
(/.../watson.ibm.com/fs/users/E/erik/opensrc/doc/texfig/dvstats.dvi)
@start /Fa 53 122 df<6030F078F078F078F078F078F078F078F078E038E038E0380D
0C7C9916>34 D<038700038700038700038700038700038700FFFFE0FFFFE0FFFFE0070E
00070E00070E000F1E000E1C000E1C000E1C00FFFFE0FFFFE0FFFFE01C38001C38001C38
001C38001C38001C380013197F9816>I<00E001E007C007000F001E003C003800780070
0070007000F000E000E000E000E000E000E000E000F000700070007000780038003C001E
000F00070007C001E000E00B217A9C16>40 D<E000F0007C001C001E000F000780038003
C001C001C001C001E000E000E000E000E000E000E000E001E001C001C001C003C0038007
800F001E001C007C00F000E0000B217C9C16>I<387C7E7E3E0E1E3C7CF860070B798416>
44 D<FFFF80FFFF80FFFF8011037E8D16>I<70F8F8F8700505788416>I<030007000F00
0F001F00FF00FF00F7000700070007000700070007000700070007000700070007000700
0700FFF8FFF8FFF80D197B9816>49 D<00F80003FE000FFF001F0F003E0F003C0F007806
00700000F00000E7F800FFFE00FFFE00F80F00F00780F00780E00380F00380F003807003
80780780780F003C1F001FFE000FF80003E00011197E9816>54 D<70F8F8F87000000000
0000000070F8F8F8700512789116>58 D<000380000780001F80003E0000FC0003F00007
E0001F80003E0000FC0000F00000FC00003E00001F800007E00003F00000FC00003E0000
1F8000078000038011157E9616>60 D<E00000F00000FC00003E00001F800007E00003F0
0000FC00003E00001F80000780001F80003E0000FC0003F00007E0001F80003E0000FC00
00F00000E0000011157E9616>62 D<00E00001F00001F00001B00001B00003B80003B800
03B800031800071C00071C00071C00071C00071C000E0E000E0E000FFE000FFE001FFF00
1C07001C07001C07007E0FC0FF1FE07E0FC013197F9816>65 D<7FF800FFFE007FFF001C
07001C07801C03801C03801C03801C03801C07001FFF001FFE001FFE001C1F001C03801C
03C01C01C01C01C01C01C01C01C01C03C01C07807FFF80FFFF007FFC0012197F9816>I<
01F18007FF800FFF801F0F803C0780780780780380700380F00000E00000E00000E00000
E00000E00000E00000E00000F000007003807803807803803C07801F0F000FFE0007FC00
01F00011197E9816>I<7FF800FFFE007FFF001C0F001C07801C03C01C01C01C01C01C01
E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C01C01C01C01C03C01C07
801C0F807FFF00FFFE007FF8001319809816>I<7FFFC0FFFFC07FFFC01C01C01C01C01C
01C01C01C01C00001C00001C1C001C1C001FFC001FFC001FFC001C1C001C1C001C00001C
00E01C00E01C00E01C00E01C00E07FFFE0FFFFE07FFFE013197F9816>I<7F07F0FF8FF8
7F07F01C01C01C01C01C01C01C01C01C01C01C01C01C01C01FFFC01FFFC01FFFC01C01C0
1C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C07F07F0FF8FF87F07F0151980
9816>72 D<7FFCFFFE7FFC03800380038003800380038003800380038003800380038003
800380038003800380038003807FFCFFFE7FFC0F197D9816>I<FF8000FFC000FF80001C
00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C
00001C00001C00401C00E01C00E01C00E01C00E0FFFFE0FFFFE0FFFFE013197F9816>76
D<7FF800FFFE007FFF001C0F801C03801C03C01C01C01C01C01C01C01C03C01C03801C0F
801FFF001FFE001FF8001C00001C00001C00001C00001C00001C00001C00007F0000FF80
007F000012197F9816>80 D<07E3001FFF007FFF00781F00F00F00E00700E00700E00000
F000007800007F80001FF00007FC0000FE00000F00000780000380000380E00380E00380
F00780F80F00FFFE00FFFC00C7F00011197E9816>83 D<7FFFE0FFFFE0FFFFE0E0E0E0E0
E0E0E0E0E0E0E0E000E00000E00000E00000E00000E00000E00000E00000E00000E00000
E00000E00000E00000E00000E00000E00007FC000FFE0007FC0013197F9816>I<7F07F0
FF8FF87F07F01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C01C0
1C01C01C01C01C01C01C01C01C01C01C01C01E03C00E03800F8F8007FF0003FE0000F800
1519809816>I<FE0FE0FE0FE0FE0FE03803803C07801C07001C07001C07001E0F000E0E
000E0E000E0E000E0E00071C00071C00071C00071C0003180003B80003B80003B80001B0
0001F00001F00000E00013197F9816>I<7E03F0FF07F87E03F03800E03800E03800E038
00E01C01C01C01C01C01C01C71C01CF9C01CF9C01CD9C01CD9C00CD9800CD9800CD9800D
DD800D8D800D8D800D8D80078F00078F000707001519809816>I<FFF0FFF0FFF0E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000FFF0FFF0FFF00C20789C16>91 D<FFF0FFF0FFF0007000
700070007000700070007000700070007000700070007000700070007000700070007000
70007000700070007000700070FFF0FFF0FFF00C207F9C16>93 D<FFFF80FFFF80FFFF80
11037E7E16>95 D<1FE0007FF8007FFC00783E00301E00000E00003E0007FE003FFE007F
CE00F80E00E00E00E00E00F01E00F83E007FFFE03FF7E00FC3E013127E9116>97
D<FC0000FC0000FC00001C00001C00001C00001C00001C7C001DFF001FFF801F07C01E03
C01E01E01C01E01C00E01C00E01C00E01C00E01E01E01E01C01F03C01F07801FFF801DFE
000CF80013197F9816>I<03F80FFE1FFE3C1E780C7000F000E000E000E000E000F00070
0778073E0F1FFE0FFC03F010127D9116>I<003F00003F00003F00000700000700000700
00070003E7000FFF003FFF003C1F00780F00700F00F00700E00700E00700E00700E00700
F00F00F00F00781F007C3F003FFFE01FF7E007C7E013197F9816>I<03F0000FFC001FFE
003E1F00780700700780F00380FFFF80FFFF80FFFF80E00000F000007003807803803E0F
801FFF000FFE0003F80011127E9116>I<001F0000FF8001FF8003C78003830003800003
80007FFF00FFFF00FFFF0003800003800003800003800003800003800003800003800003
80000380000380000380007FFC00FFFE007FFC0011197F9816>I<03E3C00FFFE01FFFE0
1E3CC03C1E00380E00380E00380E003C1E001E3C001FFC003FF8003BE0003800003C0000
3FFC003FFF007FFFC07803C0F001E0E000E0E000E0E000E0F001E07C07C03FFF800FFE00
03F800131C7F9116>I<FC0000FC0000FC00001C00001C00001C00001C00001CF8001FFE
001FFF001F0F001E07001E07001C07001C07001C07001C07001C07001C07001C07001C07
001C0700FF8FE0FF9FE0FF8FE013197F9816>I<03000780078003000000000000000000
FF80FF80FF80038003800380038003800380038003800380038003800380FFFCFFFEFFFC
0F1A7C9916>I<7E0000FE00007E00000E00000E00000E00000E00000E7FE00E7FE00E7F
E00E0F000E1E000E3C000E78000EF0000FF8000FF8000FBC000F1E000E0E000E0F000E07
807F87F0FFCFF07F87F01419809816>107 D<7FC000FFC0007FC00001C00001C00001C0
0001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C0
0001C00001C00001C00001C0007FFF00FFFF807FFF0011197E9816>I<FBC780FFEFC0FF
FFE03E7CE03C78E03870E03870E03870E03870E03870E03870E03870E03870E03870E038
70E0FE7CF8FE7CF8FE7CF81512809116>I<FCF800FFFE00FFFF001F0F001E07001E0700
1C07001C07001C07001C07001C07001C07001C07001C07001C0700FF8FE0FF9FE0FF8FE0
13127F9116>I<03E0000FF8001FFC003C1E00780F00700700E00380E00380E00380E003
80E00380F00780700700780F003C1E001FFC000FF80003E00011127E9116>I<FC7C00FD
FF00FFFF801F07C01E03C01E01E01C01E01C00E01C00E01C00E01C00E01E01E01E01C01F
03C01F07801FFF801DFE001CF8001C00001C00001C00001C00001C00001C0000FF8000FF
8000FF8000131B7F9116>I<03E3800FFB801FFF803E1F80780F80700780F00780E00380
E00380E00380E00380F00780700780780F803C1F803FFF800FFB8003E380000380000380
000380000380000380000380001FF0003FF8001FF0151B7F9116>I<7F0F80FF3FE07FFF
E007F1E007E0C007C0000780000780000700000700000700000700000700000700000700
007FFC00FFFC007FFC0013127F9116>I<0FEC3FFC7FFCF03CE01CE01CF0007F801FF007
FC003EE00EE00EF00EF81EFFFCFFF8C7E00F127D9116>I<030000070000070000070000
0700007FFF00FFFF00FFFF00070000070000070000070000070000070000070000070100
07038007038007078007878003FF0003FE0000F80011177F9616>I<FC3F00FC3F00FC3F
001C07001C07001C07001C07001C07001C07001C07001C07001C07001C07001C0F001E1F
001FFFE00FFFE007E7E013127F9116>I<7F1FC0FF9FE07F1FC01C07001C07000E0E000E
0E000E0E00071C00071C00071C00071C0003B80003B80003B80001F00001F00000E00013
127F9116>I<FF1FE0FF1FE0FF1FE038038038038038038038038039F38039F38019F300
19B30019B30019B3001DB7001D17001F1F000F1E000E0E0013127F9116>I<7F1FC07F3F
C07F1FC00F1E00073C0003B80003F00001F00000E00001E00001F00003B800073C00071C
000E0E007F1FC0FF3FE07F1FC013127F9116>I<7F1FC0FF9FE07F1FC01C07000E07000E
0E000E0E00070E00071C00071C00039C00039C0003980001B80001B80000F00000F00000
F00000E00000E00000E00001C00079C0007BC0007F80007F00003C0000131B7F9116>I
E end
TeXDict begin

1 0 bop -90 -101 a Fa(The)21 b("dvstats")f(utility)g(is)i(used)f(to)g
(obtain)g(statistics)e(about)i(a)h(PowerPC)-90 -46 y(program)e(which)h
(has)g(been)g(translated)f(using)h("dtest".)42 b(Its)21
b(usage)g(is)106 64 y(dvstats)f([flags])h(<cnts_file>)e([<info_dir>])
-90 173 y(where)i(<cnts_file>)e(must)i(have)g(a)h(".vliw_perf_ins_)o
(cnts")c(suffix,)j(and)g(contain)-90 228 y(counts)g(of)g(the)g(number)g
(of)g(times)g(each)g(VLIW)g(instruction)e(was)i(executed.)-90
283 y(\(The)g(".vliw_perf_ins_c)o(nts")d(suffix)j(need)g(not)g(be)g
(specified.\))42 b(The)-90 338 y(The)21 b(<cnts_file>)f(should)g(be)i
(automatically)d(produced)h(by)h(running)g("dtest".)-90
447 y(The)g(<info_dir>)f(is)h(where)g(information)f(about)g(each)h
(instruction)-90 502 y(is)g(placed)g(by)g("dtest")g(for)g(use)g(here.)
-90 612 y(Valid)g(flags)g(are)g("-b#",)f("-c",)h(,"-e",)g("-p",)f(and)h
("-s".)43 b(Dynamic)20 b(opcode)-90 666 y(frequencies)g(are)h(always)f
(produced.)42 b(The)21 b("-p")g(flag)g(causes)g(a)g(".pdf")g(file)-90
721 y(to)g(be)h(created.)42 b(This)21 b(".pdf")f(file)h(contains)f
(profile-directed-fe)o(edbac)o(k)-90 776 y(information.)41
b(The)21 b("-c")g(flag)g(turns)g(off)g(generation)f(of)h(the)g(.cnts)g
(file)-90 831 y(\(which)g(can)g(be)g(very)g(large\).)42
b(The)21 b("-e")g(flag)g(controls)f(how)i(the)f(".exits")-90
886 y(file)g(is)g(generated.)f(\(This)h(file)g(is)g(generated)f(for)h
("dvstats")f(only\).)43 b(By)-90 940 y(default)20 b(the)i(".exits")e
(file)h(is)g(sorted)g(by)g(frequency)f(of)h(group)g(exit.)43
b(\(Each)-90 995 y(group)21 b(is)g(a)h(tree)f(of)g(VLIW)g(tree)g
(instructions.\))41 b(With)21 b(the)g("-e")g(flag,)g(the)-90
1050 y(".exits")f(file)h(is)g(sorted)g(by)g(the)h(VLIW)f(at)g(the)g
(entry)g(point)g(of)g(a)h(group.)42 b(In)-90 1105 y(this)21
b(way)g(it)h(can)f(be)g(determined)f(how)h(many)g(of)g(the)g(paths)g
(through)g(the)g(group)-90 1160 y(tree)g(are)g(actually)f(exercised.)42
b(The)21 b("-b#")g(flag)g(is)g(used)g(to)g(specify)g(the)-90
1214 y(degree)g(of)g(branch)f(correlation)g(used)h(in)g(producing)f
(the)h(".condbr")f(file.)-90 1269 y(The)h(value)g(must)g(be)g
(non-negative)f(and)h(less)g(than)g(16.)-90 1379 y(Several)f(output)h
(files)g(are)g(produced)f(from)h(an)g(executable)f(file)h("foo":)-90
1488 y(foo.histo:)129 b(Histograms)19 b(\(both)i(textual)g(and)g
(graphical\))e(of)j(the)259 1543 y(number)e(of)i(operations)d(executed)
h(per)i(VLIW)f(instruction.)259 1598 y(Useful)f(for)h(determining)f
(ILP)h(achieved.)-90 1707 y(foo.exits:)129 b(A)21 b(list)g(of)h(the)f
(paths)g(in)g(each)g(VLIW)g(group,)f(and)i(the)259 1762
y(ILP)f(attained)f(on)h(each.)43 b(Useful)20 b(for)i(finding)e(areas)
259 1817 y(where)g(compiler)h(is)g(deficient.)-90 1927
y(foo.cnts:)151 b(Lists)20 b(the)i(number)e(of)i(times)e(each)h(VLIW)g
(instruction)-90 2036 y(foo.pops1:)129 b(A)21 b(list)g(of)h(opcode)e
(frequencies)g(in)h(decreasing)f(order)259 2091 y(of)h(use.)43
b(These)21 b(frequencies)e(are)i(those)g(of)g(operations)259
2146 y(on)g(the)g(taken)g(path)g(through)f(a)i(VLIW)f(instruction.)-90
2255 y(foo.sops1:)129 b(A)21 b(list)g(of)h(opcode)e(frequencies)g(in)h
(decreasing)f(order)259 2310 y(of)h(use.)43 b(These)21
b(frequencies)e(are)i(those)g(of)g(operations)259 2365
y(on)g(all)g(paths)g(through)f(a)i(VLIW)f(instruction.)p
eop
end
userdict /end-hook known{end-hook}if
%%EndDocument
 @endspecial 505 2578 a Fh(Figure)13 b(11.)e(Usage)h(Inf)o(ormation)g
(f)o(or)g Fk(dvstats)p Fh(.)915 2787 y Fn(39)p eop
%%Page: 40 40
40 39 bop -91 374 2063 6 v -91 481 a Fk(1840306)29 b(VLIW)179
b(Instructions)28 b(Executed)h(over)h(1)g(run)-61 548
y(497645)f(VLIW)g(User)h(Instructions)e(Executed)h(over)h(1)g(run)-91
680 y(3332864)f(Dynamic)g(PPC)h(Ops)f(in)h(Original)f(Program)g(with)g
(shared)h(libs)118 812 y(PPC)g(Path)f(Length)-61 879
y(1.8)g(=)h(----------------)118 945 y(VLIW)f(Path)h(Length)-61
1077 y(785864)f(Dynamic)g(PPC)h(Ops)f(in)h(Original)f(Program)g(--)h
(User)f(only)118 1210 y(PPC)h(Path)f(Length)-61 1276
y(1.6)g(=)h(----------------)118 1342 y(VLIW)f(Path)h(Length)-91
1475 y(Specified)f(ALU)g(Operations)g(Histogram:)59 b(4662313)29
b(ops)g(\()h(2.5)g(ops)f(/)h(ins\))-61 1541 y(0:)149
b(657355)29 b(\()h(35.72\045)89 b(35.72\045)29 b(cumulative\))-61
1607 y(1:)149 b(244518)29 b(\()h(13.29\045)89 b(49.01\045)29
b(cumulative\))-61 1673 y(2:)149 b(133254)29 b(\()60
b(7.24\045)89 b(56.25\045)29 b(cumulative\))-61 1739
y(3:)149 b(184201)29 b(\()h(10.01\045)89 b(66.26\045)29
b(cumulative\))-61 1806 y(4:)149 b(137968)29 b(\()60
b(7.50\045)89 b(73.75\045)29 b(cumulative\))-61 1872
y(5:)149 b(117211)29 b(\()60 b(6.37\045)89 b(80.12\045)29
b(cumulative\))-61 1938 y(6:)149 b(174626)29 b(\()60
b(9.49\045)89 b(89.61\045)29 b(cumulative\))-61 2004
y(7:)149 b(116383)29 b(\()60 b(6.32\045)89 b(95.94\045)29
b(cumulative\))-61 2070 y(8:)179 b(74790)29 b(\()60 b(4.06\045)f
(100.00\045)29 b(cumulative\))-91 2137 y(...)602 2286
y Fh(Figure)12 b(12.)g(Star)q(t)f(of)g Fk(ls.histo)g
Fh(\002le)915 2787 y Fn(40)p eop
%%Page: 41 41
41 40 bop -91 236 a Fk(/bin/ls)-91 302 y
(------------------------------)o(---------)o(---------)o(--)-91
369 y(Invocations)28 b(of)i(translator)627 b(333)-91
435 y(Number)29 b(of)h(pages)f(visited)687 b(0)-91 501
y(Number)29 b(of)h(user)f(pages)g(visited)538 b(0)-91
567 y(Total)29 b(number)g(of)h(entry)f(points)538 b(1366)-91
633 y(Average)29 b(number)g(of)h(entry)f(points)g(per)h(page)209
b(0)-91 700 y(#)30 b(of)f(groups)g(which)h(were)f(created)478
b(1366)-91 766 y(#)30 b(of)f(groups)g(which)h(executed)89
b(>)29 b(10)h(times)209 b(0)-91 832 y(#)30 b(of)f(groups)g(which)h
(executed)f(5)h(-)59 b(9)30 b(times)209 b(0)-91 898 y(#)30
b(of)f(groups)g(which)h(executed)f(2)h(-)59 b(4)30 b(times)209
b(0)-91 965 y(#)30 b(of)f(groups)g(which)h(executed)178
b(1)30 b(time)239 b(0)-91 1031 y(#)30 b(of)f(direct)g(offpage)119
b(branches)29 b(executed)179 b(189778)-91 1097 y(#)30
b(of)f(indirect)g(CTR)179 b(branches)29 b(executed)179
b(37457)-91 1163 y(#)30 b(of)f(indirect)g(LINKREG)59
b(branches)29 b(executed)179 b(70240)-91 1229 y(#)30
b(of)f(indirect)g(LINKREG2)g(branches)g(executed)179
b(0)-91 1296 y(#)30 b(of)f(TOTAL)59 b(crosspage)g(branches)29
b(executed)179 b(297475)-91 1362 y(#)30 b(of)f(hash)h(values)f(with)g
(single)h(entry)f(point)179 b(1264)-91 1428 y(Max)29
b(#)h(of)g(entry)f(points)g(for)h(any)f(hash)h(value)179
b(2)-91 1494 y(Hash)29 b(value)h(with)f(Max)h(#)f(of)h(entry)f(points)
269 b(484)-91 1560 y(Max)29 b(#)h(of)g(open)f(paths)807
b(170)-91 1627 y(Total)29 b(PPC)h(ins)f(\(some)h(xlated)f(mult)g
(times\))239 b(33759)-91 1693 y(Total)29 b(VLIW)h(instructions)686
b(1)-91 1759 y(Total)29 b(size)h(of)f(VLIW)299 b(code)418
b(291264)-91 1825 y(Size)29 b(of)h(VLIW)f(code)h(from)f(LOAD_VERIFY)g
(fails)179 b(2420)-91 1891 y(Size)29 b(of)h(VLIW)f(code)h(from)f
(LOAD_VERIFY)g(recomps)119 b(0)-91 1958 y(Number)29 b(of)418
b(LOAD_VERIFY)29 b(recomps)119 b(0)-91 2024 y(#)30 b(Times)f
(LOAD-VERIFY)g(instruc)g(failed)358 b(10)-91 2090 y(#)30
b(Sites)f(LOAD-VERIFY)g(instruc)g(failed)358 b(2)-91
2156 y(Total)29 b(size)h(of)f(simulation)119 b(code)418
b(2835264)-91 2222 y(Total)29 b(size)h(of)f(original)g(user)h(code)418
b(13896)-91 2289 y(Average)29 b(size)g(of)h(translated)f(page)g(of)h
(code)209 b(0)304 2450 y Fh(Figure)12 b(13.)f(Example)h(of)f
Fk(daisy.stats)g Fh(\002le)g(pr)o(oduced)j(b)o(y)e Fk(daisy)p
Fh(.)915 2787 y Fn(41)p eop
%%Page: 42 42
42 41 bop -91 50 a Fl(13)59 b(Building)15 b(the)f(D)n(AISY)i
(Executables)-41 174 y Fn(There)c(are)h(four)e(steps)i(to)f(compile)g
(the)h(two)e Fp(D)n(AISY)i Fn(e)o(x)o(ecutables,)h Fk(daisy)e
Fn(and)g Fk(dvstats)p Fn(:)-31 294 y(1.)25 b(Go)12 b(to)g(the)h
Fk(daisy)e Fn(directory)h(of)g(this)g(distrib)o(ution.)-31
402 y(2.)25 b(T)l(ype)13 b Fk(make)p Fn(.)-31 510 y(3.)25
b(Go)12 b(to)g(the)h Fk(dvstats)e Fn(directory)h(of)f(this)i(distrib)o
(ution.)-31 617 y(4.)25 b(T)l(ype)13 b Fk(make)p Fn(.)-91
758 y Fl(14)59 b(Quick)14 b(Start)h(Running)g(D)n(AISY)-41
882 y Fn(9)d(steps)h(to)f(run)g Fp(D)n(AISY)p Fn(:)-31
1002 y(1.)25 b(Login)12 b(to)g(a)h Fo(P)l(owerPC)p Fn(-604)g(machine,)g
(if)f(a)o(v)o(ailable.)-31 1110 y(2.)25 b(Make)19 b(sure)g(the)h
Fk(datasize)e Fn(limit)g(is)i(set)g(so)f(that)g Fp(D)n(AISY)h
Fn(can)f(run.)36 b Fp(D)n(AISY)20 b Fn(requires)f(at)g(least)h(256)31
1176 y(Mbytes.)38 b(Under)19 b Fo(csh)h Fn(or)f Fo(tcsh)p
Fn(,)j(this)e(can)g(be)f(accomplished)h(via)f(the)h(command)f
Fk(limit)29 b(datasize)31 1242 y(512000)g(kbytes)p Fn(,)12
b(which)g(gi)o(v)o(es)h(512)f(Mbytes.)-31 1350 y(3.)25
b(Make)20 b(sure)f(there)h(is)g(suf)o(\002cient)f(paging)g(space:)31
b(at)20 b(least)g(256)g(Mbytes,)i(and)e(preferably)f(400)g(Mbytes.)31
1416 y(The)e(amount)f(you)g(currently)f(ha)o(v)o(e)i(may)g(be)f
(determined)g(by)g(typing)g Fk(lsps)30 b(-a)p Fn(.)e(Contact)16
b(your)g(system)31 1483 y(administrator)11 b(if)h(you)g(need)g(to)h
(increase)f(your)g(amount.)-31 1590 y(4.)25 b(Make)12
b(sure)h(that)f(you)g(ha)o(v)o(e)h(the)f(directory)f(containing)h
Fk(daisy)p Fn(,)g(the)h Fp(D)n(AISY)f Fn(e)o(x)o(ecutable)h(on)g(your)e
(path.)-31 1698 y(5.)25 b(Set)15 b(the)f(en)n(vironment)g(v)o(ariable)h
Fo(D)n(AISY)p 762 1698 15 2 v 18 w(CONFIG)g Fn(to)g(where)g(the)g
(\002le)f Fk(daisy.config)g Fn(can)h(be)h(found.)31 1764
y(\(A)c(sample)g(v)o(ersion)h(is)f(in)h(the)f Fk(daisy)g
Fn(directory)f(of)h(this)g(distrib)o(ution.\))-31 1872
y(6.)25 b(Set)9 b(the)g(en)n(vironment)f(v)o(ariable)h
Fo(CA)o(CHE)p 766 1872 V 19 w(CONFIG)h Fn(to)f(where)g(the)g(\002les)h
Fk(cache.config)e Fn(and)h Fk(tlb.config)31 1938 y Fn(can)j(be)h
(found.)i(\(Sample)c(v)o(ersions)i(are)f(in)h(the)f Fk(daisy)g
Fn(directory)f(of)h(this)g(distrib)o(ution.\))-31 2046
y(7.)25 b(T)l(ype)14 b Fk(daisy)29 b(-V432)h(/bin/ls)p
Fn(.)18 b(W)n(ithin)c(10-20)f(seconds,)i(the)e(normal)g(directory)g
(listing)g(and)h(a)g(ne)o(w)31 2112 y(AIX)c(command)g(prompt)f(should)h
(appear)m(.)15 b(The)c(-V432)f(tells)g Fk(daisy)g Fn(that)g(it)h(is)f
(running)g(under)f(AIX)h(v)o(ersion)31 2178 y(4.3.2.)18
b(Y)-5 b(ou)13 b(should)g(use)g(the)g(proper)f(v)o(ersion)h(of)g(AIX)f
(for)h(the)g(machine)f(on)h(which)g(you)g(are)g(running.)k(This)31
2245 y(number)11 b(can)i(be)f(determined)g(by)g(using)h(the)f(command:)
300 2385 y Fk(lslpp)29 b(-i)h(|)f(grep)h(adt)f(|)h(grep)g(bos)f(|)h
(grep)f(lib)h(|)g(head)f(-1)31 2526 y Fp(D)n(AISY)16
b Fn(has)g(been)g(tested)f(under)h(three)f(v)o(ersions)h(of)f(AIX:)g
Fp(AIX)h(3.2.5,)i(AIX)e(4.1.5)p Fn(,)h(and)f Fp(AIX)g(4.3.2)p
Fn(,)i(al-)31 2593 y(though)12 b(there)g(has)g(not)h(been)f(recent)g
(testing)h(under)e Fp(AIX)i(3.2.5)g Fn(and)g(performance)e(there)h(is)g
(uncertain..)915 2787 y(42)p eop
%%Page: 43 43
43 42 bop -31 50 a Fn(8.)25 b(The)14 b(\002le)g Fk(daisy.stats)f
Fn(should)g(be)h(in)g(the)g(current)f(directory)m(,)g(and)h(ha)o(v)o(e)
g(contents)g(similar)g(to)f(those)i(in)31 116 y(Figure)c(13)i(on)f
(page)g(41.)-31 220 y(9.)25 b(T)l(ype)16 b Fk(dvstats)29
b(-c)g(ls)h(.)p Fn(.)25 b(This)16 b(should)f(complete)g(within)f(a)i
(couple)f(of)g(seconds.)25 b(Look)16 b(at)f(the)h(\002le)31
286 y Fk(ls.histo)p Fn(,)f(which)f(lists)h(the)g(in\002nite)f(cache)h
(ILP)g(attained)f(by)h(the)f(VLIW)h(machine.)23 b(The)15
b Fk(ls.histo)31 352 y Fn(\002le)d(should)h(be)g(similar)f(to)g(the)h
(one)g(in)f(Figure)g(12)h(on)f(page)h(40.)k(\(The)c Fk(-c)f
Fn(\003ag)h(suppresses)h(generation)e(of)g(a)31 418 y(lar)o(ge)g
Fk(ls.cnts)g Fn(\002le.\))-91 533 y Fl(Refer)o(ences)-66
623 y Fn([1])23 b(K)o(emal)13 b(Ebcio)t(\013)-21 b(glu.)13
b Fo(Some)g(Design)g(Ideas)f(for)h(a)g(VLIW)g(Ar)n(c)o(hitectur)n(e)i
(for)e(Sequential-Natur)n(ed)f(Softwar)n(e)p Fn(.)i(In)16
690 y(M.)h(Cosnard)g(et)f(al.,)i(editor)n(,)e Fo(P)l(ar)o(allel)h(Pr)n
(ocessing)p Fn(,)h(pages)f(3\22621.)f(North-Holland,)g(1988.)g
(\(Proceedings)g(of)16 756 y(IFIP)d(WG)i(10.3)f(W)l(orking)g
(Conference)g(on)g(P)o(arallel)g(Processing\).)-66 859
y([2])23 b(K)o(emal)11 b(Ebcio)t(\013)-21 b(glu)11 b(and)h(Erik)f(R.)h
(Altman,)f Fp(D)n(AISY)-5 b(:)12 b Fo(Dynamic)f(Compilation)g(for)g
(100\045)h(Ar)n(c)o(hitectur)o(al)h(Com-)16 926 y(patibility)p
Fn(.)g(Research)h(Report)f(RC)h(20538,)f(IBM)h(T)l(.J.)h(W)l(atson)f
(Research)g(Center)n(,)g(Y)-5 b(orkto)o(wn)11 b(Heights,)j(NY)-6
b(,)16 992 y(1996.)-66 1096 y([3])23 b(K)o(emal)11 b(Ebcio)t(\013)-21
b(glu)11 b(and)h(Erik)f(R.)h(Altman,)f Fp(D)n(AISY)-5
b(:)12 b Fo(Dynamic)f(Compilation)g(for)g(100\045)h(Ar)n(c)o(hitectur)o
(al)h(Com-)16 1162 y(patibility)p Fn(.)h(In)g Fo(Pr)n(oc.)h(of)f(the)h
(24th)e(Annual)i(International)e(Symposium)h(on)g(Computer)h(Ar)n(c)o
(hitectur)n(e)p Fn(,)i(pages)16 1228 y(26\22637,)c(Den)n(v)o(er)n(,)f
(CO,)h(June)g(1997.)g(A)n(CM.)-66 1332 y([4])23 b(K)o(emal)16
b(Ebcio)t(\013)-21 b(glu,)17 b(Jason)g(Fritts,)f(Stephen)f(K)n(osonock)
o(y)m(,)j(Michael)e(Gschwind,)h(Erik)f(R.)h(Altman,)g(Krishna)16
1398 y(K.)12 b(Kailas,)g(and)f(T)m(erry)f(Bright,)h Fo(An)h
(eight-issue)f(tr)n(ee-VLIW)g(pr)n(ocessor)i(for)e(dynamic)g(binary)g
(tr)o(anslation)p Fn(.)h(In)16 1464 y Fo(Pr)n(oc.)h(of)f(the)g(1998)f
(International)g(Confer)n(ence)i(on)f(Computer)g(Design)g(\(ICCD)g
('98\))f(\226)h(VLSI)f(in)h(Computers)16 1530 y(and)g(Pr)n(ocessors)p
Fn(,)j(pages)e(488\226495,)f(Austin,)h(TX,)g(October)f(1998.)h(IEEE)g
(Computer)f(Society)m(.)-66 1634 y([5])23 b(K)o(emal)e(Ebcio)t(\013)-21
b(glu,)23 b(Erik)e(R.)g(Altman,)i(Sumedh)d(Sathaye,)j(and)e(Michael)g
(Gschwind,)j Fo(Execution-Based)16 1700 y(Sc)o(heduling)16
b(for)h(VLIW)f(Ar)n(c)o(hitectur)n(es)p Fn(,)k(In)c Fo(Pr)n(oceedings)h
(of)g(Eur)n(opar'99)p Fn(,)h(pages)e(1269\2261280,)h(T)l(oulouse,)16
1767 y(France,)c(September)e(1999)-66 1870 y([6])23 b(K)o(emal)10
b(Ebcio)t(\013)-21 b(glu,)12 b(Erik)e(R.)i(Altman,)f(Sumedh)f(Sathaye,)
h(and)f(Michael)h(Gschwind,)h Fo(Optimizations)e(and)g(Or)o(-)16
1937 y(acle)k(P)l(ar)o(allelism)h(with)f(Dynamic)g(T)m(r)o(anslation)p
Fn(,)h(In)f Fo(Pr)n(oceedings)h(of)f(Micr)n(o-32)p Fn(,)h(Haifa,)f
(Israel,)h(No)o(v)o(ember)16 2003 y(16-18,)d(1999.)-66
2107 y([7])23 b(Michael)11 b(Gschwind,)g(K)o(emal)f(Ebcio)t(\013)-21
b(glu,)12 b(Erik)e(R.)h(Altman,)g(and)g(Sumedh)f(Sathaye)g
Fo(Binary)h(T)m(r)o(anslation)g(and)16 2173 y(Ar)n(c)o(hitectur)n(e)k
(Con)n(ver)n(gence)f(Issues)g(for)f(IBM)h(System/390)g
Fn(In)e Fo(Pr)n(oceedings)j(of)e(ICS-2000)p Fn(,)g(Santa)g(Fe,)g(Ne)o
(w)16 2239 y(Me)o(xico,)h(May)e(8-10,)g(2000.)-66 2343
y([8])23 b(Erik)10 b(R.)h(Altman)e(and)h(K)o(emal)g(Ebcioglu,)g
Fo(Simulation)f(and)h(Deb)o(ugging)f(of)h(Full)g(System)g(Binary)h(T)m
(r)o(anslation)p Fn(,)16 2409 y(Proceedings)h(of)g(PDCS-2000,)g(T)n
(rack)h(4)f(-)g(Modeling)g(and)h(Analysis,)g(August)f(8-10,)g(2000,)h
(Las)g(V)-6 b(e)o(gas,)14 b(NV)-66 2513 y([9])23 b(D)n(AISY)12
b(website:)j Fp(www)m(.r)o(esear)o(ch.ibm.com/daisy)-91
2617 y Fn([10])23 b(IBM)13 b(VLIW)f(website:)k Fp(www)m(.r)o(esear)o
(ch.ibm.com/vliw)915 2787 y Fn(43)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
